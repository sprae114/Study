ì¶œì²˜ : [[ëª¨ë˜ ìë°” ì¸ ì•¡ì…˜.pdf]]
í•´ì‹œíƒœí¬ : #ìŠ¤íŠ¸ë¦¼, #Stream
ì°¸ê³ ìë£Œ
1) [ìë°”ì˜ ì •ì„ - ìŠ¤íŠ¸ë¦¼(Stream) | Integerous DevLog (ryan-han.com)](https://ryan-han.com/post/dev/java-stream/)
2) [Java ìŠ¤íŠ¸ë¦¼ Stream (1) ì´ì •ë¦¬ | Eric Han's IT Blog (futurecreator.github.io)](https://futurecreator.github.io/2018/08/26/java-8-streams/)
3) [[Java] Stream API ì—°ìŠµë¬¸ì œ í’€ì´ (5/5) - MangKyu's Diary (tistory.com)](https://mangkyu.tistory.com/116)
----

## ìŠ¤íŠ¸ë¦¼ ê°œë… ì„¤ëª…

#### ğŸ“Œ ìŠ¤íŠ¸ë¦¼ì´ë€?
**ë°ì´í„° ì²˜ë¦¬ ì—°ì‚°ì„ ì§€ì›**í•˜ë„ë¡ ì†ŒìŠ¤ì—ì„œ ì¶”ì¶œëœ ì—°ì†ëœ ìš”ì†Œ

#### ğŸ“Œ ìŠ¤íŠ¸ë¦¼ì˜ ì¥ì ì€?
ìŠ¤íŠ¸ë¦¼ì„ ì´ìš©í•˜ë©´Â ì„ ì–¸í˜•(ì¦‰, ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì„ì‹œ êµ¬í˜„ ì½”ë“œ ëŒ€ì‹  **SQLì²˜ëŸ¼ ì§ˆì˜ë¡œ í‘œí˜„** í•  ìˆ˜ ìˆë‹¤.)ìœ¼ë¡œ ì»¬ë ‰ì…˜ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.
ë˜í•œ ìŠ¤íŠ¸ë¦¼ì„ ì´ìš©í•˜ë©´ **ë©€í‹°ìŠ¤ë ˆë“œ ì½”ë“œë¥¼ êµ¬í˜„í•˜ì§€ ì•Šì•„ë„ ë°ì´í„°ë¥¼Â íˆ¬ëª…í•˜ê²Œë³‘ë ¬ë¡œ ì²˜ë¦¬**í•  ìˆ˜ ìˆë‹¤.


#### ğŸ“Œ ëª…ë ¹í˜• í”„ë¡œê·¸ë˜ë°ê³¼ í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ì˜ ì°¨ì´ëŠ”?
- ëª…ë ¹í˜• í”„ë¡œê·¸ë˜ë°-> ì–´ë–»ê²Œ(How) í•  ê±´ì§€ë¥¼ ì„¤ëª…í•˜ëŠ” ë°©ì‹
```java
// 1 ~ 10ê¹Œì§€ì˜ ê°’ì´ iì— í• ë‹¹ëœë‹¤ 
for(int i = 1 ; i < 10; i++){ System.out.println(i); }
```
- í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë° -> ë¬´ì—‡(What)ì„ í•  ê±´ì§€ë¥¼ ì„¤ëª…í•˜ëŠ” ë°©ì‹
```java
process(10, print(num));
```

ì¶œì²˜ : [[í”„ë¡œê·¸ë˜ë°] í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°(Functional Programming) ì´ë€? - MangKyu's Diary (tistory.com)](https://mangkyu.tistory.com/111)


#### ğŸ“Œ <ì½”ë“œ> ìŠ¤íŠ¸ë¦¼ì˜ íŠ¹ì§•ì€?
- **1. ì›ë³¸ì˜ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ì§€ ì•ŠëŠ”ë‹¤.**
Stream APIëŠ” ì›ë³¸ì˜ ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ì—¬ ì›ë³¸ì˜ ë°ì´í„°ê°€ ì•„ë‹Œ ë³„ë„ì˜ ìš”ì†Œë“¤ë¡œ Streamì„ ìƒì„±í•œë‹¤. ì •ë ¬ì´ë‚˜ í•„í„°ë§ ë“±ì˜ ì‘ì—…ì€ ë³„ë„ì˜ Stream ìš”ì†Œë“¤ì—ì„œ ì²˜ë¦¬ê°€ ëœë‹¤.

``` java
List<String> sortedList = nameStream.sorted()
							.collect(Collections.toList());
```

- **2. Streamì€ ì¼íšŒìš©ì´ë‹¤.**
Stream APIëŠ” ì¼íšŒìš©ì´ê¸° ë•Œë¬¸ì— í•œë²ˆ ì‚¬ìš©ì´ ëë‚˜ë©´ ì¬ì‚¬ìš©ì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤. ë§Œì•½ ë‹«íŒ Streamì„ ë‹¤ì‹œ ì‚¬ìš©í•œë‹¤ë©´ IllegalStateExceptionì´ ë°œìƒí•˜ê²Œ ëœë‹¤.

```java
userStream.sorted().forEach(System.out::print);

// ìŠ¤íŠ¸ë¦¼ì´ ì´ë¯¸ ì‚¬ìš©ë˜ì–´ ë‹«í˜”ìœ¼ë¯€ë¡œ IllegalStateException ì—ëŸ¬ ë°œìƒ
int count = userStream.count(); 
```

- **3. ë‚´ë¶€ ë°˜ë³µìœ¼ë¡œ ì‘ì—…ì„ ì²˜ë¦¬í•œë‹¤.**
streamì—ì„œëŠ” ë°˜ë³µ ë¬¸ë²•ì„ ë©”ì†Œë“œ ë‚´ë¶€ì— ìˆ¨ê¸°ê³  ìˆê¸° ë•Œë¬¸ì— ê°„ê²°í•œ ì½”ë“œì˜ ì‘ì„±ì´ ê°€ëŠ¥í•˜ë‹¤.Â 

```java
nameStream.forEach(System.out::println);
```


#### ğŸ“Œ<ì½”ë“œ> ê¸°ì¡´ì½”ë“œì™€ ìŠ¤íŠ¸ë¦¼ ë¹„êµí•˜ê¸°
- ê¸°ì¡´ì½”ë“œ
```java
//í•„í„°ë§ì— ë§ëŠ” ê²°ê³¼ ì €ì¥
List<Dish< lowCaloricDishes = new ArrayList<>();
for(Dish dish : menu) {
  if(dish.getCalories() < 400) {
    lowCaloricishes.add(dish);
  }
}

//ì •ë ¬í•˜ê¸°
Collections.sort(lowCaloricDishes, new Comparator<Dish>() {
  public int compare(Dish dish1, Dish dish2) {
    reutnr Integer.compare(dish1.getCalories(), dish2.getCalories());
});

//í•´ë‹¹ ì¹¼ë¡œë¦¬ì˜ ìš”ë¦¬ ì €ì¥í•˜ê¸°
List<Strin lowCaloricDishesName = new ArrayList<>();
for(Dish dish : lowCaloricDishes) {
  lowCaloricDishesName.add(dish.getName());
}
```

- ìŠ¤íŠ¸ë¦¼ ì ìš© ì½”ë“œ
```java
List<String> lowCaloricDishesName = menu.stream()
  .filter(d -> d.getCalories() < 400) // 400 ì¹¼ë¡œë¦¬ ì´í•˜ì˜ ìš”ë¦¬ ì„ íƒ
  .sorted(comparing(Dish::getCalories)) // ì¹¼ë¡œë¦¬ë¡œ ìš”ë¦¬ ì •ë ¬
  .map(Dish::getName) // ìš”ë¦¬ëª… ì¶”ì¶œ
  .collect(toList()); // ëª¨ë“  ìš”ë¦¬ëª…ì„ ë¦¬ìŠ¤íŠ¸ì— ì €ì¥
```
![[Pasted image 20221117010655.png]]


#### ğŸ“Œ ìŠ¤íŠ¸ë¦¼ ì—°ì‚° ê³¼ì •ì— ë”°ë¥¸ í•¨ìˆ˜ ì •ë¦¬
##### ì¤‘ê°„ ì—°ì‚°
- ê°œë…
ì¤‘ê°„ ì—°ì‚°ì˜ ì¤‘ìš”í•œ íŠ¹ì§•ì€ ë‹¨ë§ ì—°ì‚°ì„ ìŠ¤íŠ¸ë¦¼ **íŒŒì´í”„ë¼ì¸ì— ì‹¤í–‰í•˜ê¸° ì „ê¹Œì§€ëŠ” ì•„ë¬´ ì—°ì‚°ë„ ìˆ˜í–‰í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒ**. ì¦‰,Â `ê²Œìœ¼ë¥´ë‹¤(lazy)`ëŠ” ê²ƒì´ë‹¤.

- ì¤‘ê°„ ì—°ì‚° ì¢…ë¥˜
1.  ìŠ¤íŠ¸ë¦¼ í•„í„°ë§ : filter(), distinct()
2.  ìŠ¤íŠ¸ë¦¼ ë³€í™˜ : map(), flatMap()
3.  ìŠ¤íŠ¸ë¦¼ ì œí•œ : limit(), skip()
4.  ìŠ¤íŠ¸ë¦¼ ì •ë ¬ : sorted()
5.  ìŠ¤íŠ¸ë¦¼ ì—°ì‚° ê²°ê³¼ í™•ì¸ : peek()

##### ìµœì¢… ì—°ì‚°
- ê°œë…
ìµœì¢… ì—°ì‚°ì€ ìŠ¤íŠ¸ë¦¼ **íŒŒì´í”„ë¼ì¸ì—ì„œ ê²°ê³¼ë¥¼ ë„ì¶œ**í•œë‹¤.

- ì¢…ë¥˜
1.  ìš”ì†Œì˜ ì¶œë ¥ : forEach()
2.  ìš”ì†Œì˜ ì†Œëª¨ : reduce()
3.  ìš”ì†Œì˜ ê²€ìƒ‰ : findFirst(), findAny()
4.  ìš”ì†Œì˜ ê²€ì‚¬ : anyMatch(), allMatch(), noneMatch()
5.  ìš”ì†Œì˜ í†µê³„ : count(), min(), max()
6.  ìš”ì†Œì˜ ì—°ì‚° : sum(), average()
7.  ìš”ì†Œì˜ ìˆ˜ì§‘ : collect()

#### ğŸ“ŒìŠ¤íŠ¸ë¦¼ê³¼ ì»¬ë ‰ì…˜ ì°¨ì´ëŠ”?
ìŠ¤íŠ¸ë¦¼ê³¼ ì»¬ë ‰ì…˜ì˜ ê°€ì¥ í° ì°¨ì´ëŠ”,Â **"ë°ì´í„°ë¥¼ ì–¸ì œ ê³„ì‚°í•˜ëŠëƒ"**Â ë¼ê³  í•©ë‹ˆë‹¤.

##### ì»¬ë ¥ì…˜
-  í˜„ì¬ ìë£Œêµ¬ì¡°ê°€ í¬í•¨í•˜ëŠ” ëª¨ë“  ê°’ì„ ë©”ëª¨ë¦¬ì— ì €ì¥í•˜ëŠ” ìë£Œêµ¬ì¡°(**ì ê·¹ì  ìƒì„±**)
- for-each ë“±ìœ¼ë¡œ ì‚¬ìš©ìê°€ ì§ì ‘ ìš”ì†Œë¥¼ ë°˜ë³µí•´ì•¼í•¨. (**ì™¸ë¶€ ë°˜ë³µ**)

##### ìŠ¤íŠ¸ë¦¼
-  ì´ë¡ ì ìœ¼ë¡œ ìš”ì²­í•  ë•Œë§Œ ìš”ì†Œë¥¼ ê³„ì‚°í•˜ëŠ” ê³ ì •ëœ ìë£Œêµ¬ì¡° (**ê²Œìœ¼ë¥¸ ìƒì„±**)
-  í•¨ìˆ˜ì— ì–´ë–¤ ì‘ì—…ì„ ìˆ˜í–‰í• ì§€ë§Œ ì§€ì •í•˜ë©´ ëª¨ë“  ê²ƒì´ ì•Œì•„ì„œ ì²˜ë¦¬(**ë‚´ë¶€ ë°˜ë³µ**)


#### ğŸ“Œ <ì½”ë“œ> ë‚´ë¶€ ë°˜ë³µì˜ ì¥ì ì€?
1) ì‘ì—…ì„ íˆ¬ëª…í•˜ê²Œ **ë³‘ë ¬ë¡œ ì²˜ë¦¬**í•˜ê±°ë‚˜, ë” ìµœì í™”ëœ **ë‹¤ì–‘í•œ ìˆœì„œë¡œ ì²˜ë¦¬**
2) ë°ì´í„° í‘œí˜„ê³¼ í•˜ë“œì›¨ì–´ë¥¼ í™œìš©í•œ ë³‘ë ¬ì„± êµ¬í˜„ì„ ìë™ìœ¼ë¡œ ì„ íƒ
![[Pasted image 20221117165158.png]]
- ex) 500ì¹¼ë¡œë¦¬ ì´ìƒ ìŒì‹ì„ í•„í„°ë§í•˜ê³  ì‹¶ì€ ê²½ìš°
``` java
List<String> names = menu.stream()  
    .filter(dish -> {  
      System.out.println("filtering " + dish.getName());  
      return dish.getCalories() > 500;  
    })  
    .map(dish -> {  
      System.out.println("mapping " + dish.getName());  
      return dish.getName();  
    })  
    .limit(3)  
    .collect(toList());  
System.out.println(names);
```

ì¶œë ¥
```
filtering : pork
mapping : pork
filtering : beef
mapping : beef
filtering : chicken
filtering : french fries
mapping : french fries

[pork, beef, french fries]
```
- filterì—°ì‚°ê³¼ mapì—°ì‚°ì´ ë³‘í•©ë˜ì–´ ì¶œë ¥ëŒ
- limitì—°ì‚°ì„ í†µí•´ ì‡¼íŠ¸ ì„œí‚·(ë¶ˆí•„ìš”í•œ ì—°ì‚° ì°¨ë‹¨)ì„ í•¨
- ğŸ’¥ filteringì „ì— chickenì€ ì¶œë ¥ëì§€ë§Œ, ì´í›„ í•„í„°ë§ ëœê±° í™•ì¸í•˜ê¸°
- ğŸ’¥ ëŒë‹¤ì‹ì—ì„œ ë‘ê°œì´ìƒ  ì“¸ë•Œ í‘œí˜„ë°©ì‹ ìµíˆê¸°

ğŸ“Œ && ì™€ & ì°¨ì´ëŠ”?
-   & ,Â  | : ì—°ì‚°ìì˜Â ì• ì¡°ê±´ì‹ê³¼ ë’¤ ì¡°ê±´ì‹ì„Â **ë‘˜ ë‹¤**Â ì‹¤í–‰Â ì‹œí‚¨ë‹¤.
-   && ,Â  ||Â  : ì—°ì‚°ìì˜Â ì• ì¡°ê±´ì‹ì˜ ê²°ê³¼ì— ë”°ë¼ ë’¤ ì¡°ê±´ì‹ì˜ ì‹¤í–‰ ì—¬ë¶€ë¥¼ ê²°ì •

ì¶œì²˜ : [[Java] ìë°” ì‡¼íŠ¸ ì„œí‚· (short-circuit) (tistory.com)](https://junior-datalist.tistory.com/214)

## <ì½”ë“œ> ìŠ¤íŠ¸ë¦¼ ì½”ë“œ ì˜ˆì‹œ
- ì‚¬ìš©ë˜ëŠ” ë°°ì—´
```java
public Dish(String name, boolean vegetarian, int calories, Type type) {  
  this.name = name;  
  this.vegetarian = vegetarian;  
  this.calories = calories;  
  this.type = type;  
}

public static final List<Dish> menu = Arrays.asList(  
    new Dish("pork", false, 800, Type.MEAT),  
    new Dish("beef", false, 700, Type.MEAT),  
    new Dish("chicken", false, 400, Type.MEAT),  
    new Dish("french fries", true, 530, Type.OTHER),  
    new Dish("rice", true, 350, Type.OTHER),  
    new Dish("season fruit", true, 120, Type.OTHER),  
    new Dish("pizza", true, 550, Type.OTHER),  
    new Dish("prawns", false, 400, Type.FISH),  
    new Dish("salmon", false, 450, Type.FISH)
```

### 1. í•„í„°ë§
ìŠ¤íŠ¸ë¦¼ì—ì„œ **ìš”ì†Œë¥¼ ì„ íƒ**í•˜ëŠ” í•„í„°ë§ì„ ì œê³µ

#### ğŸ“Œ Predicateë¥¼ ì´ìš©í•œ í•„í„°ë§ (Filter)
ì¸ìˆ˜ë¡œ ë°›ì•„ì„œ í”„ë ˆë””ì¼€ì´íŠ¸ì™€ **ì¼ì¹˜í•˜ëŠ” ëª¨ë“  ìš”ì†Œë¥¼ í¬í•¨í•˜ëŠ” ìŠ¤íŠ¸ë¦¼ì„ ë°˜í™˜.**

ex) vegetarianì´ trueì¸ ê²ƒë§Œ ë¦¬ìŠ¤íŠ¸ì— ë„£ê¸°
```java
List<Dish> vegetarianMenu = menu.stream()  
    .filter(Dish::isVegetarian)  
    .collect(toList());  
vegetarianMenu.forEach(System.out::println);
```

ì¶œë ¥
```
french fries
rice
season fruit
pizza
```

ğŸ“Œí•„í„° í‘œí˜„ë“¤ ëª¨ìŒ
```java
.filter("f"::equals)
```


#### ğŸ“Œ ê³ ìœ  ìš”ì†Œ í•„í„°ë§ (Distinct)
**ìš”ì†Œì˜ ì¤‘ë³µì„ ì œê±°í›„ ë°˜í™˜**. (ê³ ìœ  ì—¬ë¶€ëŠ” ìŠ¤íŠ¸ë¦¼ì—ì„œ ë§Œë“  ê°ì²´ì˜ hashCode, equalsë¡œ ê²°ì •ëœë‹¤.)

ex) ì§ìˆ˜ì¸ ê²ƒë§Œ ì¤‘ë³µ ì œê±°í•´ì„œ ì¶œë ¥
```java
List<Integer> numbers = Arrays.asList(1, 2, 1, 3, 3, 2, 4); 

numbers.stream()  
    .filter(i -> i % 2 == 0)  
    .distinct()  
    .forEach(System.out::println);
```

ì¶œë ¥
```
2
4
```
![[Pasted image 20221117180302.png]]

### 2. ìŠ¬ë¼ì´ì‹±
ìŠ¤íŠ¸ë¦¼ì˜ ìš”ì†Œë¥¼Â **ì„ íƒ**í•˜ê±°ë‚˜Â **ìŠ¤í‚µ**í•˜ëŠ” ê²ƒ

#### ğŸ“Œ Predicateë¥¼ ì´ìš©í•œ ìŠ¬ë¼ì´ì‹±(takeWhile / dropWhile)
: **ì´ë¯¸ ì •ë ¬ëœ ë¦¬ìŠ¤íŠ¸/ë°°ì—´ì¼ ê²½ìš°, ì¡°ê±´ì— ë²—ì–´ë‚ ë•Œ Â ë°˜ë³µì‘ì—…ì„ ì¤‘ë‹¨**í•˜ëŠ” ë°©ë²•
why? í° ë°°ì—´ì¼ ê²½ìš° ì¡°ê±´ì— ë§ì§€ì•ŠëŠ” ê·¸ ìˆœê°„Â Stream ì¡°íšŒë¥¼ ì¢…ë£Œí•˜ëŠ”ê²Œ íš¨ê³¼ì ì„.

- **takeWile** 
predicateë¥¼ ë§Œì¡±í•˜ì§€ ì•ŠëŠ”Â  ì²« ë²ˆì§¸ ì§€ì ë¶€í„° ë§ˆì§€ë§‰ ìŠ¤íŠ¸ë¦¼ì„ ë²„ë¦¼.
ex) ì •ë ¬ëœ menuì—ì„œ ì¹¼ë¡œë¦¬ 320ì‘ì€ ê²ƒ ì°¾ê¸°
```java
List<Dish> slicedMenu1
  = specialMenu.stream()
    .takeWhile(dish -> dish.getCalories() < 320)
    .collect(toList());
```

ì¶œë ¥
```
season fruit
prawns
```


- **DROPWHILE**
ì²« ë²ˆì§¸ ìš”ì†Œë¶€í„°, predicateë¥¼ ì²˜ìŒìœ¼ë¡œ ë§Œì¡±í•˜ëŠ” ì§€ì ê¹Œì§€ ë²„ë¦¬ê³  ë‚˜ë¨¸ì§€ë¥¼ ë°˜í™˜ (takeWhileì™€ ë°˜ëŒ€)
ex) 
```java
List<Dish> slicedMenu2
  = specialMenu.stream()
    .dropWhile(dish -> dish.getCalories() < 320)
    .collect(toList());
```

ì¶œë ¥
```
rice
chicken
french fries
```

#### ğŸ“Œ ì¶•ì†Œ (Limit)
**ì£¼ì–´ì§„ ê°’ ì´í•˜ì˜ í¬ê¸°**ë¥¼ ê°€ì§€ëŠ” ìƒˆë¡œìš´ ìŠ¤íŠ¸ë¦¼ì„ ë°˜í™˜

ex) 300ì¹¼ë¡œë¦¬ ì´ìƒì˜ ì„¸ ìš”ë¦¬ë¥¼ ë¦¬ìŠ¤íŠ¸ì— ë„£ì–´ë¼
```java
List<Dish> dishesLimit3 = menu.stream()  
    .filter(d -> d.getCalories() > 300)  
    .limit(3)  
    .collect(toList());  
dishesLimit3.forEach(System.out::println);
```

ì¶œë ¥
```
pork
beef
chicken
```

#### ğŸ“Œ ìš”ì†Œ ê±´ë„ˆë„ê¸° (Skip)
**ì²˜ìŒÂ  n ê°œì˜ ìš”ì†Œë¥¼ ì œì™¸**í•œ(ìŠ¤í‚µí•œ) ìŠ¤íŠ¸ë¦¼ì„ ë°˜í™˜

ex) 300ì¹¼ë¡œë¦¬ ì´ìƒì˜ ì²˜ìŒ ë‘ ìš”ë¦¬ë¥¼ ê±´ë„ˆëˆ ë‹¤ìŒ ë‚˜ë¨¸ì§€ ìš”ë¦¬ ë°˜í™˜
```java
List<Dish> dishesSkip2 = menu.stream()  
    .filter(d -> d.getCalories() > 300)  
    .skip(2)  
    .collect(toList());  
dishesSkip2.forEach(System.out::println);
```

ì¶œë ¥
```
chicken
french fries
rice
pizza
prawns
salmon
```

![[Pasted image 20221117183329.png]]

### 3. ìŠ¤íŠ¸ë¦¼ ë§¤í•‘
íŠ¹ì • ê°ì²´ì—ì„œ **íŠ¹ì • ë°ì´í„°ë¥¼ ì²˜ë¦¬**í•˜ëŠ” ì‘ì—…

#### ğŸ“Œ ë§¤í•‘ (Map)
ì¸ìˆ˜ë¡œ ì œê³µëœÂ  í•¨ìˆ˜ëŠ” ê° ìš”ì†Œì— ì ìš©ë˜ë©° í•¨ìˆ˜ë¥¼ ì ìš©í•œ ê²°ê³¼ê°€Â **ìƒˆë¡œìš´ ìš”ì†Œë¡œ ë§¤í•‘**

ex) ë‹¤ì–‘í•œ ì˜ˆì‹œ
```java
// ìš”ë¦¬ëª…ì„ ì¶”ì¶œí•˜ëŠ” ì˜ˆì œ 
List<String> dishNames = menu.stream()  
    .map(Dish::getName)  
    .collect(toList());  
System.out.println(dishNames);  
  
// ë‹¨ì–´ ë¦¬ìŠ¤íŠ¸ì˜ ê¸€ììˆ˜ ì¶”ì¶œ 
List<String> words = Arrays.asList("Hello", "World");  
List<Integer> wordLengths = words.stream()  
    .map(String::length)  
    .collect(toList());  
System.out.println(wordLengths);  
  
// mapì„ ì—°ê²°í•˜ì—¬ ìš”ë¦¬ëª…ì˜ ê¸€ììˆ˜ ì¶”ì¶œ
List<Integer> dishNamesLengths = menu.stream()  
        .map(Dish::getName)  
        .map(String::length)  
        .collect(toList());  
System.out.println(dishNamesLengths);  
```

ì¶œë ¥
```
[pork, beef, chicken, french fries, rice, season fruit, pizza, prawns, salmon]

[5, 5]

[4, 4, 7, 12, 4, 12, 5, 6, 6]
```

#### ğŸ“Œ í‰ë©´í™” ë§¤í•‘ (FlatMap)

ex) [Hello, World] -> [H, e, l, o, W, r, d]ë¡œ ë§Œë“¤ê¸°
```java
List<String> words = Arrays.asList("Hello", "World");

List<String> collect1 = words.stream()  
        .flatMap((String line) -> Arrays.stream(line.split("")))  
        .distinct()  
        .collect(toList());  
System.out.println(collect1);  


List<String> collect2 = words.stream()  
        .map(s -> s.split(""))   //ê° ë¬¸ìë¥¼ í¬í•¨í•˜ëŠ” ë°°ì—´ë¡œ ë°˜í™˜  
        .flatMap(Arrays::stream)  //í•˜ë‚˜ì˜ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ í‰ë©´í™”  
        .distinct()  
        .collect(toList());  
System.out.println(collect2);  
```

ì¶œë ¥
```
[H, e, l, o, W, r, d]
[H, e, l, o, W, r, d]
```

![[Pasted image 20221117203513.png]]

â“if) mapì„ ì“´ë‹¤ë©´ ì–´ë–»ê²Œ ê²°ê³¼ê°€ ë‚˜ì˜¬ê¹Œ?
Helloì™€ worldì˜ ì¤‘ë³µê²€ì‚¬ë¥¼ í•¨.
![[Pasted image 20221117202741.png]]

ex) ğŸ§¨ğŸ§¨ë‘ ê°œì˜ ìˆ«ì ë¦¬ìŠ¤íŠ¸ [1,2,3,4,5]ê³¼ [6,7,8] ê°€ ìˆì„ë•Œ, í•©ì´ 3ìœ¼ë¡œ ë‚˜ëˆ ë–¨ì–´ì§€ëŠ” ëª¨ë“  ìˆ«ì ìŒì˜ ë¦¬ìŠ¤íŠ¸ë¥¼ ë°˜í™˜ í•˜ì‹œì˜¤
```java
List<Integer> numbers1 = Arrays.asList(1,2,3,4,5);  
List<Integer> numbers2 = Arrays.asList(6,7,8);  
  
List<int[]> pairs = numbers1.stream()  
    .flatMap((Integer i) -> numbers2.stream()  
        .map((Integer j) -> new int[]{i, j})  
    )  
    .filter(pair -> (pair[0] + pair[1]) % 3 == 0)  
    .collect(toList());  
    
pairs.forEach(pair -> System.out.printf("(%d, %d) ", pair[0], pair[1]));
```

ì¶œë ¥
```
(1, 8) (2, 7) (3, 6) (4, 8) (5, 7) 
```

### 4. ê²€ìƒ‰ê³¼ ë§¤ì¹­
#### ğŸ“Œ Predicateë¡œ ë§¤ì¹­ í™•ì¸(all / any / none Match)
ex)  ë‹¤ì–‘í•œ ë§¤ì¹­ ì˜ˆì‹œ
```java
//ì ì–´ë„ í•œ ìš”ì†Œì™€ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸  
if(menu.stream().anyMatch(Dish::isVegetarian)) {  
    System.out.println("The menu is somewhat vegetarian friendly!!");  
}  
//ëª¨ë“  ìš”ì†Œì™€ ì¼ì¹˜í•˜ëŠ”ì§€ ê²€ì‚¬  
boolean isMatch = menu.stream().allMatch(dish -> dish.getCalories() < 1000);  
System.out.println(isMatch);  
  
//ëª¨ë“  ìš”ì†Œì™€ ì¼ì¹˜í•˜ì§€ ì•ŠëŠ” ê²½ìš°ë¥¼ ê²€ì‚¬  
boolean isHealthy = menu.stream().noneMatch(dish -> dish.getCalories() >= 1000);  
System.out.println(isHealthy);
```

ì¶œë ¥
```
The menu is somewhat vegetarian friendly!!
true
true
```

#### ğŸ“Œ ìš”ì†Œê²€ìƒ‰ (findAny / findFirst)
**findAny**
í˜„ì¬ ìŠ¤íŠ¸ë¦¼ì—ì„œ **ë§ëŠ” ì„ì˜ì˜ ìš”ì†Œë¥¼ ë°˜í™˜**
Â 
ex) ì±„ì‹ ìš”ë¦¬ë¥¼ ì„ íƒí•˜ëŠ” ë°©ë²•  
```java
Optional<Dish> dish = menu.stream()  
        .filter(Dish::isVegetarian)  
        .findAny();//findAnyëŠ” Optional ê°ì²´ë¥¼ ë°˜í™˜  
System.out.println(dish);
```

ì¶œë ¥
```
Optional[french fries]
```


**findFirst**
ìƒì„±ëœ ìˆœì„œê°€ ì •í•´ì§„ ìŠ¤íŠ¸ë¦¼ì—ì„œ **ì²«ë²ˆì§¸ ìš”ì†Œë¥¼ ì°¾ê¸°**

ex) 3ìœ¼ë¡œ ë‚˜ëˆ„ì–´ ë–¨ì–´ì§€ëŠ” ì²« ë²ˆì§¸ ì œê³±ê·¼ ê°’ì„ ë°˜í™˜
```java
List<Integer> someNumbers = Arrays.asList(1, 2, 3, 4, 5);  
Optional<Integer> first = someNumbers.stream()  
        .map(n -> n * n)  
        .filter(n -> n % 3 == 0)
        .findFirst();  
System.out.println(first);
```

ì¶œë ¥
```
Optional[9]
```

### 5. ë¦¬ë“€ì‹±
**Sql ì²˜ëŸ¼ ëª¨ë“  ìŠ¤íŠ¸ë¦¼ ìš”ì†Œì˜ ê°’ì„ ì²˜ë¦¬í•´ì„œ ê²°ê³¼ë¥¼ ë„ì¶œ**

#### ğŸ“Œ ì—°ì‚°(reduce / Sum)
ex) í•©êµ¬í•˜ê¸°
```java
List<Integer> numbers = Arrays.asList(3, 4, 5, 1, 2);  

int sum = numbers.stream()  
        .reduce(0, (a, b) -> a + b);  
System.out.println(sum);  


int sum2 = numbers.stream()  
        .reduce(0, Integer::sum);  
System.out.println(sum2);  


int sum3 = numbers.stream()  
        .mapToInt(n -> n)  
        .sum();  
System.out.println(sum3);
```

ì¶œë ¥
```
15
15
15
```
![[Pasted image 20221117220129.png]]

ex) ê°ì²´ì¼ë•Œ
```java
int calories = menu.stream()  
    .map(Dish::getCalories)  
    .reduce(0, Integer::sum);  
System.out.println("Number of calories:" + calories);


int calories2 = menu.stream()  
    .mapToInt(Dish::getCalories)  
    .sum();
System.out.println("Number of calories:" + calories2);
```

ì¶œë ¥
```
Number of calories:4300
Number of calories:4300
```

ex) ê°¯ìˆ˜ì„¸ê¸°
```java
int count = menu.stream()  
        .map(d -> 1)  
        .reduce(0, (a,b) -> a + b);  
System.out.println(count);  


long count1 = menu.stream()  
        .mapToInt(n -> 1)  
        .count();  
System.out.println(count1);
```

ì¶œë ¥
```
9
9
```


ex) ë¬¸ìì—´ë¡œ ë°˜í™˜
```java
String menuString = menu.stream()  
        .map(Dish::getName)  
        .distinct()  
        .reduce("", (a, b) -> a + b);  
System.out.println(menuString);
```

ì¶œë ¥
```
porkbeefchickenfrench friesriceseason fruitpizzaprawnssalmon
```




#### ğŸ“Œ ìµœëŒ€/ìµœì†Œ êµ¬í•˜ê¸°(Max / Min)
ex) ìµœëŒ€/ìµœì†Œ êµ¬í•˜ê¸°
```java
List<Integer> numbers = Arrays.asList(3, 4, 5, 1, 2);  

int max = numbers.stream().reduce(0, (a, b) -> Integer.max(a, b));  
System.out.println(max);  
  
Optional<Integer> min = numbers.stream().reduce(Integer::min);  
min.ifPresent(System.out::println);
```

ì¶œë ¥
```
5
1
```

![[Pasted image 20221117220147.png]]

### 6 ìˆ«ìí˜• ìŠ¤íŠ¸ë¦¼
reduceë¡œ í•˜ë©´ ì½”ë“œê°€ ì¢€ë” ë³µì¡í•˜ì§ + Integerì—ì„œ intë¡œ ì „í™˜í•˜ëŠ” ë°•ì‹±ë¹„ìš© ì†Œëª¨ëœë‹¤. ê·¸ë˜ì„œ **ê¸°ë³¸í˜•ì— íŠ¹í™”ëœ ìŠ¤íŠ¸ë¦¼ì„ ì œê³µ**í•¨.


#### ğŸ“Œ ê¸°ë³¸í˜• íŠ¹í™” ìŠ¤íŠ¸ë¦¼ (mapToInt)
``` java
//ê¸°ì¡´ì½”ë“œ
int calories = menu.stream()
  .map(Dish::getCalories)
  .reduce(0, Integer::sum);

//ë°”ë€ì½”ë“œ
int calories = menu.stream()
  .mapToInt(Dish::getCalories)
  .sum();
```

ì¶œë ¥
```
4300
4300
```


#### ğŸ“Œ ê°ì²´ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ë³µì›í•˜ê¸° (mapToInt / boxed)
```java
// ìŠ¤íŠ¸ë¦¼ì„ ìˆ«ì ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ë³€í™˜
IntStream intStream = menu.stream().mapToInt(Dish::getCalories); 

// ìˆ«ì ìŠ¤íŠ¸ë¦¼ì„ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ë³€í™˜
Stream<Integer> stream = intStream.boxed(); 
```


#### ğŸ“Œ ìˆ«ì ë²”ìœ„ (rangeClosed)
ex) 1 ~ 100ê¹Œì§€ ì§ìˆ˜ ê°œìˆ˜ì„¸ê¸°
```java
// ìˆ«ì ë²”ìœ„
IntStream evenNumbers = IntStream.rangeClosed(1, 100)  
    .filter(n -> n % 2 == 0);  
System.out.println(evenNumbers.count());
```

ì¶œë ¥
```
50
```


ex) x = 1 ~ 10, y = 1 ~ 100ê¹Œì§€ë¡œ ë§Œë“¤ ìˆ˜ ìˆëŠ” í”¼íƒ€ê³ ë¼ìŠ¤ ìˆ˜ëŠ”?
```java
Stream<int[]> n = IntStream.rangeClosed(1, 10).boxed()  
    .flatMap(a -> IntStream.rangeClosed(a, 100)  
        .filter(b -> Math.sqrt(a * a + b * b) % 1 == 0).boxed()  
        .map(b -> new int[] { a, b, (int) Math.sqrt(a * a + b * b) }));  
n.forEach(t -> System.out.println(t[0] + ", " + t[1] + ", " + t[2]));  
System.out.println();
```

ì¶œë ¥
```
3, 4, 5
5, 12, 13
6, 8, 10
7, 24, 25
8, 15, 17
9, 12, 15
9, 40, 41
10, 24, 26
```


### 7. ìŠ¤íŠ¸ë¦¼ ë§Œë“¤ê¸°
#### ğŸ“Œ ê°’ìœ¼ë¡œ ìŠ¤íŠ¸ë¦¼ ë§Œë“¤ê¸° (Stream.of)
ì„ì˜ì˜ ìˆ˜ë¥¼ ì¸ìˆ˜ë¡œ ë°›ëŠ” ì •ì  ë©”ì„œë“œÂ `Stream.of`ë¥¼ ì´ìš©í•´ì„œ ìŠ¤íŠ¸ë¦¼ì„ ë§Œë“¤ ìˆ˜ ìˆìŒ.

ex) ë¬¸ìì—´ ìŠ¤íŠ¸ë¦¼ì„ ëŒ€ë¬¸ìë¡œ ë°”ê¿”ì„œ ì¶œë ¥í•˜ëŠ” ì˜ˆì œ
```java
Stream<String> stream = Stream.of("Java 8", "Lambdas", "In", "Action");  
stream.map(String::toUpperCase)
	  .forEach(System.out::println);
```

ì¶œë ¥
```
JAVA 8
LAMBDAS
IN
ACTION
```

#### ğŸ“Œ ë°°ì—´ë¡œ ìŠ¤íŠ¸ë¦¼ ë§Œë“¤ê¸° (Array.stream)
ex) ë°°ì—´ìŠ¤íŠ¸ë¦¼ì„ í™œìš©í•´ì„œ í•© êµ¬í•˜ê¸°
```java
int[] numbers = {2, 3, 5, 7, 11, 13};
int sum = Arrays.stream(numbers).sum();
```

ì¶œë ¥
```
41
```


#### ğŸ“Œ í•¨ìˆ˜ë¡œ ë¬´í•œ ìŠ¤íŠ¸ë¦¼ ë§Œë“¤ê¸°1 (Iterate)
ex) 0ë¶€í„° 2ì”© ë”í•´ì„œ 5ê°œ ì¶œë ¥í•˜ê¸°
```java
Stream.iterate(0, n -> n + 2)  
    .limit(5)  
    .forEach(System.out::println);
```

ì¶œë ¥
```
0
2
4
6
8
```

ex) í”¼ë³´ë‚˜ì¹˜ ìˆ˜ì—´ ë§Œë“¤ê¸°
```java
Stream.iterate(new int[] { 0, 1 }, t -> new int[] { t[1], t[0] + t[1] })  
        .limit(10)  
        .forEach(t -> System.out.printf("%d ", t[0]));  
```

ì¶œë ¥
```
1 1 2 3 5 8 13 21 34 55 
```

ex) ì¡°ê±´ì„ ì´ìš©í•´ì„œ ì¢…ë£Œí•˜ëŠ” ë°©ë²•
```java
List<Integer> collect1 = Stream.iterate(0, n -> n < 20, n -> n + 3)  
        .collect(Collectors.toList());  
System.out.println(collect1);  


List<Integer> collect2 = Stream.iterate(0,  n -> n + 3)  
        .takeWhile(n -> n < 20)  
        .collect(Collectors.toList());  
System.out.println(collect2);  
```

ì¶œë ¥
```
[0, 3, 6, 9, 12, 15, 18]

[0, 3, 6, 9, 12, 15, 18]
```


#### ğŸ“Œ í•¨ìˆ˜ë¡œ ë¬´í•œ ìŠ¤íŠ¸ë¦¼ ë§Œë“¤ê¸°2 (Generate)
ex) ì„ì˜ì˜ double ìŠ¤íŠ¸ë¦¼
```java
List<Double> collect = Stream.generate(Math::random)  
        .limit(3)  
        .collect(Collectors.toList());  
System.out.println(collect);
```

ì¶œë ¥
```
[0.4383143801392815, 0.7571514993934333, 0.14408242014275896]
```

ğŸ“Œ ë‚œìˆ˜ë§Œë“¤ê¸° ë” ê¶ê¸ˆí•˜ë©´ [ìŠ¤íŠ¸ë¦¼ ë°ì´í„° ì†ŒìŠ¤ ë³„ ìƒì„± ë°©ë²• ì •ë¦¬ ](https://velog.io/@max9106/Java-%EC%8A%A4%ED%8A%B8%EB%A6%BCstream-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%86%8C%EC%8A%A4-%EB%B3%84-%EC%83%9D%EC%84%B1-%EB%B0%A9%EB%B2%95-%EC%A0%95%EB%A6%AC)


ex) ìš”ì†Œ 1ì„ ê°–ëŠ” ìŠ¤íŠ¸ë¦¼  
```java
IntStream.generate(() -> 1)  
    .limit(3)  
    .forEach(System.out::println);
```

ì¶œë ¥
```
1
1
1
```


### 8. ë¬¸ìì—´ ìŠ¤íŠ¸ë¦¼ ë§Œë“¤ê¸°
ex) ë¬¸ìì—´ì„ ì´ìš©í•œ ìŠ¤íŠ¸ë¦¼ë§Œë“¤ê¸°
```java
String s = "abc 123!@#$";  

//íŠ¹ì •ë¬¸ì í•„í„°ë§ ìŠ¤íŠ¸ë¦¼
List<Character> collect = s.chars()  
        .filter(s1 -> s1 < 90 && s1 > 50)  
        .mapToObj(n -> (char) n)  
        .collect(Collectors.toList());  
System.out.println(collect);  

//splitê³¼ ê°™ì€ ìŠ¤íŠ¸ë¦¼
List<Character> collect2 = s.chars()  
        .mapToObj(n -> (char) n)  
        .collect(Collectors.toList());  
System.out.println(collect2);  

//forEachë¡œ ì¶œë ¥
s.chars().forEach(c -> System.out.print(c + "\t"));  
System.out.println();
```

ì¶œë ¥
```
[3, @]
[a, b, c,  , 1, 2, 3, !, @, #, $]
97	98	99	32	49	50	51	33	64	35	36	
```
ì¶œì²˜ : [[Java] ìë°” ìŠ¤íŠ¸ë¦¼(Stream) ì‚¬ìš©ë²• ë° ì˜ˆì œ](https://hbase.tistory.com/171)


#### ğŸ“ŒMap ë©”ì„œë“œ ë” ì•Œì•„ë³´ê¸°
ì¶œì²˜ : [[Stream API] ì¤‘ê°„ ì—°ì‚° - map ë©”ì„œë“œ (tistory.com)](https://dev-kani.tistory.com/32)

2) splitì„ ì´ìš©í•´ì„œ ë¦¬ìŠ¤íŠ¸ë¡œ ë§Œë“¤ê¸°
```java
String s = "213412";

List<Integer> collect = Arrays.stream(s.split(""))  
        .map(n -> Integer.valueOf(n))  
        .collect(Collectors.toList());
System.out.println(collect);
```

- ì¶œë ¥
```
[2,1,3,4,1,2]
```

## ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ë°ì´í„° ìˆ˜ì§‘
ìµœì¢…ì—°ì‚°ì¸Â reduceì²˜ëŸ¼ ë‹¤ì–‘í•œ ëˆ„ì  ìš”ì†Œ ë°©ì‹ì„ ì¸ìˆ˜ë¡œ ë°›ì•„ì„œ **ìŠ¤íŠ¸ë¦¼ì„ ìµœì¢… ê²°ê³¼ë¡œ ë„ì¶œí•˜ëŠ” ë¦¬ë“€ì‹± ì—°ì‚°**ì„ ìˆ˜í–‰í•´ë³´ì

### Â ë¦¬ë“€ì‹± ì˜ˆì‹œ
#### ğŸ“Œ collectìœ¼ë¡œ ê°œìˆ˜ì„¸ê¸° (count)
why count()ê°€ ìˆëŠ”ë° ì´ê±¸ ì“°ëŠ”ê±°ì§€? collectorì™€ ì„ì–´ì“¸ë•Œ ìš©ì˜í•¨

ex) ê°œìˆ˜ì„¸ê¸°
```java
long menuCount = menu.stream().collect(Collectors.counting());
//long menuCount = menu.stream().count(); ì™€ ê°™ì€ ê²°ê³¼
```

ì¶œë ¥
```
9
```


#### ğŸ“Œ ìµœëŒ€/ìµœì†Œê°’ êµ¬í•˜ê¸° (maxBy / minBy)
ìŠ¤íŠ¸ë¦¼ì˜ ìš”ì†Œë¥¼ ë¹„êµí•˜ëŠ”ë° ì‚¬ìš©í•  Comparatorë¥¼ ì¸ìˆ˜ë¡œ ë°›ìŒ.
ex) ìµœëŒ€ê°’ êµ¬í•˜ê¸°
```java
Comparator<Dish> dishCaloriesComparator = Comparator.comparingInt(Dish::getCalories);  

Optional<Dish> mostCalorieDish = menu.stream().collect(Collectors.maxBy(dishCaloriesComparator));  
System.out.println(mostCalorieDish.get());
```

ì¶œë ¥
```
pork
```


#### ğŸ“Œ ìš”ì•½ì—°ì‚° (summarizingInt / summingInt)
ex) í†µê³„ ì˜ˆì‹œ
```java
int totalCalories = menu.stream().collect(summingInt(Dish::getCalories));  
System.out.println(totalCalories);  
  
Double average = menu.stream().collect(averagingInt(Dish::getCalories));  
System.out.println(average);  
  
IntSummaryStatistics menuStatistics = menu.stream().collect(summarizingInt(Dish::getCalories));  
System.out.println(menuStatistics);  
System.out.println(menuStatistics.getMax());
```

ì¶œë ¥
```
4300

477.77777

IntSummaryStatistics{count=9, sum=4300, min=120, average=477.777778, max=800}
800
```

![[Pasted image 20221118181049.png]]


#### ğŸ“Œ ë¬¸ìì—´ ì—°ê²° ( joining )
ex) ì¶œë ¥ ë¬¸ìì—´ ì—°ê²° ì˜ˆì‹œ
```java
String collect = menu.stream()  
        .map(Dish::getName)  
        .collect(joining("/"));  
System.out.println(collect);
```

ì¶œë ¥
```
pork/beef/chicken/french fries/rice/season fruit/pizza/prawns/salmon
```


#### ğŸ“Œ ë²”ìš© ë¦¬ë“€ì‹± ìš”ì•½(reducing)
ì²« ë²ˆì§¸ ì¸ìˆ˜ : ë¦¬ë“€ì‹± ì—°ì‚°ì˜ ì‹œì‘ê°’ í˜¹ì€ ìŠ¤íŠ¸ë¦¼ì— ì¸ìˆ˜ê°€ ì—†ì„ ë•ŒëŠ” ë°˜í™˜ ê°’
ë‘ ë²ˆì§¸ ì¸ìˆ˜ : stream ìš”ì†Œì—ì„œ íŠ¹ì • íƒ€ì…ìœ¼ë¡œì˜ ë³€í™˜í•˜ëŠ” í•¨ìˆ˜
ì„¸ ë²ˆì§¸ ì¸ìˆ˜ : ì—°ì‚° ë°©ë²•- ì—¬ê¸°ì„œëŠ” ë‘ í•­ëª©ì„ í•˜ë‚˜ì˜ ê°’ìœ¼ë¡œ ë”í•˜ëŠ” ì—°ì‚° ìˆ˜í–‰

ex) ë¦¬ë“€ì‹± ì—°ì‚°
```java
Integer sumCalories = menu.stream()  
        .collect(reducing(0, Dish::getCalories, (i, j) -> i + j));  
System.out.println(sumCalories);  
  
Integer sumCalories2 = menu.stream()  
        .collect(reducing(0, Dish::getCalories, Integer::sum));  
System.out.println(sumCalories2);  
  
String collect3 = menu.stream()  
        .collect(reducing("", Dish::getName, (a, b) -> a + "/" + b));  
System.out.println(collect3);

String collect4 = menu.stream()  
        .map(Dish::getName)  
        .collect(reducing((a, b) -> a + "/" + b))  
        .get();  
System.out.println(collect4);
```

ì¶œë ¥
```
4300
4300

/pork/beef/chicken/french fries/rice/season fruit/pizza/prawns/salmon
pork/beef/chicken/french fries/rice/season fruit/pizza/prawns/salmon
```
![[Pasted image 20221119152101.png]]

â“Â collect vs reduceì˜ ì°¨ì´ëŠ”?
-   collect : ë„ì¶œí•˜ë ¤ëŠ” ê²°ê³¼ë¥¼ ëˆ„ì í•˜ëŠ” ì»¨í…Œì´ë„ˆë¥¼ ë°”ê¾¸ë„ë¡ ì„¤ê³„ëœ ë©”ì„œë“œ
-   reduce : ë‘ ê°’ì„ í•˜ë‚˜ë¡œ ë„ì¶œí•˜ëŠ” ë¶ˆë³€í˜• ì—°ì‚°ì´ë¼ëŠ” ì ì—ì„œÂ  ë‘ ë©”ì„œë“œì˜ ì˜ë¯¸ê°€ ë‹¤ë¦…ë‹ˆë‹¤.


### ê·¸ë£¹í™”
#### ğŸ“Œ ê·¸ë£¹ ë¬¶ê¸° (groupingBy)
ex) íƒ€ì…ë³„ë¡œ ë¬¶ëŠ” ì˜ˆì‹œ
```java
Map<Dish.Type, List<Dish>> collect1 = menu.stream()  
        .collect(groupingBy(Dish::getType));  
System.out.println(collect1);
```

ì¶œë ¥
```
{OTHER=[french fries, rice, season fruit, pizza], MEAT=[pork, beef, chicken], FISH=[prawns, salmon]}
```

![[Pasted image 20221119152916.png]]

ex) ë¶„ë¥˜í•¨ìˆ˜ ë§Œë“¤ì–´ì„œ ë°˜í™˜ ì˜ˆì‹œ
```java
public enum CaloricLevel { DIET, NORMAL, FAT };

Map<CaloricLevel, List<Dish>> collect2 = menu.stream()  
        .collect(groupingBy(dish -> {  
            if (dish.getCalories() <= 400) return CaloricLevel.DIET;  
            else if (dish.getCalories() <= 700) return CaloricLevel.NORMAL;  
            else return CaloricLevel.FAT;  
        }));  
System.out.println(collect2);
```

ì¶œë ¥
```
{DIET=[chicken, rice, season fruit, prawns], NORMAL=[beef, french fries, pizza, salmon], FAT=[pork]}
```


#### ğŸ“Œ ê·¸ë£¹í™”ëœ ìš”ì†Œ ì¡°ì‘ (filtering / mapping)
ex) ê° ê²°ê³¼ ê·¸ë£¹ ìš”ì†Œë¥¼ ì¡°ì‘í•˜ëŠ” ì—°ì‚° ì˜ˆì‹œ
```java
//500ì¹¼ë¡œë¦¬ ì´ìƒì˜ ì¬ë£Œë§Œ Map íƒ€ì…ë³„ë¡œ ë„£ê¸°  
Map<Dish.Type, List<Dish>> collect3 = menu.stream()  
        .filter(dish -> dish.getCalories() > 500)  
        .collect(groupingBy(Dish::getType));  
System.out.println(collect3);  
  
//500ì¹¼ë¡œë¦¬ ì´ìƒì˜ ì¬ë£Œë§Œ Map íƒ€ì…ë³„ë¡œ ë„£ê¸°(ì—†ëŠ” íƒ€ì…ë„ í‘œì‹œí•˜ê¸°)  
Map<Dish.Type, List<Dish>> collect5 = menu.stream().collect(  
        groupingBy(Dish::getType,  
                filtering(dish -> dish.getCalories() > 500, toList())));  
System.out.println(collect5);  
  
//ê° ì¬ë£Œë¥¼ Mapì— íƒ€ì…ë³„ë¡œ ë„£ê¸°  
Map<Dish.Type, List<String>> collect4 = menu.stream()  
        .collect(groupingBy(Dish::getType,  
                mapping(Dish::getName, toList())));  
System.out.println(collect4);  
  
//Mapì˜ vauleê°€ Listì¸ ê²ƒì„ í‰ë©´í™”í•˜ê¸°  
Map<Dish.Type, Set<String>> collect6 = menu.stream()  
        .collect(groupingBy(Dish::getType,  
                flatMapping(dish -> dishTags.get(dish.getName()).stream(), toSet())));  
System.out.println(collect6);
```

ì¶œë ¥
```
{MEAT=[pork, beef], OTHER=[french fries, pizza]}

{MEAT=[pork, beef], FISH=[], OTHER=[french fries, pizza]}

{MEAT=[pork, beef, chicken], FISH=[prawns, salmon], OTHER=[french fries, rice, season fruit, pizza]}

{MEAT=[greasy, salty, salty, roasted, fried, crisp], FISH=[tasty, roasted, delicious, fresh], OTHER=[greasy, fried, light, natural, fresh, natural, tasty, salty]}
```

ğŸ“Œë‹¤ìˆ˜ì¤€ì˜ ê·¸ë£¹í™”ëŠ” í•„ìš”í• ë•Œ ì°¾ì•„ë³´ì(P.213)

ex) ì¸ìˆ˜ë¥¼ ë‹¤ë¥¸ ê²ƒìœ¼ ë„˜ê²¨ì£¼ëŠ” ê²½ìš° ì˜ˆì‹œ
```java
//counting()ì„ ì¸ìˆ˜ë¡œ ë„˜ê²¨ì£¼ëŠ” ê²½ìš°  
Map<Dish.Type, Long> collect7 = menu.stream()  
        .collect(groupingBy(Dish::getType, counting()));  
System.out.println(collect7);  
  
//maxbyë¥¼ ì¸ìˆ˜ë¡œ ë„˜ê²¨ì£¼ëŠ” ê²½ìš°  
Map<Dish.Type, Optional<Dish>> collect8 = menu.stream()  
        .collect(groupingBy(Dish::getType,  
                maxBy(Comparator.comparingInt(Dish::getCalories))));  
System.out.println(collect8);
```

ì¶œë ¥
```
{MEAT=3, FISH=2, OTHER=4}
{MEAT=Optional[pork], FISH=Optional[salmon], OTHER=Optional[pizza]}
```

#### ğŸ“Œ  ë¶„í•  (partitioningBy)
ë¶„í• ì€ ë¬´ì¡°ê±´ 2ê°œì˜ ê·¸ë£¹ìœ¼ë¡œ ê·¸ë£¹í™”í•  ìˆ˜ ìˆëŠ” ê²ƒ(Booleanì„ ë°˜í™˜í•˜ë¯€ë¡œ ë§µì˜ í‚¤ í˜•ì‹ì€ Boolean)

ex) ë¶„í•  ì˜ˆì‹œ
```java
//ì±„ì‹ ìœ ë¬´ë¡œ ë‚˜ëˆ„ê¸°  
Map<Boolean, List<Dish>> collect = menu.stream()  
        .collect(partitioningBy(Dish::isVegetarian));  
System.out.println(collect);  
System.out.println(collect.get(true));  
  
//ì±„ì‹ ìœ ë¬´ë¡œ ë‚˜ëˆ„ëŠ”ë° groupëœê±° ë„£ê¸°  
Map<Boolean, Map<Dish.Type, List<Dish>>> collect1 = menu.stream()  
        .collect(partitioningBy(Dish::isVegetarian, groupingBy(Dish::getType)));  
System.out.println(collect1);  
  
//ì±„ì‹ ìš”ë¦¬ì™€ ì•„ë‹Œ ê²ƒì¤‘ì—ì„œ ê°€ì¥ ë†’ì€ ì¹¼ë¡œë¦¬ ìŒì‹ ì°¾ê¸°  
Map<Boolean, Dish> collect2 = menu.stream().collect(  
        partitioningBy(Dish::isVegetarian,  
                collectingAndThen(  
                        maxBy(comparingInt(Dish::getCalories)), Optional::get)));  
System.out.println(collect2);  
  
//ì±„ì‹ ìš”ë¦¬ì™€ ì•„ë‹Œ ê²ƒ ê°œìˆ˜ì„¸ê¸°  
Map<Boolean, Long> collect3 = menu.stream().collect(  
        partitioningBy(Dish::isVegetarian, counting()));  
System.out.println(collect3);
```

ì¶œë ¥
```
{false=[pork, beef, chicken, prawns, salmon], true=[french fries, rice, season fruit, pizza]}
[french fries, rice, season fruit, pizza]

{false={MEAT=[pork, beef, chicken], FISH=[prawns, salmon]}, true={OTHER=[french fries, rice, season fruit, pizza]}}

{false=pork, true=pizza}

{false=5, true=4}
```


ex) ì†Œìˆ˜ íŒë³„í•˜ê¸°
```java
System.out.println(partitionPrimes(20));  
  
public static Map<Boolean, List<Integer>> partitionPrimes(int n) {  
  return IntStream.rangeClosed(2, n).boxed()  
          .collect(partitioningBy(candidate -> isPrime(candidate)));  
}  
  
public static boolean isPrime(int candidate) {  
  return IntStream.rangeClosed(2, candidate - 1)  
          .limit((long) Math.floor(Math.sqrt(candidate)) - 1)  
          .noneMatch(i -> candidate % i == 0);  
}
```

ì¶œë ¥
```
{false=[4, 6, 8, 9, 10, 12, 14, 15, 16, 18, 20], true=[2, 3, 5, 7, 11, 13, 17, 19]}
```


### ê¸°íƒ€
#### ğŸ“Œ  Optional ì²˜ë¦¬í•˜ëŠ” ë°©ë²•(isPresent / get / orElse)
1) isPresent()
ê°’ì„ í¬í•¨í•˜ë©´ true, ê°’ì„ í¬í•¨í•˜ì§€ ì•Šìœ¼ë©´ false
```java
boolean present = menu.stream()  
        .filter(Dish::isVegetarian)  
        .findAny()//findAnyëŠ” Optional ê°ì²´ë¥¼ ë°˜í™˜  
        .isPresent();  
System.out.println(present);
```

2) ifPresent()
ê°’ì„Â ê°€ì§€ê³  ìˆìœ¼ë©´ ì‹¤í–‰ ê°’ì´ ì—†ìœ¼ë©´ ë„˜ì–´ê°
```java
Optional<Integer> min = numbers.stream().reduce(Integer::min);  
min.ifPresent(System.out::println);
```

3) T get()
ê°’ì´ ì¡´ì¬í•˜ë©´ ë°˜í™˜í•˜ê³ , ì•„ë‹ˆë©´ NoSuchElementException

4) T orElse()
ê°’ì´ ì¡´ì¬í•˜ë©´ ë°˜í™˜í•˜ê³ , ì•„ë‹ˆë©´ ê¸°ë³¸ê°’ì„ ë°˜í™˜í•¨.



## ì»¬ë ‰ì…˜ íŒ©í† ë¦¬
#### ğŸ“Œì»¬ë ‰ì…˜ API ê°œë…
- ìŠ¤íŠ¸ë¦¼ì„ í™œìš©í•˜ì—¬ **ê°„ë‹¨í•˜ê²Œ ì»¬ë ‰ì…˜ì„ ìƒì„±**í•  ìˆ˜ ìˆê²Œí•¨.
- **Immutable**ì´ë¼ì„œ ì¶”ê°€ ë° ì‚­ì œ ë©”ì„œë“œë¥¼ í•˜ë©´, UnsupportedOperationException ë°œìƒí•¨
- ğŸ’¥**Arrays.asList()ëŠ” ìˆ˜ì •ì´ ê°€ëŠ¥í•˜ì§€ë§Œ, List.of()ëŠ” ìˆ˜ì • ë˜í•œ ì•ˆëŒ**

ì¶œì²˜ : [[JAVA] - Arrays.asList()ì™€ List.of()ì˜ ì°¨ì´ (tistory.com)](https://kim-jong-hyun.tistory.com/31)


#### ğŸ“Œë¦¬ìŠ¤íŠ¸ íŒ©í† ë¦¬
- ìŠ¤íŠ¸ë¦¼ì„ ì´ìš©í•œ ë¦¬ìŠ¤íŠ¸ ìƒì„±
```java
ArrayList<Object> friends1 = new ArrayList<>();  
friends1.add("Raphael");  
friends1.add("Olivia");  
friends1.add("Thibaut");  
  
List<String> friends2 = Arrays.asList("Raphael", "Olivia", "Thibaut");  
//friends2.add("John"); -> UnsupportedOperationException  
List<String> friends3 = List.of("Raphael", "Olivia", "Thibaut");  
//friends3.add("John"); -> UnsupportedOperationException  
//friends3.set(0,"John"); -> UnsupportedOperationException  
  
System.out.println(friends1);  
System.out.println(friends2);  
System.out.println(friends3);  
```

- ì¶œë ¥
```
[Raphael, Olivia, Thibaut]
[Raphael, Olivia, Thibaut]
[Raphael, Olivia, Thibaut]
```


#### ğŸ“Œì§‘í•© íŒ©í† ë¦¬
- ìŠ¤íŠ¸ë¦¼ì„ ì´ìš©í•œ ì§‘í•© ìƒì„±
```java
Set<String> set1 = Set.of("Raphael", "Olivia", "Thibaut");  
System.out.println(set1);
```

- ì¶œë ¥
```
[Raphael, Thibaut, Olivia]
```


#### ğŸ“Œë§µ íŒ©í† ë¦¬
- ìŠ¤íŠ¸ë¦¼ì„ ì´ìš©í•œ ë§µ ìƒì„±
```java
Map<String, Integer> map1 = Map.of("Raphael", 30, "Olivia", 25, "Thibaut", 26);  
  
Map<String, Integer> map2 = Map.ofEntries(  
        Map.entry("Raphael", 30),  
        Map.entry("Olivia", 25),  
        Map.entry("Thibaut", 26));  
  
System.out.println(map1);  
System.out.println(map2);
```

- ì¶œë ¥
```
{Raphael=30, Thibaut=26, Olivia=25}
{Raphael=30, Thibaut=26, Olivia=25}
```


## ë¦¬ìŠ¤íŠ¸ì™€ ì§‘í•©ì²˜ë¦¬
#### ğŸ“ŒëŒë‹¤ì‹ ì´ìš©í•œ ì‚­ì œ (removeIf)
ë¦¬ìŠ¤íŠ¸ì™€ ì§‘í•© ê¸°ëŠ¥ìœ¼ë¡œ, í”„ë ˆë””ì¼€ì´íŠ¸ë¥¼ ë§Œì¡±í•˜ëŠ” ìš”ì†Œë¥¼ ì œê±°í•¨.
- ë¦¬ìŠ¤íŠ¸ì—ì„œ 3ì˜ ë°°ìˆ˜ ìš”ì†Œë¥¼ ì‚­ì œí•˜ëŠ” ì˜ˆì‹œ
```java
List<Integer> numbers = new ArrayList<>(Arrays.asList(1, 2, 3, 4, 5, 6, 7, 8, 9));  
  
/* ConcurrentModificationException ë°œìƒ  
for (Integer num : numbers){  
    if (num%3 == 0){        numbers.remove(num);    }}  
 */  
 
System.out.println(numbers);  
numbers.removeIf(n -> (n % 3 == 0));  
System.out.println(numbers);
```

- ì¶œë ¥
```
[1, 2, 3, 4, 5, 6, 7, 8, 9]
[1, 2, 4, 5, 7, 8]
```
ì¶œì²˜ : [Java - ArrayList.removeIf() ì‚¬ìš© ë°©ë²• ë° ì˜ˆì œ](https://codechacha.com/ko/java-collections-arraylist-removeif/)