ì°¸ê³ ìë£Œ
1) [Mockito Tutorial | Baeldung](https://www.baeldung.com/mockito- series)
2) [ê°œìš” (ëª¨í‚¤í†  5.2.0 API) (javadoc.io)](https://javadoc.io/doc/org.mockito/mockito- core/latest/org/mockito/Mockito.html)
3) [[TDD] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸(Unit Test) ì‘ì„±ì˜ í•„ìš”ì„± (1/3) - MangKyu's Diary (tistory.com)](https://mangkyu.tistory.com/143)
- - - - - 

## ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±ì˜ í•„ìš”ì„±
#### ğŸ“Œë‹¨ìœ„ í…ŒìŠ¤íŠ¸(Unit Test) ì‘ì„±ì˜ í•„ìš”ì„±
ì¼ë°˜ì ìœ¼ë¡œ ì‹¤ë¬´ì—ì„œ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•œë‹¤ê³  í•˜ë©´ ê±°ì˜ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë¥¼ ì˜ë¯¸í•œë‹¤. í†µí•© í…ŒìŠ¤íŠ¸ëŠ” ì‹¤ì œ ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ë“¤ ê°„ì˜ ìƒí˜¸ì‘ìš©ì„ í…ŒìŠ¤íŠ¸í•˜ê¸° ë•Œë¬¸ì— ëª¨ë“  ì»´í¬ë„ŒíŠ¸ë“¤ì´ êµ¬ë™ëœ ìƒíƒœì—ì„œ í…ŒìŠ¤íŠ¸ë¥¼ í•˜ê²Œ ëœë‹¤. ê·¸ë ‡ê¸°ì— í†µí•© í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ì„œëŠ” ìºì‹œë‚˜ ë°ì´í„°ë² ì´ìŠ¤ ë“± ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ë“¤ê³¼ ì‹¤ì œ ì—°ê²°ì„ í•´ì•¼ í•˜ê³ , ì‹œìŠ¤í…œì„ êµ¬ì„±í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ë“¤ì´ ë§ì•„ì§ˆìˆ˜ë¡ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ë¹„ìš©(ì‹œê°„)ì´ ìƒë‹¹íˆ ì»¤ì§„ë‹¤. ë°˜ë©´ì— ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ëŠ”Â **í•´ë‹¹ ë¶€ë¶„ë§Œ ë…ë¦½ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•˜ê¸° ë•Œë¬¸ì— ì–´ë–¤ ì½”ë“œë¥¼ ë¦¬íŒ©í† ë§í•˜ì—¬ë„ ë¹ ë¥´ê²Œ ë¬¸ì œ ì—¬ë¶€ë¥¼ í™•ì¸**í•  ìˆ˜ ìˆë‹¤.

- í…ŒìŠ¤íŒ…ì— ëŒ€í•œ ì‹œê°„ê³¼ ë¹„ìš©ì„ ì ˆê°í•  ìˆ˜ ìˆë‹¤.
- ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€ ì‹œì— ìˆ˜ì‹œë¡œ ë¹ ë¥´ê²Œ í…ŒìŠ¤íŠ¸ í•  ìˆ˜ ìˆë‹¤.
- ë¦¬íŒ©í† ë§ ì‹œì— ì•ˆì •ì„±ì„ í™•ë³´í•  ìˆ˜ ìˆë‹¤.
- ì½”ë“œì— ëŒ€í•œ ë¬¸ì„œê°€ ë  ìˆ˜ ìˆë‹¤.

ê·¸ë ‡ê¸° ë•Œë¬¸ì— ì‹¤ë¬´ì—ì„œëŠ” ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë¥¼ ì„ í˜¸í•˜ë©°, ìš”ì¦˜ ë§ì´ ì‚¬ìš©ë˜ëŠ” TDD(Test- Driven Development, í…ŒìŠ¤íŠ¸ ì£¼ë„ ê°œë°œ) ì—ì„œ ì–˜ê¸°í•˜ëŠ” í…ŒìŠ¤íŠ¸ë„ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë¥¼ ì˜ë¯¸í•œë‹¤. ìš°ë¦¬ëŠ” **ìš°ë¦¬ê°€ ì‘ì„±í•œÂ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ìˆ˜ì‹œë¡œ ë¹ ë¥´ê²Œ ëŒë¦¬ë©´ì„œ ë¬¸ì œë¥¼ íŒŒì•…**í•  ìˆ˜ ìˆë‹¤.


#### ğŸ“Œë‹¨ìœ„ í…ŒìŠ¤íŠ¸ì˜ ë¬¸ì œì ê³¼ Stub
ì–´ë–¤ ê°ì²´ê°€ ìì²´ì ìœ¼ë¡œ ëª¨ë“  ì¼ì„ ì²˜ë¦¬í•œë‹¤ë©´ ë¬¸ì œê°€ ì—†ê² ì§€ë§Œ, ì¼ë°˜ì ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œëŠ” **1ê°œì˜ ê¸°ëŠ¥ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ ë‹¤ë¥¸ ê°ì²´ë“¤ê³¼ ë©”ì„¸ì§€ë¥¼ ì£¼ê³  ë°›ì•„ì•¼ í•œë‹¤.** í•˜ì§€ë§Œ ì•ì„œ ì„¤ëª…í•˜ì˜€ë“¯ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ëŠ” í•´ë‹¹ ëª¨ë“ˆì— ëŒ€í•œ **ë…ë¦½ì ì¸ í…ŒìŠ¤íŠ¸ì´ê¸° ë•Œë¬¸ì— ë‹¤ë¥¸ ê°ì²´ì™€ ë©”ì„¸ì§€ë¥¼ ì£¼ê³  ë°›ëŠ” ê²½ìš°ì— ë¬¸ì œê°€ ë°œìƒ**í•œë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì—Â ë‹¤ë¥¸ ê°ì²´ ëŒ€ì‹ ì— **ê°€ì§œ ê°ì²´(Mock Object)ë¥¼ ì£¼ì…í•˜ì—¬ ì–´ë–¤ ê²°ê³¼ë¥¼ ë°˜í™˜í•˜ë¼ê³  ì •í•´ì§„ ë‹µë³€ì„ ì¤€ë¹„ì‹œì¼œì•¼ í•˜ëŠ”ë°, ì´ë¥¼ stub**ì´ë¼ê³  í•œë‹¤.

ì˜ˆë¥¼ ë“¤ì–´ ë°ì´í„°ë² ì´ìŠ¤ì— ìƒˆë¡œìš´ ë°ì´í„°ë¥¼ ì¶”ê°€í•˜ëŠ” ì½”ë“œë¥¼ í…ŒìŠ¤íŠ¸í•œë‹¤ê³  í•˜ë©´, ê°€ì§œ ë°ì´í„°ë² ì´ìŠ¤(Mock Database)ë¥¼ ì£¼ì…í•˜ì—¬ insert ì²˜ë¦¬ ì‹œì— ë°˜ë“œì‹œì— 1ì„ ë°˜í™˜í•˜ë„ë¡ í•´ì£¼ëŠ” ê²ƒì´ stubì´ë‹¤.


#### ğŸ“Œì¢‹ì€Â ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ì˜ íŠ¹ì§•
ì¼ë°˜ì ìœ¼ë¡œ **ìš”êµ¬ ì‚¬í•­ì€ ê³„ì†í•´ì„œ ë³€í•˜ê³ , ê·¸ì— ë§ì¶° ìš°ë¦¬ì˜ ì½”ë“œ ì—­ì‹œ ë³€ê²½**ë˜ì–´ì•¼ í•œë‹¤. í•˜ì§€ë§Œ ì‹¤ì œ ì½”ë“œë¥¼ ë³€ê²½í•œë‹¤ëŠ” ê²ƒì€ ì ì¬ì ì¸ ë²„ê·¸ê°€ ë°œìƒí•  ìˆ˜ ìˆìŒì„ ë‚´í¬í•˜ëŠ”ë°,Â ì¢‹ì€ í…ŒìŠ¤íŠ¸ ì½”ë“œê°€ ìˆë‹¤ë©´ ë³€ê²½ëœ ì½”ë“œë¥¼ ê²€ì¦í•¨ìœ¼ë¡œì¨ ì´ë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤. ë˜í•œ ì‹¤ì œ ì½”ë“œê°€ ë³€ê²½ë˜ë©´ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì—­ì‹œ ë³€ê²½ì´ í•„ìš”í•  ìˆ˜ ìˆëŠ”ë°, ì´ëŸ¬í•œ ì´ìœ ë¡œ ìš°ë¦¬ëŠ” í…ŒìŠ¤íŠ¸ ì½”ë“œ ì—­ì‹œ ê°€ë…ì„±ìˆê²Œ ì‘ì„±í•  í•„ìš”ê°€ ìˆë‹¤.

ê·¸ë ‡ê¸°ì— í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•˜ëŠ” ê²½ìš°ì—ëŠ” ë‹¤ìŒì„ ì¤€ìˆ˜í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.
1.  1ê°œì˜ í…ŒìŠ¤íŠ¸ í•¨ìˆ˜ì— ëŒ€í•´ **assertë¥¼ ìµœì†Œí™”**í•˜ë¼
2.  1ê°œì˜ í…ŒìŠ¤íŠ¸ í•¨ìˆ˜ëŠ” **1ê°€ì§€ ê°œë… ë§Œì„ í…ŒìŠ¤íŠ¸**í•˜ë¼


ë˜í•œ ì¢‹ê³  ê¹¨ë—í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œëŠ” **FIRSTë¼ëŠ” 5ê°€ì§€ ê·œì¹™**ì„ ë”°ë¼ì•¼ í•œë‹¤.
1.  Fast: í…ŒìŠ¤íŠ¸ëŠ” ë¹ ë¥´ê²Œ ë™ì‘í•˜ì—¬ ìì£¼ ëŒë¦´ ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.
2.  Independent: ê°ê°ì˜ í…ŒìŠ¤íŠ¸ëŠ” ë…ë¦½ì ì´ë©° ì„œë¡œ ì˜ì¡´í•´ì„œëŠ” ì•ˆëœë‹¤.
3.  Repeatable: ì–´ëŠ í™˜ê²½ì—ì„œë„ ë°˜ë³µ ê°€ëŠ¥í•´ì•¼ í•œë‹¤.
4.  Self- Validating: í…ŒìŠ¤íŠ¸ëŠ” ì„±ê³µ ë˜ëŠ” ì‹¤íŒ¨ë¡œ bool ê°’ìœ¼ë¡œ ê²°ê³¼ë¥¼ ë‚´ì–´ ìì²´ì ìœ¼ë¡œ ê²€ì¦ë˜ì–´ì•¼ í•œë‹¤.
5.  Timely: í…ŒìŠ¤íŠ¸ëŠ” ì ì‹œì— ì¦‰, í…ŒìŠ¤íŠ¸í•˜ë ¤ëŠ” ì‹¤ì œ ì½”ë“œë¥¼ êµ¬í˜„í•˜ê¸° ì§ì „ì— êµ¬í˜„í•´ì•¼ í•œë‹¤.


## JavaÂ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
#### ğŸ“Œë¼ì´ë¸ŒëŸ¬ë¦¬
- JUnit5: ìë°” ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ í…ŒìŠ¤íŒ… í”„ë ˆì„ì›Œí¬
- AssertJ: ìë°” í…ŒìŠ¤íŠ¸ë¥¼ ë•ê¸° ìœ„í•´ ë‹¤ì–‘í•œ ë¬¸ë²•ì„ ì§€ì›í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬


#### ğŸ“Œgiven/when/then íŒ¨í„´
given- when- then íŒ¨í„´ì´ë€ 1ê°œì˜ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë¥¼ 3ê°€ì§€ ë‹¨ê³„ë¡œ ë‚˜ëˆ„ì–´ ì²˜ë¦¬í•˜ëŠ” íŒ¨í„´ìœ¼ë¡œ, ê°ê°ì˜ ë‹¨ê³„ëŠ” ë‹¤ìŒì„ ì˜ë¯¸í•œë‹¤.
- given(ì¤€ë¹„): ì–´ë– í•œ ë°ì´í„°ê°€ ì¤€ë¹„ë˜ì—ˆì„ ë•Œ
- when(ì‹¤í–‰): ì–´ë– í•œ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ë©´
- then(ê²€ì¦): ì–´ë– í•œ ê²°ê³¼ê°€ ë‚˜ì™€ì•¼ í•œë‹¤.


#### ğŸ“Œ (ì½”ë“œ) GWT ë‹¨ìœ„í…ŒìŠ¤íŠ¸ ì˜ˆì‹œ
ì½”ë“œ) ë¡œë˜ ìƒì„±ê¸° Java ì½”ë“œ
```java
public class LottoNumberGenerator {  
  
    public List<Integer> generate(final int money) {  
        if (!isValidMoney(money)) {  
            throw new RuntimeException("ì˜¬ë°”ë¥¸ ê¸ˆì•¡ì´ ì•„ë‹™ë‹ˆë‹¤.");  
        }  
        return generate();  
    }  
  
    private boolean isValidMoney(final int money) {  
        return money == 1000;  
    }  
  
    private List<Integer> generate() {  
        return new Random()  
                .ints(1, 45 + 1)  
                .distinct()  
                .limit(6)  
                .boxed()  
                .collect(Collectors.toList());  
    }  
    
}
```

í…ŒìŠ¤íŠ¸ ì½”ë“œë“¤ì„ ì‘ì„±í•´ë³´ë„ë¡ í•˜ì.
1.  ë¡œë˜ ë²ˆí˜¸ ê°¯ìˆ˜ í…ŒìŠ¤íŠ¸
2.  ë¡œë˜ ë²ˆí˜¸ ë²”ìœ„ í…ŒìŠ¤íŠ¸
3.  ì˜ëª»ëœ ë¡œë˜ ê¸ˆì•¡ í…ŒìŠ¤íŠ¸

ì½”ë“œ) ë¡œë˜ ë²ˆí˜¸ ê°¯ìˆ˜ í…ŒìŠ¤íŠ¸
```java
@DisplayName("ë¡œë˜ ë²ˆí˜¸ ê°¯ìˆ˜ í…ŒìŠ¤íŠ¸")  
@Test  
void lottoNumberSizeTest() {  
    // given  
    final LottoNumberGenerator lottoNumberGenerator = new LottoNumberGenerator();  //ë‚˜ì¤‘ì—ëŠ” ì£¼ì…í•¨.
    final int price = 1000;  
      
    // when  
    final List<Integer> lottoNumber = lottoNumberGenerator.generate(price);  
      
    // then  
    assertThat(lotto.size()).isEqualTo(6);  
}
```

ì½”ë“œ)ë¡œë˜ ë²ˆí˜¸ ë²”ìœ„ í…ŒìŠ¤íŠ¸
```java
@DisplayName("ë¡œë˜ ë²ˆí˜¸ ë²”ìœ„ í…ŒìŠ¤íŠ¸")  
@Test  
void lottoNumberRangeTest() {  
    // given  
    final LottoNumberGenerator lottoNumberGenerator = new LottoNumberGenerator();  
    final int price = 1000;  
      
    // when  
    final List<Integer> lotto = lottoNumberGenerator.generate(price);  
      
    // then  
    assertThat(lotto.stream().allMatch(v - > v >= 1 && v <= 45)).isTrue();  
}
```

ì½”ë“œ)ì˜ëª»ëœ ë¡œë˜ ê¸ˆì•¡ í…ŒìŠ¤íŠ¸
```java
@DisplayName("ì˜ëª»ëœ ë¡œë˜ ê¸ˆì•¡ í…ŒìŠ¤íŠ¸")  
@Test  
void lottoNumberInvalidMoneyTest() {  
    // given  
    final LottoNumberGenerator lottoNumberGenerator = new LottoNumberGenerator();  
    final int price = 2000;  
      
    // when  
    final RuntimeException exception = assertThrows(RuntimeException.class, 
										    () - > lottoNumberGenerator.generate(price));  
      
    // then  
    assertThat(exception.getMessage()).isEqualTo("ì˜¬ë°”ë¥¸ ê¸ˆì•¡ì´ ì•„ë‹™ë‹ˆë‹¤.");  
}
```

#### ğŸ“ŒJUnití…ŒìŠ¤íŠ¸ í•¨ìˆ˜ ë” ì•Œì•„ë³´ê¸°
[[10ë¶„ í…Œì½”í†¡] ğŸŒŠ ë°”ë‹¤ì˜ JUnit5 ì‚¬ìš©ë²• - YouTube](https://www.youtube.com/watch?v=EwI3E9Natcw)


## Mockito í…ŒìŠ¤íŠ¸
#### ğŸ“ŒMockitoë€?
ê°œë°œìê°€ ë™ì‘ì„ ì§ì ‘ ì œì–´í•  ìˆ˜ ìˆëŠ” ê°€ì§œ ê°ì²´ë¥¼ ì§€ì›í•˜ëŠ” í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬ì´ë‹¤.Â ì¼ë°˜ì ìœ¼ë¡œ Springìœ¼ë¡œ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ **ê°œë°œí•˜ë©´, ì—¬ëŸ¬ ê°ì²´ë“¤ ê°„ì˜ ì˜ì¡´ì„±**ì´ ìƒê¸´ë‹¤. ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ **ê°€ì§œ ê°ì²´ë¥¼ ì£¼ì…ì‹œì¼œì£¼ëŠ” Mockito ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í™œìš©**í•  ìˆ˜ ìˆë‹¤.

#### ğŸ“ŒMockito ê°œë… ì„¤ëª…

1. Mock ê°ì²´ ì˜ì¡´ì„± ì£¼ì…
Mockitoì—ì„œÂ ê°€ì§œ ê°ì²´ì˜ ì˜ì¡´ì„± ì£¼ì…ì„ ìœ„í•´ì„œëŠ” í¬ê²Œ 3ê°€ì§€ ì–´ë…¸í…Œì´ì…˜ì´ ì‚¬ìš©ëœë‹¤.

- `@Mock`: **ê°€ì§œ ê°ì²´ë¥¼ ë§Œë“¤ì–´ ë°˜í™˜**í•´ì£¼ëŠ” ì–´ë…¸í…Œì´ì…˜
- `@Spy`: **Stubí•˜ì§€ ì•Šì€ ë©”ì†Œë“œë“¤ì€ ì›ë³¸ ë©”ì†Œë“œ ê·¸ëŒ€ë¡œ ì‚¬ìš©**í•˜ëŠ” ì–´ë…¸í…Œì´ì…˜
- `@InjectMocks`: @Mock ë˜ëŠ” @Spyë¡œ ìƒì„±ëœ **ê°€ì§œ ê°ì²´ë¥¼ ìë™ìœ¼ë¡œ ì£¼ì…**ì‹œì¼œì£¼ëŠ” ì–´ë…¸í…Œì´ì…˜

ì˜ˆë¥¼ ë“¤ì–´ UserControllerì— ëŒ€í•œ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•˜ê³ ì í•  ë•Œ, UserServiceë¥¼ ì‚¬ìš©í•˜ê³  ìˆë‹¤ë©´ @Mock ì–´ë…¸í…Œì´ì…˜ì„ í†µí•´ ê°€ì§œ UserServiceë¥¼ ë§Œë“¤ê³ , @InjectMocksë¥¼ í†µí•´ UserControllerì— ì´ë¥¼ ì£¼ì…ì‹œí‚¬ ìˆ˜ ìˆë‹¤.

2. Stubë¡œ ê²°ê³¼ ì²˜ë¦¬
ì˜ì¡´ì„±ì´ ìˆëŠ” ê°ì²´ëŠ”Â **ê°€ì§œ ê°ì²´ë¥¼ ì£¼ì…í•˜ì—¬ ì–´ë–¤ ê²°ê³¼ë¥¼ ë°˜í™˜í•˜ë¼ê³  ì •í•´ì§„ ë‹µë³€ì„ ì¤€ë¹„**ì‹œì¼œì•¼ í•œë‹¤. Mockitoì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì€ stub ë©”ì†Œë“œë¥¼ ì œê³µí•œë‹¤.

- `doReturn()`: ê°€ì§œ ê°ì²´ê°€ **íŠ¹ì •í•œ ê°’ì„ ë°˜í™˜**í•´ì•¼ í•˜ëŠ” ê²½ìš°
- `doNothing()`: ê°€ì§œ ê°ì²´ê°€ ì•„ë¬´ ê²ƒë„ ë°˜í™˜í•˜ì§€ ì•ŠëŠ” ê²½ìš°(**void**)
- `doThrow()`: ê°€ì§œ ê°ì²´ê°€ **ì˜ˆì™¸**ë¥¼ ë°œìƒì‹œí‚¤ëŠ” ê²½ìš°

3. Mockitoì™€ Junitì˜ ê²°í•©
@ExtendWith(MockitoExtension.class)ë¥¼ ì‚¬ìš©í•´ì•¼ ê²°í•©ì´ ê°€ëŠ¥í•˜ë‹¤.


#### ğŸ“ŒSpring ì»¨íŠ¸ë¡¤ëŸ¬Â ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„± ì˜ˆì‹œ
ì½”ë“œ) UserController ë¡œì§ ì‘ì„±
```java
@RestController  
@RequiredArgsConstructor  
public class UserController {  
  
    private final UserService userService;  
  
    @PostMapping("/users/signUp")  
    public ResponseEntity<UserResponse> signUp(@RequestBody SignUpRequest request) {  
        return ResponseEntity.status(HttpStatus.CREATED)  
                .body(userService.signUp(request));  
    }  
  
    @GetMapping("/users")  
    public ResponseEntity<List<UserResponse>> findAll() {  
        return ResponseEntity.ok(userService.findAll());  
    }  
}
```

ì½”ë“œ) í…ŒìŠ¤íŠ¸ ì½”ë“œ í°í‹€
```java
@ExtendWith(MockitoExtension.class)  
class UserControllerTest {  
  
    @InjectMocks  
    private UserController userController;  
  
    @Mock  
    private UserService userService;  
  
    private MockMvc mockMvc;  

	//ì´ ë¶€ë¶„ì´ ë‚˜ì¤‘ì— @WebMVcTest(UserController.class)ë¡œ ëŒ€ì²´
    @BeforeEach  
    public void init() {  
        mockMvc = MockMvcBuilders.standaloneSetup(userController).build();  
    }  
}
```

ì½”ë“œ)
```java
@WebMVcTest(UserController.class) 
class UserControllerTest { Â  Â 
	@MockBean Â private UserService userService; 
	@Autowired Â private MockMvc mockMvc; // í…ŒìŠ¤íŠ¸ ì‘ì„± 
}
```


í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ëª©ë¡
1.  íšŒì›ê°€ì… ì„±ê³µ
2.  ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ

ì½”ë“œ) íšŒì›ê°€ì… ì„±ê³µ
```java
@DisplayName("íšŒì› ê°€ì… ì„±ê³µ")  
@Test  
void signUpSuccess() throws Exception {  
    // given  
    SignUpRequest request = signUpRequest();  
    UserResponse response = userResponse();  
  
    doReturn(response).when(userService).signUp(any(SignUpRequest.class));  
  
    // when  
    ResultActions resultActions = mockMvc.perform(  
    MockMvcRequestBuilders.post("/users/signUp")  
			    .contentType(MediaType.APPLICATION_JSON)  
			    .content(new Gson().toJson(request)));  
  
    // then  
    MvcResult mvcResult = resultActions.andExpect(status().isOk())  
						    .andExpect(jsonPath("email", response.getEmail()).exists())  
						    .andExpect(jsonPath("pw", response.getPw()).exists())  
						    .andExpect(jsonPath("role", response.getRole()).exists())  
}
  
private SignUpRequest signUpRequest() {  
	return SignUpRequest.builder()  
	.email("test@test.test")  
	.pw("test")  
	.build();  
}  
  
private UserResponse userResponse() {  
	return UserResponse.builder()  
	.email("test@test.test")  
	.pw("test")  
	.role(UserRole.ROLE_USER)  
	.build();  
}
```

ì½”ë“œ) ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ 
```java
@DisplayName("ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ")  
@Test  
void getUserList() throws Exception {  
    // given  
    doReturn(userList()).when(userService).findAll();  
  
    // when  
    ResultActions resultActions = mockMvc.perform(MockMvcRequestBuilders.get("/user/list"));  
  
    // then  
    MvcResult mvcResult = resultActions.andExpect(status().isOk()).andReturn();  
  
    UserListResponseDTO response = new Gson()
		    .fromJson(mvcResult.getResponse().getContentAsString(), UserListResponseDTO.class);  
			    
    assertThat(response.getUserList().size()).isEqualTo(5);  
}  
  
private List<UserResponse> userList() {  
    List<UserResponse> userList = new ArrayList<>();  
      
    for (int i = 0; i < 5; i++) {  
        userList.add(new UserResponse("test@test.test", "test", UserRole.ROLE_USER));  
    }  
    return userList;  
}
```


## ì„œë¹„ìŠ¤ ê³„ì¸µ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
ì½”ë“œ) UserServiceImpl ë¹„ì¦ˆë‹ˆìŠ¤ë¡œì§
```java
@Service  
@RequiredArgsConstructor  
@Transactional(readOnly = true)  
public class UserServiceImpl {  
  
    private final UserRepository userRepository;  
    private final BCryptPasswordEncoder passwordEncoder;  
  
    @Transactional  
    public UserResponse signUp(final SignUpRequest request) {  
        final User user = User.builder()  
                .email(request.getEmail())  
                .pw(passwordEncoder.encode(request.getPw()))  
                .role(UserRole.ROLE_USER)  
                .build();  
  
        return UserResponse.of(userRepository.save(user));  
    }  
  
    public List<User> findAll() {  
        return userRepository.findAll().stream()  
                .map(UserResponse::of)  
                .collect(Collectors.toList()));  
    }  
}
```
