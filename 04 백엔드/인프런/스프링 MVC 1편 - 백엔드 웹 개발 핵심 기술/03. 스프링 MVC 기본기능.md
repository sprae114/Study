# ë¡œê¹…
#### ğŸ“Œ ë¡œê¹…ì„ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ”?
ì§ì ‘ í™•ì¸í•˜ë©´ì„œ, ì½”ë“œë¥¼ ë³´ê¸°ì—ëŠ” ì‹œê°„ì´ ë„ˆë¬´ ë§ì´ ê±¸ë¦¼. ê·¸ë˜ì„œ ìš´ì˜ì—ì„œëŠ” System.out.println ëŒ€ì‹  ë³„ë„ì˜ ë¡œê¹… ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•œë‹¤.


#### ğŸ“Œ ë¡œê¹… ì‚¬ìš©ì‹œ ì¥ì 
1) ì“°ë ˆë“œ ì •ë³´, í´ë˜ìŠ¤ ì´ë¦„ ê°™ì€ ë¶€ê°€ ì •ë³´ë¥¼ í•¨ê»˜ ë³¼ ìˆ˜ ìˆê³ , ì¶œë ¥ ëª¨ì–‘ì„ ì¡°ì •í•  ìˆ˜ ìˆë‹¤.
2) ë¡œê·¸ë¥¼ ìƒí™©ì— ë§ê²Œ ì¡°ì ˆí•  ìˆ˜ ìˆë‹¤. (ëª¨ë“  ë¡œê·¸ë¥¼ ì¶œë ¥í•˜ê³ , ìš´ì˜ì„œë²„ì—ì„œëŠ” ì¶œë ¥í•˜ì§€ ì•ŠëŠ” ë“±...)
3) ì½˜ì†”ì—ë§Œ ì¶œë ¥í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, íŒŒì¼ì´ë‚˜ ë„¤íŠ¸ì›Œí¬ ë“±, ë¡œê·¸ë¥¼ ë³„ë„ì˜ ìœ„ì¹˜ì— ë‚¨ê¸¸ ìˆ˜ ìˆë‹¤.

#### ğŸ“Œ ë¡œê¹…ì€ ì–¸ì œ ì–´ë–»ê²Œ ì‚¬ìš©í•´ì•¼ ë ê¹Œ?
- ìŠ¤í”„ë§ ë¶€íŠ¸ ë¡œê¹… ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬
slf4j : logback, log4j ë“± ë‹¤ì–‘í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í†µí•©í•´ ì¸í„°í˜ì´ìŠ¤ë¡œ ì œê³µí•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬
logback : ì‹¤ì œ ë¡œê¹… êµ¬í˜„ì²´

- LEVEL: TRACE > DEBUG > INFO > WARN > ERRORì´ê³ , ê¸°ë³¸ê°’ì€ info
![[Pasted image 20221221003505.png]]


#### ğŸ“Œ <ì½”ë“œ> ë¡œê¹… ì‚¬ìš© ì˜ˆì‹œ
```java
//@Slf4j
@RestController
public class LogTestController {
    private final Logger log = LoggerFactory.getLogger(getClass());

    @RequestMapping("/log-test")
    public String logTest() {
        String name = "Spring";

        System.out.println("name = " + name);

        log.trace("trace log={}", name);
        log.debug("debug log={}", name);
        log.info("info log={}", name);
        log.warn("warn log={}", name);
        log.error("error log = {}", name);

        return "ok";
    }
}
```

- ì¶œë ¥
![[Pasted image 20221220181935.png]]


#### ğŸ› ë¡œê¹… ë ˆë²¨ë³„ íŒŒì¼ë¡œ ì €ì¥í•˜ëŠ” ê²½ìš°
ì¶œì²˜ : [[10ë¶„ í…Œì½”í†¡] â˜‚ï¸ ê²€í”„ì˜ Logging(ë¡œê¹…) #2 - YouTube](https://www.youtube.com/watch?v=JqZzy7RyudI)

# HTTP ìš”ì²­ - ê¸°ë³¸, í—¤ë” ì¡°íšŒ

#### ğŸ“ŒHTTP í—¤ë” ì •ë³´ë¥¼ ì¡°íšŒ
```java
@Slf4j  
@RestController  
public class RequestHeaderController {  
  
    @RequestMapping("/headers")  
    public String headers(HttpServletRequest request,  
                          HttpServletRequest response,  
                          HttpMethod httpMethod,  
                          Locale locale,  
                          @RequestHeader MultiValueMap<String, String> headerMap,  
                          @RequestHeader("host") String host,  
                          @CookieValue(value = "myCookie", required = false) String cookie  
                          ) {  
  
        log.info("request={}", request);  
        log.info("response={}", response);  
        log.info("httpMethod={}", httpMethod);  
        log.info("locale={}", locale);  
        log.info("headerMap={}", headerMap);  
        log.info("header host={}", host);  
        log.info("myCookie={}", cookie);  
        return "ok";  
    }  
}
```

- ì¶œë ¥
![[Pasted image 20221221115002.png]]

- `request, response `ê°ì²´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
- HTTP method ì¡°íšŒ ê°€ëŠ¥í•˜ë‹¤.
- Locale ì •ë³´ë¥¼ ì¡°íšŒí•˜ì—¬ ì–¸ì–´ë¥¼ í™•ì¸í• ìˆ˜ ìˆë‹¤.
- MultiValueMapì€ ëª¨ë“  HTTPí—¤ë”ë¥¼ MultiValueMap í˜•ì‹ìœ¼ë¡œ ì¡°íšŒí•œë‹¤.
- `@RequestHeader("host") String host `=> íŠ¹ì • í—¤ë”ë¥¼ ì¡°íšŒí•œë‹¤. ì†ì„±ìœ¼ë¡œëŠ” ê°’ì˜ í•„ìˆ˜ì—¬ë¶€, ê¸°ë³¸ê°’ ë“±ì´ ìˆë‹¤.
- `@CookieValue`ë¡œ ì¿ í‚¤ë¥¼ ì¡°íšŒí• ìˆ˜ ìˆë‹¤.


# GET ë§¤í•‘
## 1. ë§¤ì»¤ë‹ˆì¦˜
#### ğŸ“Œ Get ìš”ì²­ ê·¸ë¦¼ìœ¼ë¡œ íŒŒì•…í•˜ê¸°
![[Untitled.png]]

---

#### ğŸ“Œ ê¸€ë¡œ ì‘ì„±

- ê¸€ë¡œ ì½”ë”©í•˜ê¸°
    1. Getìš”ì²­í•˜ê¸°
    2. Controllerì—ì„œ Get ìš”ì²­ ë°›ê¸°
    3. Modelê³¼ í•¨ê»˜ viewë¡œ ë³´ë‚´ê¸°
    4. viewëŠ” htmlì—ì„œ ë°ì´í„°ë¥¼ Modelë¡œ ë§¤í•‘ì‹œì¼œ ì‘ë‹µí•˜ê¸°


## 2. Request ìš”ì²­ ë°©ë²•

#### ğŸ“Œ 1) URLë¡œ ìš”ì²­í•˜ê¸°

- URL ì…ë ¥ :   `http://localhost:8080/form`

---

#### ğŸ“Œ 2) Htmlë¡œ URLìš”ì²­í•˜ê¸°

1. ë§í¬ë¡œ ìš”ì²­í•˜ëŠ” ë°©ë²•
ì¶œì²˜ : [ì½”ë”©ì˜ ì‹œì‘, TCP School](http://www.tcpschool.com/html-tag-attrs/a-href)
```html
<td><a href="items.html" th:href="@{|/basic/items|}"th:text="${item.itemName}">ìƒí’ˆëª…</a></td>
```


2. ë²„íŠ¼ìœ¼ë¡œ ìš”ì²­í•˜ëŠ” ë°©ë²•
```html
<button class="btn btn-primary float-end"
	onclick="location.href='items.html'"
	th:onclick="|location.href='@{/basic/items}'|"
	type="button">ìƒí’ˆ ë“±ë¡</button>
```
![[Pasted image 20221221171900.png]]

## 3. Controller
#### ğŸ“Œê¸°ë³¸ URL í˜¸ì¶œ
```java
@GetMapping("/home")  
public String newForm() {return "home";}
```


#### ğŸ“Œë‹¤ì¤‘ URL í˜¸ì¶œ
```java
@GetMapping({"/home-stay", "/home-go"})  
public String helloBasic() {return "home";}
```


#### ğŸ“Œê¸°ë³¸í˜•ì„ ìš”ì²­ íŒŒë¼ë¯¸í„°ë¡œ ì…ë ¥
String, int, Longì„ ìš”ì²­ íŒŒë¼ë¯¸í„°ë¡œ ë°›ì„ ë•Œ ì‚¬ìš©í•¨.
- ê¸°ë³¸ ì„¤ì •  
`localhost:8082/request-param-basic?username=kang&age=30` ìœ¼ë¡œ ìš”ì²­
```java
@ResponseBody  
@GetMapping("/request-param-basic")  
public String requestParamBasic(@RequestParam String username, @RequestParam int age) {  
    log.info("username={}, age={}", username, age);  
    return "requestParamV3";  
}
```


#### ğŸ“Œê¸°ë³¸í˜•ì„ Mapìœ¼ë¡œ ìš”ì²­ íŒŒë¼ë¯¸í„°ë¡œ ì…ë ¥
ì¶œì²˜ : [ìŠ¤í”„ë§ controllerì—ì„œ íŒŒë¼ë¯¸í„°ë¥¼ ë°›ëŠ” ë‹¤ì–‘í•œ ë°©ë²•](https://velog.io/@shson/%EC%8A%A4%ED%94%84%EB%A7%81-controller%EC%97%90%EC%84%9C-%ED%8C%8C%EB%9D%BC%EB%AF%B8%ED%84%B0%EB%A5%BC-%EB%B0%9B%EB%8A%94-%EB%8B%A4%EC%96%91%ED%95%9C-%EB%B0%A9%EB%B2%95-RequestParam-RequestBody-PathVariable#4-map-%ED%99%9C%EC%9A%A9)

JSON ë°ì´í„°ë¥¼ ë°›ëŠ”ë° ë°ì´í„°ë§ˆë‹¤ DTOë¥¼ ë§Œë“¤ê¸°ë„ ê·€ì°®ê³  DTOë¥¼ ë§Œë“¤ë§Œí¼ ë³µì¡í•˜ì§€ ì•Šê³  ë‹¨ìˆœíˆ stringìœ¼ë¡œ key:valueí˜•íƒœë¼ë©´ êµ³ì´ DTOë¥¼ ë§Œë“¤ì§€ ì•Šê³  MAPìœ¼ë¡œ ê°„ë‹¨íˆ ë°›ì„ ìˆ˜ ìˆë‹¤.
```java
//íŒŒë¼ë¯¸í„°ë¥¼ Mapìœ¼ë¡œ ì¡°íšŒ
@ResponseBody  
@GetMapping("/request-param-map")  
public String requestParamMap(@RequestParam Map<String, Object> paramMap) {  
    log.info("username={}, age={}, gender={}", paramMap.get("username"), paramMap.get("age"), paramMap.get("gender"));  
    return "requestParamMap";  
}
```

- ì¶œë ¥
```
http://localhost:8086/request-param-map?username=kang&age=29&gender=man ìš”ì²­í•˜ë©´
username=kang, age=29, gender=man


http://localhost:8086/request-param-map?username=kang&age=29 ìš”ì²­í•˜ë©´
username=kang, age=29, gender=null
```

- ì–´ë–»ê²Œ key=valueí˜•íƒœë¼ëŠ” ê±¸ê¹Œ?
![[Pasted image 20221222154227.png]]
=> URLì„ ë³´ë©´ key : valueë¡œ ìŒì„ ì´ë£¨ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŒ.


#### ğŸ“Œì…ë ¥ê°’í•˜ê³  ì €ì¥ë˜ëŠ” ë³€ìˆ˜ê°€ ë‹¤ë¥¸ ìš”ì²­ íŒŒë¼ë¯¸í„°ë¡œ ì…ë ¥
`username` ë¥¼ `memberName`ë¡œ, `age`ë¥¼ `memberAge`ë¡œ ë“¤ì–´ì˜¨ ê°’ì„ ê°ê° ì €ì¥í•¨.
```java
@ResponseBody  
@GetMapping("/request-param-variable")  
public String requestParamVariable(@RequestParam("username") String memberName, @RequestParam("age") int memberAge) {  
    log.info("username={}, age={}", memberName, memberAge);  
    return "requestParamAnotherVariable";  
}
```


#### ğŸ“Œì…ë ¥ ìœ /ë¬´, ê¸°ë³¸ê°’ì„ ì„¤ì •í•˜ëŠ” ìš”ì²­ íŒŒë¼ë¯¸í„°ë¡œ ì…ë ¥
- ê¸°íƒ€ ì„¤ì •(requiredëŠ” í•„ìˆ˜ ê°’, defaultValueëŠ” ê¸°ë³¸ ê°’)
```java
@GetMapping("/request-param-default")  
public String requestParamDefault(  
        @RequestParam(required = true, defaultValue = "guest") String username,  
        @RequestParam(required = false, defaultValue = "-1") int age) {  
    log.info("username={}, age={}", username, age);  
    return "ok";  
}
//ì¶œë ¥ username=guest, age=-1
```
=>required,ëŠ” í•„ìˆ˜ ê°’, defaultValueëŠ” ê¸°ë³¸ ê°’
	- requiredëŠ” íŒŒë¼ë¯¸í„°ê°€ trueë©´ ìš”ì²­ íŒŒë¼ë¯¸í„°ì— ê¼­ ìˆì–´í•˜ëŠ” ê²ƒ, falseë©´ ìš”ì²­ íŒŒë¼ë¯¸í„°ì— ì—†ì–´ë„ ë˜ëŠ” ê²ƒ
	- defaultValueëŠ” ê°’ì„ ì…ë ¥í•˜ì§€ ì•Šì„ ë•Œ, ê¸°ë³¸ ê°’ ì§€ì •í•¨.

---

#### ğŸ“Œ URI ê²½ë¡œì— ë”°ë¼ ë³€ê²½ë˜ëŠ” ìš”ì²­ íŒŒë¼ë¯¸í„°ë¡œ ì…ë ¥
- **ë‹¨ì¼PathVariable** ì‚¬ìš©
ìš”ì²­ ë§¤í•‘ : `http://localhost:8080/mapping/kang`
```java
@ResponseBody  
@GetMapping("/mappings/{data}")  
public String mappingPath(@PathVariable String data) {  
    log.info("mappingPath userId={}", data);  
    return "ok" + data;  
}
```


#### ğŸ“Œ ë‹¤ì¤‘ URI ê²½ë¡œì— ë”°ë¼ ë³€ê²½ë˜ëŠ” ìš”ì²­ íŒŒë¼ë¯¸í„°ë¡œ ì…ë ¥
- **ë‹¤ì¤‘ PathVariable** ì‚¬ìš©
ìš”ì²­ ë§¤í•‘ : `http://localhost:8080/mapping/kang/2`
```java
@ResponseBody  
@GetMapping("/mappings/{data}/{id}")  
public String mappingPath3(@PathVariable String data, @PathVariable("id") int num) {  
    log.info("mappingPath userId={} {}", data, num);  
    return "ok";  
}
```


#### ğŸ“Œ ì…ë ¥ X, viewì— ê°’ ë„˜ê²¨ì£¼ê¸°
- **Modelì— ê°ì²´/ë¦¬ìŠ¤íŠ¸/í•´ì‹œ ë„£ê¸°**
```java
@GetMapping("/variable")
public String variable(Model model) {
	User userA = new User("userA", 10);
	User userB = new User("userB", 20);

	List<User> list = new ArrayList<>();
	list.add(userA);
	list.add(userB);

	Map<String, User> map = new HashMap<>();
	map.put("userA", userA);
	map.put("userB", userB);

	model.addAttribute("user", userA);
	model.addAttribute("users", list);
	model.addAttribute("userMap", map);

	return "basic/variable";
}
```

Html(basic/variable.html)
```html
<!-- /ìƒëµ -->
<h1>SpringEL í‘œí˜„ì‹</h1>
<ul>Object
	<li>${user.username} =    <span th:text="${user.username}"></span></li>
	<li>${user['username']} = <span th:text="${user['username']}"></span></li>
	<li>${user.getUsername()} = <span th:text="${user.getUsername()}"></span></li>
</ul>
<ul>List
	<li>${users[0].username}    = <span th:text="${users[0].username}"></span></li>
	<li>${users[0]['username']} = <span th:text="${users[0]['username']}"></span></li>
	<li>${users[0].getUsername()} = <span th:text="${users[0].getUsername()}"></span></li>
</ul>
<ul>Map
	<li>${userMap['userA'].username} =  <span th:text="${userMap['userA'].username}"></span></li>
	<li>${userMap['userA']['username']} = <span th:text="${userMap['userA']['username']}"></span></li>
	<li>${userMap['userA'].getUsername()} = <span th:text="${userMap['userA'].getUsername()}"></span></li>

</ul>
<!-- /ìƒëµ -->
```


#### ğŸ“Œ ê¸°ë³¸í˜• ìš”ì²­ íŒŒë¼ë¯¸í„°ë¡œ viewì— ê°’ ë„˜ê²¨ì£¼ê¸°
```java
@GetMapping("/variable-input")  
public String variableInput(@RequestParam String username,  
                            @RequestParam int age,  
                            Model model) {  
    User userA = new User(username, age);  
    User userB = new User("userB", 20);  
  
    List<User> list = new ArrayList<>();  
    list.add(userA);  
    list.add(userB);  
  
    Map<String, User> map = new HashMap<>();  
    map.put("userA", userA);  
    map.put("userB", userB);  
  
    model.addAttribute("user", userA);  
    model.addAttribute("users", list);  
    model.addAttribute("userMap", map);  
  
    log.info("User username={}, age={}", userA.getUsername(), userA.getAge());  
    log.info("User username={}, age={}", userB.getUsername(), userB.getAge());  
  
    return "basic/variable";  
}
```


#### ğŸ“Œ ê°ì²´í˜• ìš”ì²­ íŒŒë¼ë¯¸í„°ë¡œ viewì— ê°’ ë„˜ê²¨ì£¼ê¸°
```java
@GetMapping("/variable-object")  
public String variableObject(@ModelAttribute User user,  
                             Model model) {  
  
    User userB = new User("userC", 20);  
  
    List<User> list = new ArrayList<>();  
    list.add(user);  
    list.add(userB);  
  
    Map<String, User> map = new HashMap<>();  
    map.put("userA", user);  
    map.put("userB", userB);  
  
    model.addAttribute("user", user);  
    model.addAttribute("users", list);  
    model.addAttribute("userMap", map);  
  
    log.info("User username={}, age={}", user.getUsername(), user.getAge());  
    log.info("User username={}, age={}", userB.getUsername(), userB.getAge());  
  
    log.info("User username={}, age={}", user.getUsername(), user.getAge());  
    return "basic/variable";  
}
```


## 5. View

#### ğŸ“Œ 1) view ë°˜í™˜
resourcesì— ìˆëŠ” htmlì˜ ì´ë¦„ì´ ë§¤ì¹­í•˜ì—¬ viewë¥¼ ì°¾ê³  ëœë”ë§í•¨.

```java
@GetMapping("/home")  
public String goHome() {return "home";}
```

---

#### ğŸ“Œ 2) json ë°˜í™˜
viewë¥¼ ì°¾ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, Http ë©”ì‹œì§€ ë°”ë””ì— ë°”ë¡œ ì…ë ¥í•¨.

```java
@ResponseBody  
@RequestMapping("/newHello-go")  
public String newGoHome() {return "newHello-go";}
```


# Post ë§¤í•‘

## 1. ë§¤ì»¤ë‹ˆì¦˜
#### ğŸ“Œ Post ìš”ì²­ ê·¸ë¦¼ìœ¼ë¡œ íŒŒì•…í•˜ê¸°
	![[Untitled 3.png]]
---

#### ğŸ“Œ ê¸€ë¡œ ì½”ë”©í•˜ê¸°

- ê¸€ë¡œ ì½”ë”©í•˜ê¸°
    1. Postìš”ì²­í•˜ê¸°
    2. Controllerì—ì„œ Post ìš”ì²­ ë°›ê¸°
    3. Modelê³¼ í•¨ê»˜ viewë¡œ ë³´ë‚´ê¸°
    4. viewëŠ” htmlì—ì„œ ë°ì´í„°ë¥¼ Modelë¡œ ë§¤í•‘ì‹œì¼œ ì‘ë‹µí•˜ê¸°


## 2. Request ìš”ì²­ ë°©ë²•

#### ğŸ“Œ 1) Bodyë¡œ ìš”ì²­í•˜ê¸°

- ë°”ë””ì— ì§ì ‘ ì…ë ¥
  ![[Untitled 2.png]]

---

#### ğŸ“Œ 2) Htmlë¡œ ìš”ì²­í•˜ê¸°

- inputë²„íŠ¼ìœ¼ë¡œ ìš”ì²­í•˜ëŠ” ë°©ë²•
ì¶œì²˜ : [ì½”ë”©ì˜ ì‹œì‘, TCP School](http://www.tcpschool.com/html-tag-attrs/form-action), [HTML DOM Form Object (w3schools.com)](https://www.w3schools.com/jsref/dom_obj_form.asp)
```html
<!-- ìƒëµ -->
<form action="/request-param-v1" method="post">
		username: <input type="text" name="username" />
		age: <input type="text" name="age" />
		<button type="submit">ì „ì†¡</button>
</form>
<!-- ìƒëµ -->
```
    
- ì–´ë–»ê²Œ ì „ì†¡ë˜ëŠ” ê±°ì§€?
ì¶œì²˜ : [th:action, th:onclick ì°¨ì´ - ì¸í”„ëŸ° | ì§ˆë¬¸ & ë‹µë³€ (inflearn.com)](https://www.inflearn.com/questions/522237/th-action-th-onclick-%EC%B0%A8%EC%9D%B4)
	onclick -> Â í´ë¦­ ì‹œ ë°œìƒí•  ë©”ì„œë“œ(ì´ë²¤íŠ¸)ë¥¼ ì§€ì •
    action â†’ `<form>`íƒœê·¸ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì†ì„±ìœ¼ë¡œÂ ì„œì‹ ë°ì´í„°(form data)ë¥¼ ì„œë²„ë¡œ ë³´ë‚¼ ë•Œ í•´ë‹¹ ë°ì´í„°ê°€ ë„ì°©í•  URLì„ ì§€ì •
    method â†’ ë™ì‘ ë©”ì†Œë“œ ì•Œë ¤ì¤Œ
    submit â†’ ë²„íŠ¼ì„ í†µí•´ post ë°©ì‹ìœ¼ë¡œ th:action ìš”ì²­í•¨.

---

#### ğŸ“Œ 3) Jsonë¡œ ìš”ì²­í•˜ê¸°

- Postmanìœ¼ë¡œ Json ìš”ì²­
    ![[Untitled 1.png]]


## 3. Controllerì—ì„œ Post

#### ğŸ“Œ 1) Post - @RequestParam
String, int, Longì„ ìš”ì²­ íŒŒë¼ë¯¸í„°ë¡œ ë°›ì„ ë•Œ ì‚¬ìš©í•¨.

- ê¸°ë³¸ ì„¤ì •
```java
@ResponseBody
@PostMapping("/request-param-v3")
public String requestParamV3(
		@RequestParam String username,
		@RequestParam int age) {

	return "ok";
}
```



- ê¸°ë³¸ê°’ ì„¤ì •í•˜ê¸°
```java
@ResponseBody
@PostMapping("/request-param-default")
public String requestParamDefault(
		@RequestParam(required = true, defaultValue = "guest") String username,
		@RequestParam(required = false, defaultValue = "-1") int age) {

	return "ok";
}
```
    
- required,ëŠ” í•„ìˆ˜ ê°’, defaultValueëŠ” ê¸°ë³¸ ê°’
	requiredëŠ” íŒŒë¼ë¯¸í„°ê°€ trueë©´ ìš”ì²­ íŒŒë¼ë¯¸í„°ì— ê¼­ ìˆì–´í•˜ëŠ” ê²ƒ, falseë©´ ìš”ì²­ íŒŒë¼ë¯¸í„°ì— ì—†ì–´ë„ ë˜ëŠ” ê²ƒ
	defaultValueëŠ” ê°’ì„ ì…ë ¥í•˜ì§€ ì•Šì„ ë•Œ, ê¸°ë³¸ ê°’ ì§€ì •í•¨.

---
#### ğŸ“Œ 2) Post - @PathVariable
URI ê²½ë¡œì— íŒŒë¼ë¯¸í„°ì˜ ë”°ë¼ ë³€ê²½í•˜ê³  ì‹¶ì„ ë•Œ

- **ë‹¨ì¼PathVariable** ì‚¬ìš©
ìš”ì²­ ë§¤í•‘ : `http://localhost:8080/mapping/kang`

Controller
```java
@ResponseBody
@PostMapping("/mapping/{data}")
public String mappingPath(@PathVariable String data) {
	log.info("mappingPath userId={}", data);
	return "ok" + data;
}
```
    

- **ë‹¤ì¤‘ PathVariable** ì‚¬ìš©
ìš”ì²­ ë§¤í•‘ :  `http://localhost:8080/mapping/kang/2`

Controller
```java
@ResponseBody
@PostMapping("/mapping/{data}/{num}")
public String mappingPath(@PathVariable String data, @PathVariable int num) {
	log.info("mappingPath userId={} {}", data, num);
	return "ok";
}
```
    

---

#### ğŸ“Œ 3) Post - @RequestBody
ì¶œì²˜ : https://mangkyu.tistory.com/72
-   Json(application/json) í˜•íƒœì˜ HTTP BodyÂ ë°ì´í„°ë¥¼ MessageConverterë¥¼ í†µí•´ Java ê°ì²´ë¡œ ë³€í™˜ì‹œí‚´
-   ê¸°ë³¸ ìƒì„±ìë¡œ ê°ì²´ë¥¼ ë§Œë“¤ê³ , Getterë‚˜ Setter ë“±ì˜ ë©”ì†Œë“œë¡œ í•„ë“œë¥¼ ì°¾ì•„Â Reflectionìœ¼ë¡œ ê°’ì„ ì„¤ì •í•¨

- Controller
```java
@ResponseBody  
@PostMapping("/request-body-json-v5")  
public String requestBodyJsonV5(@RequestBody User user) {  
    log.info("username={}, age={}", user.getUsername(), user.getAge());  
    return user.toString();  
}
```


## 4. Model

Modelì„ ë„˜ê²¨ì¤€ë‹¤ëŠ” ì˜ë¯¸ëŠ” DBì—ì„œ ë°ì´í„°ë¥¼ ë°›ì•„ Viewë¡œ ëœë”ë§í•¨.

#### ğŸ“Œ 1) Model
```java
@PostMapping("/add")
public String addItemV1(@RequestParam String itemName, @RequestParam int price, 
						@RequestParam Integer quantity, Model model) {

    Item item = new Item();
    item.setItemName(itemName);
    item.setPrice(price);
    item.setQuantity(quantity);

    itemRepository.save(item);
    model.addAttribute("item", item);

    return "basic/item";
}
```

---

#### ğŸ“Œ 2) @ModelAttribute

1)ê³¼ ê°™ì€ ì˜ë¯¸ì§€ë§Œ ì…ë ¥ì—ì„œ ê°ì²´ë¥¼ ë°›ì„ìˆ˜ ìˆê²Œí•¨.
```java
@PostMapping("/add")
public String addItemV2(@ModelAttribute("item") Item item) {
    itemRepository.save(item); 
    return "basic/item";
}
```

- @ModelAttributeì˜ ì—­í• 
    1. íŒŒë¼ë¯¸í„°ë¥¼ ìš”ì²­ ë°›ê¸°   ex) `@RequestParam String itemName`
    2. ê°ì²´ ìƒì„±í•˜ê¸°   ex) `Item item = new Item();`
    3. ê°ì²´ì— íŒŒë¼ë¯¸í„° ë„£ê¸° ex) `item.setItemName(itemName);`
    4. modelì— ë„£ì–´ì„œ viewì— ë„˜ê²¨ì£¼ê¸° ex) `model.addAttribute("item", item);`

---

#### ğŸ“Œ 3) HttpEntity`<String>`

- **HTTP ë©”ì‹œì§€ ë°”ë””**ë¥¼ í†µí•´ì„œ ë°ì´í„°ê°€ ë„˜ì–´ì˜¬ë•Œ ì‚¬ìš©í•¨.
- **HttpEntity ë¥¼ ì‚¬ìš©í•˜ì—¬ header, bodyì˜ ì •ë³´ë¥¼ í¸ë¦¬í•˜ê²Œ ì¡°íšŒ**
- HttpEntity , @RequestBody ë¥¼ ì‚¬ìš©í•˜ë©´Â HTTP ë©”ì‹œì§€ ì»¨ë²„í„°ê°€ HTTP ë©”ì‹œì§€ ë°”ë””ì˜ ë‚´ìš©ì„ ìš°ë¦¬ê°€ ì›í•˜ëŠ”Â ë¬¸ìë‚˜ ê°ì²´ ë“±ìœ¼ë¡œ ë³€í™˜í•´ì¤Œ.
- HttpEntityëŠ” **ì‘ë‹µì—ë„ ì‚¬ìš© ê°€ëŠ¥ ë©”ì‹œì§€ ë°”ë”” ì •ë³´ ì§ì ‘ ë°˜í™˜.  view ì¡°íšŒX**

```java
@ResponseBody
@PostMapping("/request-body-string-v3")
public HttpEntity<String> requestBodyStringV3(HttpEntity<String> httpEntity) throws IOException {
    HttpHeaders headers = httpEntity.getHeaders();
    log.info("messageBody={}", headers);

    return new HttpEntity<>("ok");
}
```


#### ğŸ“Œ 4) @RequestBody

**HTTP ë©”ì‹œì§€ ë°”ë””**ë¥¼ í†µí•´ì„œ ë°ì´í„°ê°€ ë„˜ì–´ì˜¬ ë•ŒëŠ” ê¸°ì¡´ì˜ ë°©ì‹ì„ ì‚¬ìš©í•  ìˆ˜ê°€ ì—†ìŒ.
```java
@ResponseBody
@PostMapping("/request-body-string-v4")
public String requestBodyStringV4(@RequestBody String messageBody) {
    log.info("messageBody={}", messageBody);
    return "OK";
}
```

- @RequestBody
    HTTP ë©”ì‹œì§€ ë°”ë”” ì •ë³´ë¥¼ ì§ì ‘ í¸ë¦¬í•˜ê²Œ ì¡°íšŒí•¨.

---

## 5. View

#### ğŸ“Œ 1) redirect ë°˜í™˜

resourcesì— ìˆëŠ” htmlì˜ ì´ë¦„ì´ ë§¤ì¹­í•˜ì—¬ viewë¥¼ ì°¾ê³  ëœë”ë§í•¨. Post ë°©ì‹ì€ ë©±ë“±ì´ ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ìƒˆë¡œê³ ì¹¨í•˜ë©´ ê²°ê³¼ì— ì˜í–¥ì„ ì¤Œ. ë”°ë¼ì„œ redirectë¡œ ë°˜í™˜í•´ì•¼í•¨.

Controller
```java
@PostMapping("/new-form")
public String newForm() {return "new-form";}
```

---

#### ğŸ“Œ 2) json ë°˜í™˜

viewë¥¼ ì°¾ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, Http ë©”ì‹œì§€ ë°”ë””ì— ë°”ë¡œ ì…ë ¥í•¨.

- jsonìœ¼ë¡œ ì‘ë‹µí•˜ê¸°
```java
@RequestBody
@PostMapping("/hello-go")
public String helloBasic() {return "ok";}
```
- @RestController , @ResponseBody ì˜ ê³µí†µëœ ì—­í• ì€?
	- ë°˜í™˜ ê°’ìœ¼ë¡œ ë·°ë¥¼ ì°¾ëŠ”ê²ƒì´ ì•„ë‹ˆë¼, HTTP ë©”ì‹œì§€ ë°”ë””ì— ë°”ë¡œ ì…ë ¥í•˜ì—¬ ë³´ë‚¸ë‹¤.


- ResponseEntity<> ë¥¼ ì´ìš©í•œ ì‘ë‹µ
    HttpEntityëŠ” HTTP ë©”ì‹œì§€ì˜ í—¤ë”, ë°”ë”” ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆë‹¤
```java
@PostMapping("/response-body-string-v2")
public ResponseEntity<String> responseBodyV2() {
	return new ResponseEntity<>("ok", HttpStatus.OK);
}
```




![[Pasted image 20221223001255.png]]

