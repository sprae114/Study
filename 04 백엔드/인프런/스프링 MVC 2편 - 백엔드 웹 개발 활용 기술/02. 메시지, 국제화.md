ë§í¬ : [[ìŠ¤í”„ë§ mvc 2í¸.pdf]] (page. 78)
í•´ì‹œíƒœí¬ : #ë©”ì‹œì§€, #êµ­ì œí™”

----
#### âœ” ë©”ì‹œì§€ê°€ ì™œ í•„ìš”í•œê±°ì§€?  
â–¶ë¬¸ì œì 
=> ê¸°ì¡´ì—ëŠ” ìƒí’ˆëª…ì„ ìƒí’ˆì´ë¦„ìœ¼ë¡œ ê³ ì³ë‹¬ë¼ê³  í•˜ëŠ” ê²½ìš° **ì¼ì¼ì´ ì°¾ì•„ê°€ë©° ë°”ê¿”ì•¼í•¨**.  ì´ë¡œ ì¸í•´ ë‹¨ìˆœ ë°˜ë³µ, ì‹¤ìˆ˜ ê°€ëŠ¥ì„±ì´ ë§ì•„ì ¸ ê³ ì¹˜ê¸° í˜ë“¦. 

â–¶í•´ê²°ì±…
=> ë‹¤ì–‘í•œ ë©”ì‹œì§€ë¥¼ **í•œê³³ì— ê´€ë¦¬(messages.properties)** í•œë‹¤. ê·¸ë¡œì¸í•´ ë©”ì‹œì§€ ê´€ë¦¬ë¥¼ ì¤‘ì•™ ì§‘ì¤‘í™”í•˜ì—¬ ì‰½ê²Œ ìœ ì§€ ê´€ë¦¬í•˜ê³  ì—…ë°ì´íŠ¸í•  ìˆ˜ë„ ìˆìŒ.


#### ğŸ“Œ ë©”ì‹œì§€ ì„¤ì •í•˜ëŠ” ë°©ë²•ì€?
- application.properties ì— ì„¤ì •í•˜ê¸°
```
//ë©”ì‹œì§€ íŒŒì¼ ì´ë¦„ ë“±ë¡í•˜ê¸°
spring.messages.basename=messages
```
=> ì›ë˜ëŠ” MessageSourceë¥¼ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ë©´ ë˜ëŠ”ë°, ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ **MessageSourceë¥¼ ìë™ìœ¼ë¡œ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡**í•´ ë©”ì‹œì§€ ê¸°ëŠ¥ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œí•¨.

- ì €ì¥ì¥ì†Œ
![[Pasted image 20230120160335.png]]
=> messages.properties íŒŒì¼ì„ ë§Œë“¤ì–´ì„œ ë©”ì‹œì§€ ë„£ìœ¼ë©´ ëŒ.

#### ğŸ“Œ(ì½”ë“œ) ë©”ì‹œì§€ ì‚¬ìš©í•˜ëŠ” ë²•
- messages.properties
=>properties íŒŒì¼ ìƒì„±í•´ì•¼í•¨.
```
hello=ì•ˆë…•  
hello.name=ì•ˆë…• {0}  
label.item=ìƒí’ˆ  
label.item.id=ìƒí’ˆ 
IDlabel.item.itemName=ìƒí’ˆëª…  
label.item.price=ê°€ê²©  
label.item.quantity=ìˆ˜ëŸ‰  
  
page.items=ìƒí’ˆ ëª©ë¡  
page.item=ìƒí’ˆ ìƒì„¸  
page.addItem=ìƒí’ˆ ë“±ë¡  
page.updateItem=ìƒí’ˆ ìˆ˜ì •  
  
button.save=ì €ì¥  
button.cancel=ì·¨ì†Œ
```


#### ğŸ“Œ(ì½”ë“œ) ë©”ì‹œì§€ í…ŒìŠ¤íŠ¸í•˜ëŠ” ë°©ë²•ì€?
- MessageSource ì¸í„°í˜ì´ìŠ¤
![[Pasted image 20230120170522.png]]
=> MessageSourceì˜ `getMessage()`ë¥¼ ì´ìš©í•´ ë©”ì‹œì§€ ì½ì–´ì˜¤ê¸° ê¸°ëŠ¥ ì œê³µ
- code : ë©”ì‹œì§€ ì½”ë“œë¥¼ ì˜ë¯¸í•¨. í‚¤ê°’ì„ ë„£ì–´ì•¼í•¨ ex) "hello"  
- args : íŒŒë¼ë¯¸í„°ë¥¼ ì˜ë¯¸. hello .nameê³¼ ê°™ì€ ê²½ìš°ì— ì‚¬ìš©í•  ìˆ˜ ìˆìŒ.  
- locale : êµ­ì œí™”ë¥¼ ìœ„í•œ ê²ƒ.  


- ìë°”ì½”ë“œ
```java
@SpringBootTest  
public class MessageSourceTest {  
  
    @Autowired  
    MessageSource ms;  
  
    @Test  
    @DisplayName("ë©”ì‹œì§€ ì¡´ì¬í•˜ëŠ” ê²½ìš°")  
    void helloMessage() {  
        String result = ms.getMessage("hello", null, null);  
        assertThat(result).isEqualTo("ì•ˆë…•");  
    }  
  
    @Test  
    @DisplayName("ë©”ì‹œì§€ ì¡´ì¬í•˜ì§€ ì•Šì€ ê²½ìš°")  
    void notFoundMessageCode() {  
        assertThatThrownBy(() -> ms.getMessage("no_code", null, null))  
                .isInstanceOf(NoSuchMessageException.class);  
    }  
  
    @Test  
    @DisplayName("ë©”ì‹œì§€ ì¡´ì¬í•˜ì§€ ì•Šì€ ê²½ìš°, ê¸°ë³¸ ë©”ì‹œì§€ ì¶œë ¥")  
    void notFoundMessageCodeDefaultMessage() {  
        String result = ms.getMessage("no_code", null, "ê¸°ë³¸ ë©”ì‹œì§€", null);  
        assertThat(result).isEqualTo("ê¸°ë³¸ ë©”ì‹œì§€");  
    }  
  
    @Test  
    @DisplayName("ë©”ì‹œì§€ì˜ ì¸ìˆ˜ë¥¼ ë„£ì€ ê²½ìš°")  
    void argumentMessage() {  
        String message = ms.getMessage("hello.name", new Object[]{"Spring"}, null);  
        assertThat(message).isEqualTo("ì•ˆë…• Spring");  
    }  
  
    @Test  
    @DisplayName("locale ì •ë³´ì— ë”°ë¥¸ messages ì‚¬ìš©")  
    void defaultLang() {  
        assertThat(ms.getMessage("hello", null, null)).isEqualTo("ì•ˆë…•");  
        assertThat(ms.getMessage("hello", null, Locale.KOREA)).isEqualTo("ì•ˆë…•");  
    }  
  
    @Test  
    @DisplayName("ë©”ì‹œì§€ë¥¼ êµ­ì œí™”í•˜ëŠ” ê²½ìš°")  
    void enLang() {  
        assertThat(ms.getMessage("hello", null, Locale.ENGLISH)).isEqualTo("hello");  
    }  
}
```


#### ğŸ“Œ ë·°ì—ì„œ ë©”ì‹œì§€ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì€?
- ë©”ì‹œì§€ í‘œí˜„ì‹ì€ `#{...}` ì„ í†µí•´ì„œ ì¡°íšŒ ex) `#{label.item}`
- íŒŒë¼ë¯¸í„°ê°€ í¬í•¨ëœ ê²½ìš°ëŠ” `#{..$()}` ex)` hello.name=ì•ˆë…• {0}` ì¼ë•Œ, `#{hello.name(${item.itemName})`