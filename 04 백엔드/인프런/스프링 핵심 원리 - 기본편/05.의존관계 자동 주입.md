ë§í¬ : [[ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬  ê¸°ë³¸í¸.pdf]]
í•´ì‹œíƒœí¬ : #ì˜ì¡´ê´€ê³„, #ì˜ì¡´ì£¼ì… , #DI

----

## ì˜ì¡´ê´€ê³„ ì£¼ì…ì´ë€?
=>Aê°ì²´ê°€ Bê°ì²´ë¥¼ ì‚¬ìš©í•˜ëŠ” ì½”ë“œê°€ ìˆì„ë•Œ, Bê°ì²´ë¥¼ ìƒì„±í•˜ì—¬ Aê°ì²´ê°€ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ **ê´€ê³„ë¥¼ í˜•ì„±í•´ ì£¼ëŠ” ê²ƒ**ì´ë‹¤.

## ì˜ì¡´ê´€ê³„ ì£¼ì… ë°©ë²•ì€?
#### ğŸ“Œìƒì„±ì ì£¼ì…
- ìƒì„±ì ì£¼ì…ì´ë€? ìƒì„±ìë¥¼ í†µí•´ì„œ ì˜ì¡´ ê´€ê³„ë¥¼ ì£¼ì… ë°›ëŠ” ë°©ë²•ìœ¼ë¡œ, **ìƒì„±ì í˜¸ì¶œì‹œì ì— ë”± 1ë²ˆë§Œ í˜¸ì¶œë˜ëŠ” ê²ƒ**ì´ ë³´ì¥ëœë‹¤.  
- **ë¶ˆë³€, í•„ìˆ˜ ì˜ì¡´ê´€ê³„ì— ì‚¬ìš©**í•¨
- ìƒì„±ìê°€ ë”± 1ê°œë§Œ ìˆìœ¼ë©´ @ Autowiredë¥¼ ìƒëµí•´ë„ ìë™ ì£¼ì… ëœë‹¤.

- ìƒì„±ì ì£¼ì… ì½”ë“œ
```java
@Component  
public class OrderServiceImpl implements OrderService {  
    private final MemberRepository memberRepository;  
    private final DiscountPolicy discountPolicy; 
     
    @Autowired  
    public OrderServiceImpl(MemberRepository memberRepository, DiscountPolicy  
            discountPolicy) {  
        this.memberRepository = memberRepository;  
        this.discountPolicy = discountPolicy;  
    }  
}
```


#### ğŸ“Œìƒì„±ì ì£¼ì…ì˜ ì¥ì 
- ë¶ˆë³€
	-  ëŒ€ë¶€ë¶„ì˜ ì˜ì¡´ê´€ê³„ ì£¼ì…ì€ í•œë²ˆ ì¼ì–´ë‚˜ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì¢…ë£Œì‹œì ê¹Œì§€ ì˜ì¡´ê´€ê³„ë¥¼ ë³€ê²½í•  ì¼ì´ ì—†ë‹¤.  
	-  ìˆ˜ì •ì ì£¼ì…ì„ ì‚¬ìš©í•˜ë©´, setXxx ë©”ì„œë“œë¥¼ publicìœ¼ë¡œ ì—´ì–´ë‘ì–´ì•¼ í•œë‹¤.
- ëˆ„ë½
	-  ìƒì„±ì ì£¼ì…ì„ ì‚¬ìš©í•˜ë©´ ì£¼ì… ë°ì´í„°ë¥¼ ëˆ„ë½ í–ˆì„ ë•Œ ì»´íŒŒì¼ ì˜¤ë¥˜ê°€ ë°œìƒ.  
	-  ìƒì„±ì ì£¼ì…ì„ ì‚¬ìš©í•˜ë©´ í•„ë“œì— final í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ê·¸ë˜ì„œ ìƒì„±ìì—ì„œ í˜¹ì‹œë¼ë„ ê°’ì´ ì„¤ì •ë˜ì§€ ì•ŠëŠ” ì˜¤ë¥˜ë¥¼ ì»´íŒŒì¼ ì‹œì ì— ë§‰ì•„ì¤€ë‹¤


#### ğŸ“Œsetter ì£¼ì…
-   í•„ë“œì˜ ê°’ì„ ë³€ê²½í•˜ëŠ” ìˆ˜ì •ì ë©”ì„œë“œë¥¼ í†µí•´ì„œ ì˜ì¡´ê´€ê³„ë¥¼ ì£¼ì…í•˜ëŠ” ë°©ë²•  
-   ì„ **íƒ, ë³€ê²½ ê°€ëŠ¥ì„±ì´ ìˆëŠ” ì˜ì¡´ê´€ê³„ì— ì‚¬ìš©**

- setter ì£¼ì… ì½”ë“œ
```java
@Component  
public class OrderServiceImpl implements OrderService {  
    private MemberRepository memberRepository;  
    private DiscountPolicy discountPolicy;  
    
    @Autowired  
    public void setMemberRepository(MemberRepository memberRepository) {  
        this.memberRepository = memberRepository;  
    }  
    @Autowired  
    public void setDiscountPolicy(DiscountPolicy discountPolicy) {  
        this.discountPolicy = discountPolicy;  
    }  
}
```


#### ğŸ“Œí•„ë“œ ì£¼ì…
- ì‚¬ìš©í•˜ì§€ X  why? ì™¸ë¶€ì—ì„œ ë³€ê²½ì´ ë¶ˆê°€ëŠ¥í•´ì„œ ì‚¬ìš©í•˜ê¸° í˜ë“¤ë‹¤.

-  í•„ë“œ ì£¼ì… ì½”ë“œ
```java
@Component  
public class OrderServiceImpl implements OrderService {  
    @Autowired  
    private MemberRepository memberRepository;  
    @Autowired  
    private DiscountPolicy discountPolicy;  
}
```


## ì£¼ì…í•  ìŠ¤í”„ë§ ë¹ˆì´ ì—†ìœ¼ë©´?
- ì£¼ì…í•  ìŠ¤í”„ë§ ë¹ˆì´ ì—†ì–´ë„ ë™ì‘í•´ì•¼í•  ë•Œê°€ ìˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì£¼ì…í•  ë¹ˆì´ ì—†ìœ¼ë©´ ê¸°ë³¸ ë¡œì§ìœ¼ë¡œ ë™ì‘í•˜ëŠ” ë°©ì‹.
- í•˜ì§€ë§Œ ë¹ˆì„ ì£¼ì…í•˜ì§€ ì•Šê³  ë™ì‘í•˜ë©´, `UnsatisfiedDependencyException` ì˜¤ë¥˜ë°œìƒ

#### ğŸ“ŒìŠ¤í”„ë§ë¹ˆ ì£¼ì… ì•ˆí•˜ëŠ” ë°©ë²•
-   `@Autowired(required=false)` : ìë™ ì£¼ì…í•  ëŒ€ìƒì´ ì—†ìœ¼ë©´ ìˆ˜ì •ì ë©”ì„œë“œ ìì²´ê°€ í˜¸ì¶œ ì•ˆë¨  
-   `org.springframework.lang.@Nullable` : ìë™ ì£¼ì…í•  ëŒ€ìƒì´ ì—†ìœ¼ë©´ nullì´ ì…ë ¥ëœë‹¤.  
-   `Optional<>` : ìë™ ì£¼ì…í•  ëŒ€ìƒì´ ì—†ìœ¼ë©´ Optional.empty ê°€ ì…ë ¥ëœë‹¤.

- í…ŒìŠ¤íŠ¸ì½”ë“œ
```java
public class AutoWiredTest {  
    @Test  
    void AutoWiredOption(){  
        AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(TestBean.class);  
    }  
  
    static class TestBean{  
          
        //@Autowired ì˜¤ë¥˜  
        public void setNoBean0(Member member) {  
            System.out.println("setNoBean0 = " + member);  
        }  
        
        //í˜¸ì¶œ ì•ˆë¨  
        @Autowired(required = false)  
        public void setNoBean1(Member member) {  
            System.out.println("setNoBean1 = " + member);  
        }  
  
        //null í˜¸ì¶œ  
        @Autowired  
        public void setNoBean2(@Nullable Member member) {  
            System.out.println("setNoBean2 = " + member);  
        }  
  
        //Optional.empty í˜¸ì¶œ  
        @Autowired(required = false)  
        public void setNoBean3(Optional<Member> member) {  
            System.out.println("setNoBean3 = " + member);  
        }  
    }  
}
```

#### â“ ë¹ˆ ì£¼ì…ì€ ìƒì„±ìì—ë§Œ ê°€ëŠ¥í•œê±° ì•„ë‹ˆì—ˆë‚˜??
ì´ê²Œ ì–´ë–»ê²Œ ì£¼ì… ë˜ëŠ”ê±°ì§€? ê·¸ë¦¬ê³  ì™œ ì£¼ì…ì´ ì—†ë‹¤ê³  í•˜ëŠ”ê±¸ê¹Œ?

## ë¡¬ë³µì„ ì´ìš©í•œ ì£¼ì…
`@RequiredArgsConstructor` ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë©´ finalì´ ë¶™ì€ í•„ë“œë¥¼ ëª¨ì•„ì„œ ìƒì„±ìë¥¼ ìë™ìœ¼ë¡œ ë§Œë“¤ì–´ì¤€ë‹¤. ê·¸ë¦¬ê³  í•œê°œì¼ë•ŒëŠ” `@Autowired`ìƒëµ ê°€ëŠ¥í•¨!!


```java
@RequiredArgsConstructor  
public class OrderServiceImpl implements OrderService{  
    private final MemberRepository memberRepository;  
    private final DiscountPolicy discountPolicy;
}
```

## ì˜ì¡´ ì£¼ì…í• ë•Œ, ë™ì¼íƒ€ì… ë¹ˆì´ 2ê°œ ì´ìƒì´ë©´?
- ë¬¸ì œê°€ ë˜ëŠ” ìƒí™©
```java
public class OrderServiceImpl implements OrderService{  
	private final MemberRepository memberRepository;
    private final DiscountPolicy discountPolicy;

	@AutoWired
	public OrderServiceImpl(MemberRepository memberRepository, DiscountPolicy discountPolicy) {  
    this.memberRepository = memberRepository;  
    this.discountPolicy = discountPolicy;  
}
    ...
}

@Component
public class FixDiscountPolicy implements DiscountPolicy{  
	...
}

@Component
public class RateDiscountPolicy implements DiscountPolicy{  
	...
}
```
=> ì´ë ‡ê²Œ ìˆë‹¤ë©´ `DiscountPolicy`ëŠ” `FixDiscountPolicy`ì™€ `RateDiscountPolicy` ì¤‘ì—ì„œ ì–´ë–¤ ê²ƒì„ ì£¼ì…í•´ì•¼ë ì§€ ëª¨ë¦„

í•´ê²°ì±…1
- `@Primary`  : ìš°ì„ ìˆœìœ„ë¥¼ ì •í•˜ëŠ” ë°©ë²•. ê°€ì¥ ì„ í˜¸í•˜ëŠ” ë°©ë²•  
- `@Primary` ë¥¼ ì ìš©í•œ ì½”ë“œ
```java
@Component
@Primary
public class FixDiscountPolicy implements DiscountPolicy{  
	...
}

@Component
public class RateDiscountPolicy implements DiscountPolicy{  
	...
}
```


í•´ê²°ì±…2
- `@Qualifier` : ì¶”ê°€ êµ¬ë¶„ìë¥¼ ë¶™ì—¬ì£¼ëŠ” ë°©ë²•
- `@Qualifier` ë¥¼ ì ìš©í•œ ì½”ë“œ
```java
@Autowired  
public OrderServiceImpl(MemberRepository memberRepository,  
@Qualifier("mainDiscountPolicy") DiscountPolicy discountPolicy) {  
    this.memberRepository = memberRepository;  
    this.discountPolicy = discountPolicy;  
}


@Component
@Qualifier("fixDiscountPolicy")
public class FixDiscountPolicy implements DiscountPolicy{  
	...
}


@Component
@Qualifier("mainDiscountPolicy")
public class RateDiscountPolicy implements DiscountPolicy{  
	...
}
```
=> ë‹¨, ì´ë°©ë²•ì€ ë¡¬ë¶ìœ¼ë¡œëŠ” ëª…ì‹œí•´ì¤„ ìˆ˜ ì—†ì–´ì„œ ì§ì ‘ ìƒì„±ìë¥¼ ë§Œë“  í›„ ì…ë ¥í•´ì•¼í•¨.


## ìë™, ìˆ˜ë™ì˜ ì˜¬ë°”ë¥¸ ì‹¤ë¬´ ìš´ì˜ ê¸°ì¤€
-   í¸ë¦¬í•œ ìë™ ê¸°ëŠ¥ì„ ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©í•˜ì  
   => ìë™ ê¸°ëŠ¥ì„ ì‚¬ìš©í•´ë„ íŠ¹ì • íŒ¨í‚¤ì§€ì— ê°™ì´ ë¬¶ì–´ë‘ëŠ”ê²Œ ì¢‹ë‹¤! í•µì‹¬ì€ ë”± ë³´ê³  ì´í•´ê°€ ë˜ë„ë¡ í•˜ê¸° ìœ„í•¨. (ì•„ë‹ˆë©´ ì§ì ‘ ë‹¤ ì°¾ì•„ë´ì•¼í•¨)  

-   ë‹¨, ë‹¤í˜•ì„±ì„ ì ê·¹ í™œìš©í•˜ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì€ ìˆ˜ë™ ë“±ë¡ì„ ê³ ë¯¼í•´ë³´ì(ìˆ˜ë™ ì“°ë©´ í•œë²ˆì— í•µì‹¬ íŒŒì•…í•˜ê¸° ì‰¬ì›€)


