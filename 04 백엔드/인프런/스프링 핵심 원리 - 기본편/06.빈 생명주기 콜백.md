ë§í¬ : [[ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬  ê¸°ë³¸í¸.pdf]]
í•´ì‹œíƒœí¬ : #ìƒëª…ì£¼ê¸° 
ë§ˆì§€ë§‰ ë³µìŠµ : #23/01/31
í•´ë‹¹ í”„ë¡œì íŠ¸ : mvc1/corespring

----

## ë¹ˆ ìƒëª…ì£¼ê¸° ì½œë°±ì´ë€?
ì¶œì²˜ : [[Spring] Bean ìƒëª…ì£¼ê¸° ì½œë°±](https://livenow14.tistory.com/66)

=>ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ì˜ì¡´ê´€ê³„ ì£¼ì…ì´ ì™„ë£Œë˜ë©´ ìŠ¤í”„ë§ ë¹ˆì—ê²Œ ì½œë°± ë©”ì„œë“œë¥¼ í†µí•´ì„œÂ **ì´ˆê¸°í™”, ì¢…ë£ŒÂ ì‹œì **ì„ ì•Œë ¤ì£¼ëŠ” ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ ì œê³µí•¨. 
=> ì½œë°±ì´ë€? ì–´ë–¤ ì´ë²¤íŠ¸ê°€ ë°œìƒí–ˆê±°ë‚˜ íŠ¹ì • ì‹œì ì— ë„ë‹¬í–ˆì„ ë•Œ ì‹œìŠ¤í…œì—ì„œ í˜¸ì¶œí•˜ëŠ” í•¨ìˆ˜ë¥¼ ë§í•´ìš”.


## ìŠ¤í”„ë§ ë¹ˆì˜ ì´ë²¤íŠ¸ ë¼ì´í”„ì‚¬ì´í´ì€?
ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„± â†’ ìŠ¤í”„ë§ ë¹ˆ ìƒì„± â†’ ì˜ì¡´ê´€ê³„ ì£¼ì… â†’ ì´ˆê¸°í™” ì½œë°± â†’ ì‚¬ìš© â†’ ì†Œë©¸ ì „ ì½œë°± â†’ ìŠ¤í”„ë§ ì¢…ë£Œ

- ì´ˆê¸°í™” ì½œë°±ì´ë€?  ë¹ˆì´ ìƒì„±ë˜ê³ , ë¹ˆì˜ ì˜ì¡´ê´€ê³„ ì£¼ì…ì´ ì™„ë£Œëœ í›„ í˜¸ì¶œ  
- ì†Œë©¸ì „ ì½œë°±ì´ë€?  ë¹ˆì´ ì†Œë©¸ë˜ê¸° ì§ì „ì— í˜¸ì¶œ

## ì™œ í•„ìš”í•´?
=> ë°ì´í„°ë² ì´ìŠ¤ ì»¤ë„¥ì…˜ í’€ì´ë‚˜, ë„¤íŠ¸ì›Œí¬ ì†Œì¼“ì²˜ëŸ¼ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘ ì‹œì ì— í•„ìš”í•œ ì—°ê²°ì„ ë¯¸ë¦¬ í•´ë‘ê³ , ì• í”Œë¦¬ì¼€ì´ì…˜ ì¢…ë£Œ ì‹œì ì— ì—°ê²°ì„ ëª¨ë‘ ì¢…ë£Œí•˜ëŠ” ì‘ì—…ì„ ì§„í–‰í•˜ë ¤ë©´, ê°ì²´ì˜ ì´ˆê¸°í™”ì™€ ì¢…ë£Œ ì‘ì—…ì´ í•„ìš”í•¨.

## (ì½”ë“œ) ë¹ˆ ìƒëª…ì£¼ê¸° ì½œë°±ì„ ì§€ì›í•˜ëŠ” 3ê°€ì§€ ë°©ë²•ì€?
#### ğŸ“Œì¸í„°í˜ì´ìŠ¤
- ë™ì‘ ë°©ë²•?   ì˜ì¡´ ê´€ê³„ ì£¼ì…ì´ ëë‚˜ë©´ ìë™ì ìœ¼ë¡œ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•¨.
- ex) ê°„ë‹¨í•˜ê²Œ ì™¸ë¶€ ë„¤íŠ¸ì›Œí¬ì— ë¯¸ë¦¬ ì—°ê²°í•˜ëŠ” ê°ì²´ë¥¼ í•˜ë‚˜ ìƒì„±
```java
public class NetworkClient {  
    private String url;  
    public NetworkClient() {  
        System.out.println("ìƒì„±ì í˜¸ì¶œ, url = " + url);  
        connect();  
        call("ì´ˆê¸°í™” ì—°ê²° ë©”ì‹œì§€");  
    }  
    
    public void setUrl(String url) {  
        this.url = url;  
    }  
    
    //ì„œë¹„ìŠ¤ ì‹œì‘ì‹œ í˜¸ì¶œ  
    public void connect() {  
        System.out.println("connect: " + url);  
    }  
    
    public void call(String message) {  
        System.out.println("call: " + url + " message = " + message);  
    }  
    
    //ì„œë¹„ìŠ¤ ì¢…ë£Œì‹œ í˜¸ì¶œ  
    public void disconnect() {  
        System.out.println("close: " + url);  
    }  
}
```

- í…ŒìŠ¤íŠ¸í•˜ê¸°
```java
public class BeanLifeCycleTest {  
    @Test  
    public void lifeCycleTest() {  
        ConfigurableApplicationContext ac = new  AnnotationConfigApplicationContext(LifeCycleConfig.class);  
        NetworkClient client = ac.getBean(NetworkClient.class);  
        ac.close(); //ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ì¢…ë£Œ, ConfigurableApplicationContext í•„ìš”  
    }  

    @Configuration  
    static class LifeCycleConfig {  
        @Bean  
        public NetworkClient networkClient() {  
            NetworkClient networkClient = new NetworkClient();  
            networkClient.setUrl("http://hello-spring.dev");  
            return networkClient;  
        }  
    }  
}
```

- ë‹¨ì   
	- ìŠ¤í”„ë§ ì „ìš© ì¸í„°í˜ì´ìŠ¤ì´ë¯€ë¡œ ì½”ë“œê°€ **ìŠ¤í”„ë§ ì „ìš© ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´**í•œë‹¤.  
	- ì´ˆê¸°í™”, ì†Œë©¸ ë©”ì„œë“œì˜ **ì´ë¦„ì„ ë³€ê²½í•  ìˆ˜ ì—†ë‹¤.**  

#### ğŸ“Œì„¤ì • ì •ë³´ì— ì´ˆê¸°í™” ë©”ì„œë“œ, ì¢…ë£Œ ë©”ì„œë“œ ì§€ì •  
- ë™ì‘ ë°©ë²•?   @Bean(initMethod = "init", destroyMethod = "close")ë¥¼ ì“°ë©´ ì´ˆê¸°í™”, ì†Œë©¸ ë©”ì„œë“œë¥¼ ì§ì ‘ ì§€ì •
```java
//ë©”ì„œë“œ ì´ë¦„ì„ ì„ì˜ë¡œ ë³€ê²½í•¨.
public void init() throws Exception{
	connect();
	call("ì´ˆê¸°í™” ì—°ê²° ë©”ì‹œì§€");
}

public void close() throws Exception{
	disconnect();
}
```

- íŠ¹ì§•
	- ë©”ì„œë“œ ì´ë¦„ì„ ììœ ë¡­ê²Œ ì¤„ ìˆ˜ ìˆë‹¤.  
	- ì„¤ì • ì •ë³´ë¥¼ ì´ìš©í•˜ë¯€ë¡œ ì½”ë“œë¥¼ ê³ ì¹  ìˆ˜ ì—†ëŠ” **ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ë„ ì ìš©**í•  ìˆ˜ ìˆë‹¤.  

#### ğŸ“Œ@PostConstruct, @PreDestroy ì• ë…¸í…Œì´ì…˜ ì§€ì›  
- ë™ì‘ ë°©ë²•?  í•´ë‹¹ ë¹ˆì„ ë“±ë¡í•´ì£¼ë©´ ì• ë„ˆí…Œì´ì…˜ì— ë¶™ì€ ë©”ì„œë“œë¥¼ ìƒëª… ì£¼ê¸°ì— ë”°ë¼ ì‹¤í–‰(ì»´í¬ë„ŒíŠ¸ë„ ì‚¬ìš©ê°€ëŠ¥)
```java
@PostConstruct
public void init() throws Exception{
	connect();
	call("ì´ˆê¸°í™” ì—°ê²° ë©”ì‹œì§€");
}

@PreDestroy
public void close() throws Exception{
	disconnect();
}
```

- íŠ¹ì§•
	- ì• ë„ˆí…Œì´ì…˜ í•˜ë‚˜ë§Œ ë¶™ì´ë©´ ë˜ë¯€ë¡œ í¸ë¦¬  
	- ìŠ¤í”„ë§ì— ì¢…ì†ì ì¸ ê²Œ ì•„ë‹ˆë¼ ìë°” í‘œì¤€  

#### ğŸ“Œì–¸ì œ ë­˜ ì¨ì•¼ë ê¹Œ?  
- **@PostConstruct, @PreDestroy ì• ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©**í•˜ì  
- ì½”ë“œë¥¼ ê³ ì¹  ìˆ˜ ì—†ëŠ” ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì´ˆê¸°í™”, ì¢…ë£Œí•´ì•¼ í•˜ë©´ @ Bean ì˜ initMethod , destroyMethodë¥¼ ì‚¬ìš©í•˜ì.