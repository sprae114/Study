#트랜잭션
[(27) [10분 테코톡] 🐤 샐리의 트랜잭션 - YouTube](https://www.youtube.com/watch?v=aX9c7z9l_u8)
[(27) [10분 테코톡] 후니의 스프링 트랜잭션 - YouTube](https://www.youtube.com/watch?v=cc4M-GS9DoY&t=531s)
[(27) [10분 테코톡] 리차드의 @Transactional - YouTube](https://www.youtube.com/watch?v=taAp_u83MwA)

[[Spring] Spring 트랜잭션의 세부 설정(전파 속성, 격리수준, 읽기전용, 롤백/커밋 예외 등)](https://mangkyu.tistory.com/169)

---

## 스프링은 트랜잭션을 어떻게 지원하고 있을까?
스프링 프레임워크에서 제공하는 트랜잭션 관리 인터페이스입니다. 트랜잭션 관리의 핵심 기능을 정의하며, 여러 트랜잭션 기술을 추상화하여 일관된 프로그래밍 모델을 제공합니다.
 
`PlatformTransactionManager` 인터페이스는 다음 메서드들을 포함합니다
1. `TransactionStatus getTransaction(TransactionDefinition definition)`: 트랜잭션을 시작하고, 새로 생성된 트랜잭션의 상태를 반환합니다.
2. `void commit(TransactionStatus status)`: 주어진 트랜잭션을 커밋합니다. 이 작업에 실패하면 적절한 예외를 발생시키게 됩니다.
3. `void rollback(TransactionStatus status)`: 주어진 트랜잭션을 롤백합니다. 이 작업에 실패하면 적절한 예외를 발생시키게 됩니다.

![[Pasted image 20230811180231.png]]
이러한 구현체를 사용하면, 해당 기술에 맞는 트랜잭션 처리가 가능합니다. 

# `@Transactional` 어노테이션
## propagation
**트랜잭션 전파 옵션 설정**으로, 현재 트랜잭션과 관련된 새로운 트랜잭션 생성 규칙을 정의합니다. 

1. `REQUIRED`(기본값): 현재 존재하는 트랜잭션이 있다면 이를 사용하고, 없다면 새로운 트랜잭션을 생성합니다. 대부분의 경우 이 옵션이 적합하며, 특별한 상황이 아니라면 기본값으로 사용할 수 있습니다.

2. `REQUIRES_NEW`: 항상 새로운 트랜잭션을 생성합니다. 기존에 실행 중이던 트랜잭션이 있다면 잠시 중단되고, 새로운 트랜잭션의 실행이 완료된 후 다시 이어집니다.

3. `SUPPORTS`: 이미 실행 중인 트랜잭션이 있다면 이를 사용하고, 없다면 트랜잭션 없이 코드를 실행합니다. 이 옵션은 트랜잭션이 필수적이지 않은 작업에 유용합니다.

4. `NOT_SUPPORTED`: 트랜잭션 없이 코드를 실행합니다. 이미 존재하는 트랜잭션이 있다면 일시 중단되고, 해당 메소드 실행이 완료된 후 트랜잭션을 재개합니다.

5. `MANDATORY`: 반드시 기존의 트랜잭션 내에서 코드가 실행되어야 합니다. 실행 중인 트랜잭션이 없다면 예외를 발생시킵니다.

6. `NEVER`: 트랜잭션을 사용하지 않고 코드를 실행합니다. 만약 실행하는 동안 트랜잭션이 존재한다면 예외가 발생합니다.

7. `NESTED`: 중첩 트랜잭션을 사용합니다. 현재 트랜잭션이 있다면 중첩 트랜잭션을 생성하고 그 안에서 코드를 실행합니다. 중첩 트랜잭션의 커밋 및 롤백은 외부 트랜잭션에 영향을 주지 않습니다. 만약 현재 트랜잭션이 없다면 `REQUIRED`와 같이 동작합니다.

## isolation
**트랜잭션 격리 수준을 설정**합니다. 선택 가능한 격리 수준은 DEFAULT(대부분의 DB는 READ_COMMITED를 기본 격리수준), READ_UNCOMMITTED, READ_COMMITTED, REPEATABLE_READ, SERIALIZABLE입니다.
   
## readOnly
**트랜잭션 읽기 전용 모드로 설정**하면, 해당 트랜잭션에서는 데이터 변경 작업(삽입, 수정, 삭제)이 발생하지 않으며, 조회 작업만 수행되도록 합니다. 기본값은 false입니다.

##  timeout
**트랜잭션 처리 시간에 제한을 설정**하며, 이 시간이 초과되면 트랜잭션은 롤백됩니다. 기본값은 -1로, 시간 제한이 없음을 의미합니다. (단위는 초)

## rollbackFor
**특정 예외 클래스 발생 시 자동으로 롤백하는 것으로 설정**합니다. 예외 클래스 배열을 입력받습니다.

## noRollbackFor
**특정 예외에 대해 롤백하지 않도록 설정**한 예외 클래스 배열입니다.