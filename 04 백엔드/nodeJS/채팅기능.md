## 서버와 유저가 통신하는 법
### 일반 HTTP 요청 (ex. 편지)
![[Pasted image 20241203223320.png]]
지금까지 했던 **GET, POST 등의 요청을 HTTP 요청**이라고 부릅니다. **유저가 먼저 요청을 보내야 서버가 응답**해준다는 겁니다. 서버가 먼저 뭔가를 보내는 일은 없습니다.


### Server sent events (ex. 라디오)
![[Pasted image 20241203223702.png]]
서버에 한번 연결해두면 **서버가 원할 때 맘대로** 데이터를 유저에게 보내줄 수 있습니다. 서버는 유저로 이렇게 **일방향으로만 전달이 가능**합니다. 가벼워서 실시간 데이터 전달에 좋음


### Websocket (ex. 전화)
![[Pasted image 20241203223805.png]]
서버랑 유저가 **자유롭게 실시간으로** 데이터를 주고받을 수 있습니다. 유저가 먼저 보낼 수도 있고 서버가 먼저 보낼 수도 있습니다.


## 글로 채팅기능 만들기
![[Pasted image 20241204093210.png]]
- 일단 누구랑 채팅하고 싶은지 골라서 채팅방을 만들어야하고
- 채팅방 목록도 있고
- 채팅방 하나 누르면 채팅메세지 보낼 수 있는 페이지도 있습니다.

▶ 매커니즘
1. 글 주인에게 채팅요청하면 채팅방을 하나 만들어줌
2. 내가 들어있는 채팅방 목록도 볼 수 있는 페이지가 필요함 
3. 채팅방 하나 선택하면 채팅방의 상세페이지가 뜸
4. 메세지 보내면 그걸 DB에 저장해주고 상세페이지에도 실시간으로 메세지들을 띄워줘야함.

## 채팅방 어떻게 만듦?
웹에 있는 거의 모든 기능은 **그냥 글발행 기능이랑 똑같습니다.** 알아서 코드 잘 짜고 싶으면 잘 기억해두도록 합시다.

![[Pasted image 20241204093439.png]]
그래서 누가 채팅방 개설원하면 document 하나 DB에 발행하면 끝인데
- 채팅 참여자들이 누군지
- 어떤 채팅메세지들이 있었는지
적어두면 될 것 같습니다. **메세지는 많을 수 있으니 다른 document로 빼는게** 좋을 수도 있습니다.