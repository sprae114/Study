#ì„œë¸”ë¦¿, #ì»¨í…Œì´ë„ˆ 

#ì¸í”„ëŸ°MVC_1í¸

----
#ì¸í”„ëŸ°MVC_1í¸01 

## ì„œë¸”ë¦¿ ê°œë…ì¡ê¸°
#### ì„œë¸”ë¦¿ì´ë€?âœ”
ì¶œì²˜ : [[Web] ì„œë¸”ë¦¿(Servlet)ì´ë€ ë¬´ì—‡ì¸ê°€? ](https://coding-factory.tistory.com/742)
ì„œë¸”ë¦¿ì€ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ëŒ€í•œ ìš”ì²­ì„ ì²˜ë¦¬í•˜ê³  ì‘ë‹µì„ ìƒì„±í•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” Java í´ë˜ìŠ¤ì…ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ HTTP ìš”ì²­ ë° ì‘ë‹µì„ ì²˜ë¦¬í•˜ëŠ” ë° ì‚¬ìš©ë˜ë©° íŠ¹ì • URL ë˜ëŠ” URL íŒ¨í„´ì— ëŒ€í•œ ìš”ì²­ì„ ì²˜ë¦¬í•˜ë„ë¡ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Springì€ ì‘ë‹µì„ ìƒì„±í•˜ê¸° ìœ„í•´ ì»¨íŠ¸ë¡¤ëŸ¬ì™€ ê°™ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë‹¤ë¥¸ ë¶€ë¶„ì— ìš”ì²­ì„ ë””ìŠ¤íŒ¨ì¹˜í•˜ëŠ” ì„œë¸”ë¦¿ì¸ DispatcherServlet í´ë˜ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤. Springì€ ë˜í•œ HttpServletRequest ë° HttpServletResponse í´ë˜ìŠ¤ì™€ ê°™ì€ ê¸°íƒ€ í´ë˜ìŠ¤ ë° ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•˜ì—¬ Spring ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì„œë¸”ë¦¿ìœ¼ë¡œ ì‘ì—…í•˜ëŠ” ë° ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.


#### ì„œë¸”ë¦¿ì„ ì™œ ì“°ëŠ”ê±°ì•¼?  
ì¶œì²˜ : [[10ë¶„ í…Œì½”í†¡] ğŸ¶ á„á…©á„€á…µì˜ Servlet vs Spring - YouTube](https://www.youtube.com/watch?v=calGCwG_B4Y)
 ë©”ë‰´ë¥¼ ì£¼ë¬¸í• ë•Œ ìƒê°í•´ë³´ì. ex) ì—¬ê¸° ì œì¼ ë§›ìˆëŠ” ë©”ë‰´ ì¶”ì²œí•´ì£¼ì„¸ìš”. ê·¸ëŸ¬ë©´ ì§œì¥ë©´ ê³±ë°°ê¸° í•˜ë‚˜ì£¼ì„¸ìš” -> ì£¼ë¬¸ : ì§œì¥ë©´ ê³±ë°°ê¸° 

- ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ í•˜ë©´ ë„ˆë¬´ **ë§ì€ ë¶ˆí•„ìš”í•œ ì—…ë¬´(ë©”ì‹œì§€ íŒŒì‹±, íƒ€ì…í™•ì¸, ì €ì¥....)ë¥¼ ë‹´ë‹¹**í•˜ê²Œ ëœë‹¤. ê·¸ë˜ì„œ ì˜ë¯¸ìˆëŠ” **ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ë§Œ ì‚¬ìš©**í•˜ê¸° ìœ„í•¨. 
- ìœ„ì—ëŠ” http í˜•íƒœì˜ ìš”ì²­ì„ ì§ì ‘ íŒŒì‹±í•˜ëŠ” ê²ƒ, ë°‘ì—ëŠ” ì„œë¸”ë¦¿ requestë¥¼ í™œìš©í•˜ëŠ” ê²ƒ
![[Pasted image 20221218032718.png]]

- ì—¬ê¸°ì„œ, ì˜ë¯¸ìˆëŠ” ìš”ì²­ì€ requestê°ì²´ì— ë„£ê³  ë¡œì§ì‹¤í–‰í•˜ê³ , ë°˜í™˜ê°’ì€ responseê°ì²´ì— ìš”ì²­ì˜ ê°ê°ë§ˆë‹¤ ë°˜í™˜ëŒ.
![[Pasted image 20221217001507.png]]


#### (ì½”ë“œ) ì„œë¸”ë¦¿ êµ¬í˜„
- URL("/hello")ì´ í˜¸ì¶œë˜ë©´ ì„œë¸”ë¦¿ ì½”ë“œê°€ ì‹¤í–‰ëŒ.
```java
@WebServlet(name = "helloServlet", urlPatterns = "/hello")  
public class HelloServlet extends HttpServlet {  
   
    protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    
    //ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œì§ì„ ë‹¤ìŒê³¼ ê°™ì´ êµ¬ì„±ëŒ(ì´í•´ë§Œ)
	String method = requset.getMethod();
	
	if (method.equals("GET")){
		doGet(request, response)
	} else if (method.equals("Head")){
		doHead(request, response)
	} else if (method.equals("Post")){
		doPost(request, response)
	} else if (method.equals("Put")){
		doPut(request, response)
	} ...
}
```
 HTTP ìš”ì²­ ì •ë³´ë¥¼ í¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” HttpServletRequest
 HTTP ì‘ë‹µ ì •ë³´ë¥¼ í¸ë¦¬í•˜ê²Œ ì œê³µí•  ìˆ˜ ìˆëŠ” HttpServletResponse


## ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆ ê°œë… ì¡ê¸°
ì¶œì²˜ : [[10ë¶„ í…Œì½”í†¡] ğŸ¶ á„á…©á„€á…µì˜ Servlet vs Spring - YouTube](https://www.youtube.com/watch?v=calGCwG_B4Y), [ìŠ¤í”„ë§(Spring) MVC ë™ì‘ êµ¬ì¡° ë° ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ)](https://codevang.tistory.com/248)

#### ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆë€?
**ì„œë¸”ë¦¿ì„ ë‹´ê³  ê´€ë¦¬**í•´ì£¼ëŠ” ì»¨í…Œì´ë„ˆì…ë‹ˆë‹¤.Â ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆëŠ” êµ¬í˜„ë˜ì–´ ìˆëŠ” servlet í´ë˜ìŠ¤ì˜ ê·œì¹™ì— ë§ê²Œ ì„œë¸”ë¦¿ì€ ê´€ë¦¬í•´ì£¼ë©° í´ë¼ì´ì–¸íŠ¸ì—ì„œ ìš”ì²­ì„ í•˜ë©´ ì»¨í…Œì´ë„ˆëŠ” HttpServletRequest, HttpServletResponse ë‘ **ê°ì²´ë¥¼ ìƒì„±í•˜ë©° post, getì—¬ë¶€ì— ë”°ë¼ ë™ì ì¸ í˜ì´ì§€ë¥¼ ìƒì„±í•˜ì—¬ ì‘ë‹µ**ì„ ë³´ëƒ…ë‹ˆë‹¤.


#### ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆì˜ íŠ¹ì§•
- ì„œë¸”ë¦¿ ê°ì²´ë¥¼ **ìƒì„±, ì´ˆê¸°í™”, í˜¸ì¶œ, ì¢…ë£Œí•˜ëŠ” ìƒëª…ì£¼ê¸° ê´€ë¦¬**
- **ì„œë¸”ë¦¿ ê°ì²´ëŠ” ì‹±ê¸€í†¤ìœ¼ë¡œ ê´€ë¦¬**
	response/request ê°ì²´ëŠ” ê³ ê°ì´ ìš”ì²­ì´ ì˜¬ë•Œë§ˆë‹¤, ìƒˆë¡œ ìƒì„±ë˜ëŠ” ê²ƒì´ ë§ìŒ. í•˜ì§€ë§Œ HelloServletê³¼ ê°™ì€ ì„œë¸”ë¦¿ ê°ì²´ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œì§ í•˜ë‚˜ë§Œ ë§Œë“¤ì–´ì„œ ê³µìœ í•¨.
- ë™ì‹œ ìš”ì²­ì„ ìœ„í•œ **ë©€í‹° ì“°ë ˆë“œ ì²˜ë¦¬** ì§€ì›


#### ì„œë¸”ë¦¿ì»¨í…Œì´ë„ˆ ë™ì‘ë°©ë²•ì€?  
- **Request, Response ê°ì²´ë¥¼ ìƒˆë¡œ ë§Œë“¤ì–´ì„œ ì„œë¸”ë¦¿ ê°ì²´ í˜¸ì¶œí›„ ì‘ë‹µ**í•¨(ì‹±ê¸€í†¤ìœ¼ë¡œ)
![[Pasted image 20221218025842.png]] 		
ë§¤ì»¤ë‹ˆì¦˜
1) ë¸Œë¼ìš°ì €ê°€ /helloë¡œ ìš”ì²­ì„ ë³´ë‚´ë©´ WASëŠ” ì´ ìš”ì²­ ë©”ì‹œì§€ë¥¼ ê¸°ë°˜ìœ¼ë¡œ **request, response ê°ì²´ë¥¼ ìƒì„±**í•œë‹¤.ê°œë°œìëŠ” request ê°ì²´ì—ì„œ HTTP ìš”ì²­ ì •ë³´ë¥¼ í¸ë¦¬í•˜ê²Œ êº¼ë‚´ì„œ ì‚¬ìš©í•œë‹¤.  
2) ë‘ ê°ì²´ë¥¼ ë„˜ê²¨ë°›ì€ ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆëŠ” **ì“°ë ˆë“œë¥¼ í†µí•´** ê°œë°œìê°€ ë§Œë“  **helloServletì„ ì‹¤í–‰**í•´ì¤€ë‹¤. 
3) ë¦¬í„´ì„ í•˜ë©´ **reponse ê°ì²´ì— ì‘ë‹µ ë©”ì‹œì§€ë¥¼ ë§Œë“¤ì–´ ë¸Œë¼ìš°ì €ì— ì „ë‹¬**í•œë‹¤.ê°œë°œìëŠ” response ê°ì²´ì— HTTP ì‘ë‹µ ì •ë³´ë¥¼ í¸ë¦¬í•˜ê²Œ ì…ë ¥í•œë‹¤.WASëŠ” response ê°ì²´ì— ë‹´ê²¨ìˆëŠ” ë‚´ìš©ìœ¼ë¡œ HTTP ì‘ë‹µ ì •ë³´ë¥¼ ìƒì„±í•œë‹¤. 

ì¢€ë” ìì„¸íˆ ì½”ë“œì™€ ì„¤ëª…í•˜ìë©´,
Servletì€ Serverì—ì„œ ë™ì‘í•˜ëŠ” Classë“¤ì„ ì˜ë¯¸í•œë‹¤. ê° Servletì€ init(), service(), destory() 3ê°œì˜ methodë¥¼ ë°˜ë“œì‹œ ì •ì˜í•´ì•¼ í•œë‹¤.
**init()** : init()ì€ Servlet ìƒì„±ì‹œ í˜¸ì¶œëœë‹¤. Servletì„ ì´ˆê¸°í™” í•˜ê³  Servletì´ ì´ìš©í•˜ëŠ” ìì›ì„ í• ë‹¹í•˜ëŠ” ë™ì‘ì„ ìˆ˜í–‰í•œë‹¤.
**service()** : Servletìœ¼ë¡œ ìš”ì²­ì´ ì „ë‹¬ ë  ë•Œë§ˆë‹¤ í˜¸ì¶œëœë‹¤. ì‹¤ì œ Service Logicì„ ìˆ˜í–‰í•œë‹¤.
**destroy()** : Servletì´ ì‚­ì œë ë•Œ í˜¸ì¶œëœë‹¤. Servletì—ì„œ ì´ìš©í•˜ëŠ” ìì›ì„ í•´ì§€í•˜ëŠ” ë™ì‘ì„ ìˆ˜í–‰í•œë‹¤.
![[Pasted image 20221218034353.png]]
1) Servlet Request/ Servlet Response ê°ì²´ ìƒì„±
2) ì„¤ì • íŒŒì¼ì„ ì°¸ê³ í•˜ì—¬ ë§¤í•‘í•  ì„œë¸”ë¦¿ì„ í™•ì¸
ex) ì„¤ì •íŒŒì¼ ì˜ˆì‹œ
"/hello" ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´, HelloServletì´ë¼ëŠ” ì„œë¸”ë¦¿ìœ¼ë¡œ ì²˜ë¦¬í•˜ê² ë‹¤ëŠ” ì½”ë“œ
 HelloServletì€ servlet.HelloServletì— ìœ„ì¹˜í•´ ìˆìŒ.
![[Pasted image 20221218034641.png]]
3) í•´ë‹¹ ì„œë¸”ë¦¿ ì¸ìŠ¤í„´ìŠ¤ ì¡´ì¬ì˜ ìœ ë¬´ë¥¼ í™•ì¸í•˜ì—¬ ì—†ìœ¼ë©´ ìƒì„±í•¨(init)
4) ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆì— ìŠ¤ë ˆë“œë¥¼ ìƒì„±í•˜ê³ , resquest, responseë¥¼ ì¸ìë¡œ serviceë¥¼ ì‹¤í–‰í•¨
5) ì‘ë‹µì„ ì²˜ë¦¬í•œ resquest, responseë¥¼ destory()ë¡œ ì†Œë©¸ì‹œí‚¤ê³  ì¢…ë£Œ.


#### (ì½”ë“œ) ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆ êµ¬í˜„ ì½”ë“œ
ì¶œì²˜ : [ì„œë¸”ë¦¿ - dodeon (gitbook.io)](https://dodeon.gitbook.io/study/kimyounghan-spring-mvc/02-servlet)

- ì„œë¸”ë¦¿ ë“±ë¡
```java
@ServletComponentScan
@SpringBootApplication
public class ServletApplication {
    public static void main(String[] args) {
        SpringApplication.run(ServletApplication.class, args);
    }
}
```

- ì„œë¸”ë¦¿ êµ¬í˜„
```java
// helloë¡œ ìš”ì²­ì´ ì˜¤ë©´ ì´ê²Œ ì‹¤í–‰ëœë‹¤.
@WebServlet(name = "helloServlet", urlPatterns = "/hello")
public class HelloServlet extends HttpServlet {

    @Override
    protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        System.out.println("HelloServlet.service");
        System.out.println("request = " + request);
        System.out.println("response = " + response);
    }
}
```

- ê²°ê³¼ : `http://localhost:8080/hello`ë¥¼ ìš”ì²­í•˜ë©´
```
HelloServlet.service
request = org.apache.catalina.connector.RequestFacade@47b556db
response = org.apache.catalina.connector.ResponseFacade@4fee490e
```


#### IF) ì—¬ëŸ¬ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ ì–´ë–»ê²Œ ë™ì‘í• ê¹Œ?
![[Pasted image 20221219153959.png]]
- ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ë„ì¤‘ì— ë‹¤ë¥¸ ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ **ë©€í‹°ì“°ë ˆë“œë¡œ ìš”ì²­ì„ ì²˜ë¦¬**í•¨. ì—¬ëŸ¬ ì“°ë ˆë“œë¥¼ ìƒì„±í•´ì„œ ê°™ì€ ì„œë¸”ë¦¿ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ë„ ìˆê³ , ë‹¤ë¥¸ ìš”ì²­ì´ ì˜¤ë©´ ê·¸ë¦¼ê³¼ ê°™ì´ ë‹¤ë¥¸ ì„œë¸”ë¦¿ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ìˆìŒ.

### ì“°ë ˆë“œí’€
#### ì—¬ëŸ¬ ìš”ì²­ë§ˆë‹¤ ì“°ë ˆë“œë¥¼ í• ë‹¹í•´ì„œ ì²˜ë¦¬í• ë•Œì˜ ë¬¸ì œì ì€?
ê´€ë¦¬ì¸¡ë©´
- ë©€í‹°ì“°ë ˆë“œë¥¼ ìœ„í•´ì„œ ì“°ë ˆë“œë¥¼ **ìƒì„±í•˜ëŠ” ë¹„ìš©**ì´ í¼.
- ë‹¤ë¥¸ ì“°ë ˆë“œë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ **ì»¨í…ìŠ¤íŠ¸ ìŠ¤ìœ„ì¹˜ë¡œ ì˜¤ë²„í—¤ë“œ**ë¥¼ ì¼ìœ¼í‚¬ ìˆ˜ ìˆìŒ.
- ì œí•œ ì—†ì´ ì“°ë ˆë“œë¥¼ ìƒì„±í•˜ë‹¤ê°€ **í•˜ë“œì›¨ì–´ì˜ í•œê³„**ë¥¼ ë„˜ì–´ì„œ ì„œë²„ê°€ í„°ì§ˆ ìˆ˜ ìˆìŒ.
![[Pasted image 20221219165711.png]]

ê°œë°œì¸¡ë©´
- ì„œë¸”ë¦¿ ê°ì²´ì•ˆì— **ì¤‘ë³µë˜ëŠ” ì½”ë“œ**ê°€ ë§ì€ ë¬¸ì œì . (=í•¸ë“¤ëŸ¬ì˜ ê³µí†µë¡œì§ ì¤‘ë³µ)
ex) ì»¤í”¼ ì£¼ë¬¸ìœ¼ë¡œ ë³´ëŠ” ì˜ˆì‹œ
![[Pasted image 20221219154757.png]]
 í•´ë‹¹ìŒë£Œë¥¼ ë‹´ë‹¹í•˜ëŠ” ì§ì›ì´ ì£¼ë¬¸ë°›ê³  ìŒë£Œë¥¼ ë§Œë“¤ê³  í¬ì¥í•¨.


#### ì—¬ëŸ¬ ìš”ì²­ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ í•´ê²°ì±…ì€?
â–¶ê´€ë¦¬ì¸¡ë©´
**ì“°ë ˆë“œ í’€ë¡œ ì“°ë ˆë“œë¥¼ ê´€ë¦¬**í•¨.
![[Pasted image 20221219174225.png]]
- ì“°ë ˆë“œ í’€ì— ìƒì„± ê°€ëŠ¥í•œ **ì“°ë ˆë“œì˜ ìµœëŒ€ì¹˜ë¥¼ ê´€ë¦¬**í•œë‹¤. í†°ìº£ì€ ìµœëŒ€ 200ê°œ ê¸°ë³¸ ì„¤ì • (ë³€ê²½ ê°€ëŠ¥)
- ì“°ë ˆë“œê°€ í•„ìš”í•˜ë©´, ì´ë¯¸ ìƒì„±ë˜ì–´ ìˆëŠ” ì“°ë ˆë“œë¥¼ **ì“°ë ˆë“œ í’€ì—ì„œ êº¼ë‚´ì„œ ì‚¬ìš©**í•œë‹¤. ì‚¬ìš©ì„ ì¢…ë£Œí•˜ë©´ ì“°ë ˆë“œ í’€ì— í•´ë‹¹ ì“°ë ˆë“œë¥¼ **ë°˜ë‚©**í•œë‹¤. 
- ìµœëŒ€ ì“°ë ˆë“œê°€ ëª¨ë‘ ì‚¬ìš©ì¤‘ì´ì–´ì„œ ì“°ë ˆë“œ í’€ì— ì“°ë ˆë“œê°€ ì—†ìœ¼ë©´? ê¸°ë‹¤ë¦¬ëŠ” ìš”ì²­ì€ ê±°ì ˆí•˜ê±°ë‚˜ íŠ¹ì • ìˆ«ìë§Œí¼ë§Œ ëŒ€ê¸°í•˜ë„ë¡ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.
- ì“°ë ˆë“œê°€ ë¯¸ë¦¬ ìƒì„±ë˜ì–´ ìˆìœ¼ë¯€ë¡œ, ì“°ë ˆë“œë¥¼ **ìƒì„±í•˜ê³  ì¢…ë£Œí•˜ëŠ” ë¹„ìš©(CPU)ì´ ì ˆì•½**ë˜ê³ , **ì‘ë‹µ ì‹œê°„ì´ ë¹ ë¥´ë‹¤.** 
- ìƒì„± ê°€ëŠ¥í•œ ì“°ë ˆë“œì˜ ìµœëŒ€ì¹˜ê°€ ìˆìœ¼ë¯€ë¡œ ë„ˆë¬´ ë§ì€ ìš”ì²­ì´ ë“¤ì–´ì™€ë„ **ê¸°ì¡´ ìš”ì²­ì€ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬**í•  ìˆ˜ ìˆë‹¤.

â–¶ê°œë°œ ì¸¡ë©´
![[Pasted image 20221219154811.png]]
 ì£¼ë¬¸í•˜ê³  ê³„ì‚°í•˜ê³  í¬ì¥í•˜ëŠ” **ê³µí†µì ì¸ ì„œë¹„ìŠ¤ ë¶€ë¶„**ì„ ì²˜ë¦¬í•˜ëŠ” ì§ì›ì„ ë”°ë¡œ ë‘ .
 ì¦‰, **ì†ë‹˜ì˜ ìš”ì²­ì„ ì²˜ë¦¬**í•  ìˆ˜ ìˆëŠ” ë¡œì§ì„ ë”°ë¡œ ë§Œë“œëŠ” ê²ƒì´ **ë””ìŠ¤íŒ¨ì²˜ì„œë¸”ë¦¿**.

ê·¸ë¦¬ê³  ì¢€ë” ë‚˜ì•„ê°€ì„œ, ì‚¬ëŒì´ ë§ì•„ì ¸ ì£¼ë¬¸ ë°›ëŠ” ì§ì›ì´ ê°ë‹¹í•˜ì§€ ëª»í•˜ë©´ ì—­í• ë¶„ë‹´ì„ ì¶”ê°€ë¡œ í•´ì•¼í•¨.
![[Pasted image 20221219160012.png]]
 ë³µì¡í•´ì§„ê²ƒ ê°™ì§€ë§Œ ì´ì œ ìŠ¤í”„ë§ì„ ì´ìš©í•´ì„œ ë…¸ë€ìƒ‰ ë¶€ë¶„ë§Œ ì½”ë“œë¡œ êµ¬í˜„í•˜ë©´ ë˜ê³ , ë‚˜ë¨¸ì§€ ë¶€ë¶„ì€ ë””ìŠ¤íŒ¨ì²˜ ì„œë¸”ë¦¿ì´ ëŒ€ì‹  í•´ì¤Œ.

ì´ì œ ì „ì²´ì ìœ¼ë¡œ ë³´ë©´, ì›¹ì„œë²„ê°€ ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€ ì´í•´í•  ìˆ˜ ìˆìŒ.
![[Pasted image 20221217160627.png]]


## ì„œë¸”ë¦¿ ì½”ë“œ
#### (ì½”ë“œ) request/response ì¶œë ¥í•˜ê¸°
```java
@WebServlet(name = "helloServlet", urlPatterns = "/hello")  
public class HelloServlet extends HttpServlet {  
  
    @Override  
    protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {  
  
        System.out.println(">>HelloServlet.service");  
        System.out.println(">>request = " + request);  
        System.out.println(">>response = " + response);  
  
        String username = request.getParameter("username");  
        System.out.println(">>username = " + username);  
  
        response.setContentType("text/plain");  
        response.setCharacterEncoding("utf-8");  
        response.getWriter().write(">>hello " + username);  
  
    }  
}
```

- ì¶œë ¥ -> `http://localhost:8080/hello?username=world`ë¥¼ ì…ë ¥í•˜ë©´
```java
>>HelloServlet.service
>>request = org.apache.catalina.connector.RequestFacade@34c55d2f
>>response = org.apache.catalina.connector.ResponseFacade@1512670c
>>username = world
```


#### HttpServletRequest ì„¤ëª…
- HttpServletRequestë€?
	HTTP ìš”ì²­ ë©”ì‹œì§€ë¥¼ í¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ê°œë°œì ëŒ€ì‹ ì— **HTTP ìš”ì²­ ë©”ì‹œì§€ë¥¼ íŒŒì‹±í•œ ê²°ê³¼ë¥¼ HttpServletRequestì— ë‹´ëŠ”ë‹¤.**

- HttpServletRequest ê¸°ëŠ¥
1) **ì„ì‹œ ì €ì¥ì†Œ ê¸°ëŠ¥** : í•´ë‹¹ HTTP ìš”ì²­ì´ ì‹œì‘ë¶€í„° ëë‚ ë•Œ ê¹Œì§€ ìœ ì§€ë˜ëŠ” ì„ì‹œ ì €ì¥ì†Œ ê¸°ëŠ¥
ì €ì¥ : `request.setAttribute(name, value)`
ì¡°íšŒ : `request.getAttribute(name)`

2) **ì„¸ì…˜ ê´€ë¦¬ ê¸°ëŠ¥**
`request.getSession(create: true)`


#### (ì½”ë“œ)HttpServletRequestì‚¬ìš©í•œ Header ì¡°íšŒ
- HTTP ìš”ì²­ ë©”ì‹œì§€ ì˜ˆì‹œ
```
POST /save HTTP/1.1 
Host: localhost:8080
Content-Type: application/x-www-form-urlencoded 

username=kim&age=20
```

- HTTP ë©”ì‹œì§€ì˜ start-line, header ì •ë³´ ì¡°íšŒ ë°©ë²• (í•„ìš”í•œ ì •ë³´ ì‚¬ìš©í•˜ëŠ” ë°©ë²• í•„ìš”í• ë•Œ ì°¾ì•„ë³´ê¸°)
```java
@WebServlet(name = "requestHeaderServlet", urlPatterns = "/request-header")  
public class RequestHeaderServlet extends HttpServlet {  
  
    @Override  
    protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {  
        printStartLine(request);  
        printHeaders(request);  
        printHeaderUtils(request);  
        printEtc(request);  
    }  
  
    private void printStartLine(HttpServletRequest request) {  
        System.out.println("--- REQUEST-LINE - start ---");  
  
        System.out.println("request.getMethod() = " + request.getMethod()); //GET  
        System.out.println("request.getProtocal() = " + request.getProtocol()); //HTTP/1.1  
        System.out.println("request.getScheme() = " + request.getScheme()); //http  
        // http://localhost:8080/request-header       
        System.out.println("request.getRequestURL() = " + request.getRequestURL());  
        // /request-test  
        System.out.println("request.getRequestURI() = " + request.getRequestURI());  
        //username=hi  
        System.out.println("request.getQueryString() = " + request.getQueryString());  
        System.out.println("request.isSecure() = " + request.isSecure()); //https ì‚¬ìš© ìœ ë¬´  
        System.out.println("--- REQUEST-LINE - end ---");  
        System.out.println();  
    }  
  
    //Header ëª¨ë“  ì •ë³´  
    private void printHeaders(HttpServletRequest request) {  
        System.out.println("--- Headers - start ---");  
  
/*  
        Enumeration<String> headerNames = request.getHeaderNames();        while (headerNames.hasMoreElements()) {            String headerName = headerNames.nextElement();            System.out.println(headerName + ": " + headerName);        }*/  
  
        request.getHeaderNames().asIterator()  
                .forEachRemaining(headerName -> System.out.println(headerName + ": " + headerName));  
  
        System.out.println("--- Headers - end ---");  
        System.out.println();  
    }  
  
    private void printHeaderUtils(HttpServletRequest request) {  
        System.out.println("--- Header í¸ì˜ ì¡°íšŒ start ---");  
        System.out.println("[Host í¸ì˜ ì¡°íšŒ]");  
        System.out.println("request.getServerName() = " + request.getServerName()); //localhost  
        System.out.println("request.getServerPort() = " + request.getServerPort()); //8080 
        System.out.println();  
  
        System.out.println("[Accept-Language í¸ì˜ ì¡°íšŒ]");  
        request.getLocales().asIterator()  
                .forEachRemaining(locale -> System.out.println("locale = " + locale));  
        System.out.println("request.getLocale() = " + request.getLocale());  
        System.out.println();  
  
        System.out.println("[cookie í¸ì˜ ì¡°íšŒ]");  
        if (request.getCookies() != null) {  
            for (Cookie cookie : request.getCookies()) {  
                System.out.println(cookie.getName() + ": " + cookie.getValue());  
            }  
        }  
        System.out.println();  
  
        System.out.println("[Content í¸ì˜ ì¡°íšŒ]");  
        System.out.println("request.getContentType() = " + request.getContentType());  
        System.out.println("request.getContentLength() = " + request.getContentLength());  
        System.out.println("request.getCharacterEncoding() = " + request.getCharacterEncoding());  
  
        System.out.println("--- Header í¸ì˜ ì¡°íšŒ end ---");  
        System.out.println();  
    }  
  
    //ê¸°íƒ€ ì •ë³´  
    private void printEtc(HttpServletRequest request) {  
        System.out.println("--- ê¸°íƒ€ ì¡°íšŒ start ---");  
  
        System.out.println("[Remote ì •ë³´]");  
        System.out.println("request.getRemoteHost() = " + request.getRemoteHost()); //  
        System.out.println("request.getRemoteAddr() = " + request.getRemoteAddr()); //  
        System.out.println("request.getRemotePort() = " + request.getRemotePort()); //  
        System.out.println();  
  
        System.out.println("[Local ì •ë³´]");  
        System.out.println("request.getLocalName() = " + request.getLocalName()); //  
        System.out.println("request.getLocalAddr() = " + request.getLocalAddr()); //  
        System.out.println("request.getLocalPort() = " + request.getLocalPort()); //  
  
        System.out.println("--- ê¸°íƒ€ ì¡°íšŒ end ---");  
        System.out.println();  
    }  
}
```


#### HTTP ìš”ì²­ ë©”ì‹œì§€ ë°©ë²•
1) GET - ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° 
- `/url?username=hello&age=20 `
- ë©”ì‹œì§€ ë°”ë”” ì—†ì´, URLì˜ ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ì— ë°ì´í„°ë¥¼ í¬í•¨í•´ì„œ ì „ë‹¬ 
- ì˜ˆ) ê²€ìƒ‰, í•„í„°, í˜ì´ì§•ë“±ì—ì„œ ë§ì´ ì‚¬ìš©í•˜ëŠ” ë°©ì‹

2) POST - HTML Form 
- content-type: application/x-www-form-urlencoded 
- ë©”ì‹œì§€ ë°”ë””ì— ì¿¼ë¦¬ íŒŒë¦¬ë¯¸í„° í˜•ì‹ìœ¼ë¡œ ì „ë‹¬ username=hello&age=20 
- ì˜ˆ) íšŒì› ê°€ì…, ìƒí’ˆ ì£¼ë¬¸, HTML Form ì‚¬ìš© 

3) HTTP message bodyì— ë°ì´í„°ë¥¼ ì§ì ‘ ë‹´ì•„ì„œ ìš”ì²­ 
- HTTP APIì—ì„œ ì£¼ë¡œ ì‚¬ìš©, JSON, XML, TEXT
- ë°ì´í„° í˜•ì‹ì€ ì£¼ë¡œ JSON ì‚¬ìš© POST, PUT, PATCH


#### HttpServletResponse ì„¤ëª…
WASëŠ” ì–´ë–¤ í´ë¼ì´ì–¸íŠ¸ê°€ ìš”ì²­ì„ ë³´ëƒˆëŠ”ì§€ ì•Œê³  ìˆê³ , í•´ë‹¹ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì‘ë‹µì„ ë³´ë‚´ê¸° ìœ„í•œ HttpServletResponse ê°ì²´ë¥¼ ìƒì„±í•˜ì—¬ servletì—ê²Œ ì „ë‹¬


#### (ì½”ë“œ)HttpServletResponseì‚¬ìš©í•œ Header ì¡°íšŒ
```java
@WebServlet(name = "responseHeaderServlet", urlPatterns = "/response-header")  
public class ResponseHeaderServlet extends HttpServlet {  
  
    @Override  
    protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {  
        //[status-line]  
        response.setStatus(HttpServletResponse.SC_OK);  
  
        //[response-headers]  
        response.setHeader("Content-Type", "text/plain;charset=utf-8");  
        response.setHeader("Cache-Control", "no-cache, no-store, must-revalidate");  
        response.setHeader("Pragma", "no-cache");  
        response.setHeader("my-header", "hello");  
  
        //[Header í¸ì˜ ë©”ì„œë“œ]  
//        content(response);  
//        cookie(response);  
//        redirect(response);  
  
  
        PrintWriter writer = response.getWriter();  
        writer.println("ok");  
    }  
  
    private void content(HttpServletResponse response) {  
        //Content-Type: text/plain;charset=utf-8  
        //Content-Length: 2//        response.setHeader("Content-Type", "text/plain;charset=utf-8");  
        response.setContentType("text/plain");  
        response.setCharacterEncoding("utf-8");  
//        response.setContentLength(2); //(ìƒëµì‹œ ìë™ ìƒì„±)  
    }  
  
    private void cookie(HttpServletResponse response) {  
        //Set-Cookie: myCookie=good; Max-Age=600;  
        //response.setHeader("Set-Cookie", "myCookie=good; Max-Age=600");        Cookie cookie = new Cookie("myCookie", "good");  
        cookie.setMaxAge(600); //600ì´ˆ  
        response.addCookie(cookie);  
    }  
  
    private void redirect(HttpServletResponse response) throws IOException {  
        //Status Code 302  
        //Location: /basic/hello-form.html  
//        response.setStatus(HttpServletResponse.SC_FOUND); //302  
//        response.setHeader("Location", "/basic/hello-form.html");  
        response.sendRedirect("/basic/hello-form.html");  
    }  
}
```

#### HTTP ì‘ë‹µ ë©”ì‹œì§€ ë°©ë²•
1) ë‹¨ìˆœ í…ìŠ¤íŠ¸ 
![[Pasted image 20221219235402.png]]
2) HTML ì‘ë‹µ 
![[Pasted image 20221219235505.png]]
3) HTTP API
- MessageBody JSON ì‘ë‹µ
![[Pasted image 20221219235514.png]]

