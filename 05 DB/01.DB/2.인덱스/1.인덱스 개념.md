[[Database] 인덱스(index)란? - MangKyu's Diary (tistory.com)](https://mangkyu.tistory.com/96)
[데이터베이스 인덱스 (2) - 클러스터형 인덱스와 비클러스터형 인덱스 (hudi.blog)](https://hudi.blog/db-clustered-and-non-clustered-index/)
[[10분 테코톡] 라라, 제로의 데이터베이스 인덱스 - YouTube](https://www.youtube.com/watch?v=edpYzFgHbqs)

#인덱스개념


----

## 인덱스란?✔
**추가적인 쓰기 작업과 저장 공간을 활용**하여 데이터베이스 테이블의 **검색 속도를 향상**시키기 위한 **자료구조**이다.


## 클러스터형 인덱스란?✔
[프라이머리 키(PK, Primary Key)에 대해 쉽고 완벽하게 이해하기 - MangKyu's Diary](https://mangkyu.tistory.com/285)
▶ 실생활 예시
:자동 정렬되어 있는 사전
![[Pasted image 20230809150616.png]]

▶클러스터형 예시
:리프페이지에 **데이터의 값**이 위치함
![[Pasted image 20230810221649.png]]
- **테이블 전체가 정렬된 인덱스가 되는 방식**의 인덱스 종류이다. **실제 데이터와 무리(cluster)를 지어 인덱싱** 되므로 클러스터형 인덱스라고 부른다.
- 클러스터형 인덱스는 **테이블당 하나**만 생성할 수 있다. (PK의미)


## 클러스터형의 장/단점은?✔
▶장점
- 데이터 접근성 향상
데이터가 **순서대로 정렬되어 있기 때문에, PK와 관련된 범위 검색**을 할때 빠르다.

▶단점
- 데이터 삽입/수정의 부하
기존 PK가 정렬되어 있는 데, 인덱스 정렬 기준에 의해 **중간에 INSERT해야한다면 시간이 오래걸림**. 그래서 Auto_Increment를 대부분 사용하고, 이메일과 아이디, 주민번호를 PK를 하지 않음.


## 비클러스터형 인덱스란?✔
▶실생활예시
:특정 단어를 참조하기 위한 색인
![[Pasted image 20230809150406.png]]

▶비클러스터형 예시
:리프페이지에 **데이터의 주소**가 위치함
![[Pasted image 20231107172539.png]]
- 비클러스터형 인덱스는 보조 인덱스(Secondary Index)라고도 불린다.
- 클러스터형 인덱스와 다르게 **데이터 페이지를 물리적으로 테이블을 정렬하지 않는다.**
- 단, **인덱스 페이지를 정렬된 별도의 인덱스 페이지를 생성하고 관리**한다.
- 데이터에 접근하기 위해서는 **인덱스 페이지에서 데이터 페이지로 이동하는 하나의 과정이 추가**된다. (약 10%)


## 클러스터형의 장/단점은?⛏
▶장점 
- 유연성
비클러스터형 인덱스는 레코드의 물리적인 위치와 상관없이 구성되므로, 테이블의 여러 열에 대해 **여러 개의 비클러스터형 인덱스를 생**성할 수 있습니다. 이로 인해 다양한 쿼리에 대응할 수 있는 유연성을 제공합니다.


▶단점
- 공간 사용량
비클러스터형 인덱스는 별도의 공간에 저장되므로, 테이블 데이터와 별개의 **추가 공간을 사용**합니다. 따라서 많은 수의 비클러스터형 인덱스를 생성하면 디스크 공간의 사용량이 증가합니다.


## 클러스터형 인덱스와 비클러스터형 인덱스의 혼합✔
![[Pasted image 20231107172458.png]]
- 순서는 **비클러스터형 인덱스 -> 클러스터형 인덱스**
- 비클러스터형 인덱스는 `데이터 페이지 번호 + #오프셋` 대신 **클러스터형 인덱스에 대한 컬럼 값**을 갖는다.


## 왜 비클러스터형 인덱스에서 PK값을 가지고 있는 것일까?
클러스터형 인덱스는 정렬되어 있기 때문에, **데이터가 추가, 수정, 삭제 되면 테이블 데이터의 페이지 번호와 페이지 내 순서가 모두 변경**된다.


## 인덱스를 어떤 기준으로 나누는 거지?
1. 숫자/날짜 타입: 대부분의 데이터베이스 시스템에서는 숫자/날짜 타입의 인덱스를 **숫자의 크기 순서**대로 정렬하여 저장합니다. 따라서 특정 숫자를 찾거나, 숫자의 범위를 지정하여 검색할 때 인덱스를 활용할 수 있습니다.

2. 문자열 타입: 문자열 타입의 인덱스는 앞서 설명드린 것처럼 **사전 순서로 정렬**하여 저장합니다. 따라서 특정 문자열을 찾거나, 문자열의 앞부분이 일치하는 데이터를 찾을 때 인덱스를 활용할 수 있습니다.

3. 복합 인덱스: 하나 이상의 필드를 포함하는 인덱스를 복합 인덱스(Composite Index)라고 합니다. 복합 인덱스는 여러 필드에 대한 검색을 동시에 빠르게 수행할 수 있습니다.


## 인덱스를 사용하면 좋은 경우는?✔
- 규모가 큰 테이블
- INSERT, UPDATE, DELETE가 자주 발생하지 않는 컬럼
- JOIN이나 WHERE 또는 ORDER BY에 자주 사용되는 컬럼
- 데이터의 중복도가 낮은 컬럼(카디널리티가 낮은 것)