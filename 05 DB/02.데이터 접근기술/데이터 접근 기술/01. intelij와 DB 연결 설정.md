
#DB초기설정, #Mysql초기설정 , #H2초기설정

----

# MySQL
[MYSQL 명령문 정리](https://www.ibm.com/docs/ko/netcoolomnibus/8.1?topic=reference-add-column-command)

## 1. 데이터베이스 생성
MySQL 클라이언트를 사용하여 MySQL 서버에 접속합니다. 명령 프롬프트에서 `mysql` 명령어를 실행
```sql
CREATE DATABASE 데이터베이스 이름;
```


## 2. 데이터베이스 확인 
데이터베이스가 성공적으로 생성되었는지 확인후 사용하기
```sql
SHOW DATABASES
USE 데이터베이스 이름
```


## 3. IntelliJ IDEA에 mysql 의존성 추가
Gradle과 같은 의존성 관리 도구를 사용하여 JDBC 드라이버를 프로젝트에 추가
```gradle
dependencies {  
    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'  
    runtimeOnly 'com.mysql:mysql-connector-j'  
}
```


## 4. MySQL 데이터베이스를 IntelliJ IDEA와 연결

#### Data Source Properties 설정
개발 중에 IDE 내부에서 **데이터베이스와 상호작용하고 SQL 쿼리를 실행하여 결과를 확인하는 데 사용**됩니다. 주로 개발 및 디버깅 과정에서 유용합니다.
![[Pasted image 20231024142050.png]]

![[Pasted image 20231024143424.png]]
- Host: MySQL 서버 호스트 이름 또는 IP 주소
- Port: MySQL 서버 포트 번호 (일반적으로 3306)
- Database: 생성한 MySQL 데이터베이스 이름
- User 및 Password: MySQL 서버에 액세스할 수 있는 사용자 계정 정보


#### application.yml 설정
[Spring Boot 초기 데이터 설정 방법 정리(data.sql, schema.sql) (tistory.com)](https://wildeveloperetrain.tistory.com/228)
[Spring 데이터베이스 초기화 (velog.io)](https://velog.io/@wlsh44/Spring-%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4-%EC%B4%88%EA%B8%B0%ED%99%94)
[Mockaroo - Random Data Generator and API Mocking Tool](https://www.mockaroo.com/)
[Spring Boot With H2 Database | Baeldung](https://www.baeldung.com/spring-boot-h2-database)

**애플리케이션 배포 및 운영 단계에서 필요한 연결 정보 값을 관리**
```yml
spring:  
  h2:  
    console:  
      enabled: true  # H2 데이터베이스 콘솔을 활성화합니다.
      
  jpa:  
    show-sql: true  # SQL 쿼리를 콘솔에 출력
    properties:  
      hibernate:  
        format_sql: false  # SQL 쿼리의 형식을 포맷팅하지 않습니다.
    generate-ddl: false  # DDL 생성을 자동화하지 않습니다.
    hibernate:  
	  # Hibernate가 애플리케이션 실행 시점에 테이블을 자동으로 생성합니다.
      ddl-auto: create  
	# script 파일이 hibernate 초기화 이후 동작하게 하기 위한 옵션
    defer-datasource-initialization: true  
  datasource:  
    url: jdbc:mysql://localhost:3306/[생성한 DB이름]  
    username: root  
    password: [비밀번호]
```


# H2 설정
[IntelliJ 에서 embedded H2에 연결하기 (tistory.com)](https://javanitto.tistory.com/37)

## Intelij에 의존성 추가하기
- 의존성 추가하기(build.gradle)
```gradle
dependencies {
	runtimeOnly 'com.h2database:h2'
}
```


## H2 데이터베이스 서버 실행
- 파일 생성 방법
jdbc:h2:~/test (최초 한번) 이후부터는 jdbc:h2:tcp://localhost/~/test 이렇게 접속
![[Pasted image 20231025150513.png]]

## 테이블 생성하기
``` SQL
drop table member if exists cascade;

create table member (
	 member_id varchar(10),
	 money integer not null default 0,
	 primary key (member_id)
);

insert into member(member_id, money) values ('hi1',10000);
insert into member(member_id, money) values ('hi2',20000);
```

## 초기데이터 넣기
[Mockaroo - Random Data Generator and API Mocking Tool | JSON / CSV / SQL / Excel](https://www.mockaroo.com/)