#### ğŸ“Œì •ë ¬ â†’ ì´ë¦„ì˜ ì—­ìˆœìœ¼ë¡œ ì •ë ¬í•˜ê¸°
```java
@Test  
void username_sort(){  
    //ì´ë¦„ì—­ìˆœìœ¼ë¡œ ì¬ì •ë ¬  
    List<User> name = userRepository.findAll(Sort.by(Sort.Direction.DESC, "name"));  
    name.forEach(System.out::println);  
}
```

```
User(id=3, name=sophia, email=sophia@slowcampus.com, ...)
User(id=1, name=martin, email=martin@fastcampus.com, ...)
User(id=5, name=martin, email=martin@another.com, ...)
User(id=4, name=james, email=james@slowcampus.com, ...)
User(id=2, name=dennis, email=dennis@fastcampus.com, ...)
```

#### ğŸ“Œì›í•˜ëŠ” db ì„ íƒí•˜ê¸°

- findById
```java
@Test  
void username_get2(){  
    //ì´ë¦„ ì„ íƒí•˜ê¸°  
    User user = userRepository.findById(1L).orElse(null);  
    System.out.println(user);  
}
```

```
User(id=1, name=martin, email=martin@fastcampus.com, ...)
```

- findAllByIdì—ì„œ ì›í•˜ëŠ” PKë¡œ ì°¾ê¸°
```java
@Test  
void username_select(){  
    //ì´ë¦„ ì„ íƒí•˜ê¸°  
    List<User> name = userRepository.findAllById(List.of(1L,3L,5L));  
    name.forEach(System.out::println);  
}
```

```
User(id=1, name=martin, email=martin@fastcampus.com, ...)
User(id=3, name=sophia, email=sophia@slowcampus.com, ...)
User(id=5, name=martin, email=martin@another.com, ...)
```


#### ğŸ“Œë°ì´í„° ì´ ê°œìˆ˜ ì¡°íšŒ
- count
```java
@Test  
void userRepository_count(){  
    Long count = userRepository.count();  
    System.out.println(count);  //5
}
```


#### ğŸ“Œë°ì´í„° ì¡´ì¬ ì¡°íšŒ
- existsById
```java
@Test  
void userExist(){  
    boolean exists = userRepository.existsById(1L);  
    System.out.println(exists);  //true
}
```

#### ğŸ“Œë°ì´í„° ì‚­ì œí•˜ê¸°
- delete
```java
@Test  
void userDelete(){  
	userRepository.delete(userRepository.findById(1L).orElse(null));  
	userRepository.delete(userRepository.findById(1L).orElse(null));  
//  userRepository.delete(userRepository.findById(1L).orElseThrow(() -> new RuntimeException()));  
//  userRepository.delete(userRepository.findById(1L).orElseThrow(RuntimeException::new));  
}
```

```
IllegalArgumentException: Entity must not be null!
```

- deleteAllInBatch
```java
@Test  
void userAllDelete(){  
    userRepository.deleteAllInBatch();  
}
```
[JPAì—ì„œ ëŒ€ëŸ‰ì˜ ë°ì´í„°ë¥¼ ì‚­ì œí• ë•Œ ì£¼ì˜í•´ì•¼í•  ì ](https://jojoldu.tistory.com/235)

#### ğŸ“ŒPage ê¸°ëŠ¥ 
- UserRepositoryë¥¼ 3í˜ì´ì§€ë¡œ ë‚˜ëˆ„ê³  1í˜ì´ì§€ ì¶œë ¥
```java
@Test  
void userPaging(){  
    Page<User> users = userRepository.findAll(PageRequest.of(1, 3));  
    System.out.println("page : " + users);  
    System.out.println("totalElements : " + users.getTotalElements());  
    System.out.println("totalPage : " + users.getTotalPages());  
    System.out.println("numberOfElements : " + users.getNumberOfElements());  
    System.out.println("sort : " + users.getSort());  
    System.out.println("size : " + users.getSize());  
  
    users.getContent().forEach(System.out::println);  
}
```

```
page : Page 2 of 2 containing com.example.jpatest.domain.User instances
totalElements : 5
totalPage : 2
numberOfElements : 2
sort : UNSORTED
size : 3
User(id=4, name=james, email=james@slowcampus.com, ...)
User(id=5, name=martin, email=martin@another.com, ...)
```


#### ğŸ“Œë§¤ì¹­í•´ì„œ ì°¾ê¸°
- ExampleMatcherì—ì„œ ì´ë©”ì¼ ë§ˆì§ë§‰ ì¼ì¹˜í•˜ëŠ”ê²½ìš°
```java
@Test  
void userExample(){  
    ExampleMatcher matcher = ExampleMatcher.matching()  
            .withIgnorePaths("name")  
            .withMatcher("email", endsWith());  
  
    Example<User> example = Example.of(new User("ma", "@fastcampus.com"), matcher);  
     userRepository.findAll(example).forEach(System.out::println);  
}
```

```
User(id=1, name=martin, email=martin@fastcampus.com, createdAt=null, updatedAt=null)
User(id=2, name=dennis, email=dennis@fastcampus.com, createdAt=null, updatedAt=null)
```

- ExampleMatcherì—ì„œ ì´ë©”ì¼ ì¤‘ê°„ì— ì¼ì¹˜í•˜ëŠ”ê²½ìš°
```java
@Test  
void userExample2(){  
    User user = new User();  
    user.setEmail("slow");  
  
    ExampleMatcher matcher = ExampleMatcher.matching().withMatcher("email", contains());  
    Example<User> example1 = Example.of(user, matcher);  
  
    userRepository.findAll(example1).forEach(System.out::println);  
}
```

```
User(id=3, name=sophia, email=sophia@slowcampus.com, createdAt=null, updatedAt=null)
User(id=4, name=james, email=james@slowcampus.com, createdAt=null, updatedAt=null)
```

#### ğŸ“ŒDB ì—…ë°ì´íŠ¸
```java
@Test  
void userUpdate(){  
    userRepository.save(new User("david", "david@fastcampus.com"));  
  
    User user = userRepository.findById(1L).orElseThrow(RuntimeException::new);  
    user.setEmail("new@fastcampus.com");  
    userRepository.save(user);  //saveë¥¼ í•´ì¤˜ì•¼ updateê°€ ëŒ
  
    userRepository.findAll().forEach(System.out::println);  
}
```

```
User(id=1, name=martin, email=new@fastcampus.com, createdAt=null, updatedAt=null)
User(id=2, name=dennis, email=dennis@fastcampus.com, createdAt=null, updatedAt=null)
User(id=3, name=sophia, email=sophia@slowcampus.com, createdAt=null, updatedAt=null)
User(id=4, name=james, email=james@slowcampus.com, createdAt=null, updatedAt=null)
User(id=5, name=martin, email=martin@another.com, createdAt=null, updatedAt=null)
User(id=6, name=david, email=david@fastcampus.com, createdAt=null, updatedAt=null)
```

