## 5.점프 서버 준비하기  
#### 5장에서 만들고자 하는것은?
**네트워크를 안전하게 보호하면서 리소스를 생성할 수 있도록 점프 서버를 준비**해야함.
![image](https://github.com/sprae114/Study/assets/52237184/a2df43e2-0e61-40c2-bac1-cb9beed0ce1f)


#### 점프 서버란?
**모든 리소스에 접속할 수 있는 입구 역할**임. 리소스의 접속은 제한된 **관리자만 수행**할 수 있어야함. 그래서 모든 리소스에 접속할 수 있는 점프 서버를 준비하고, 해당 서버를 경유해야만 각 리소스에 접근할 수 있는 방식을 많이 사용함.

- 점프 서버는 EC2를 이용해서 구축하고 SSH를 이용해 접속함. 
- 리소스 통로 의외의 용도는 없음. 
- SSH을 경유할려면 비밀키와 공유 키라는 키페어를 준비해야함.
![image](https://github.com/sprae114/Study/assets/52237184/47ab267b-d850-4468-aabd-02622dbd13a7)


#### SSH 접속에 필요한 키 페어 준비하기
- 키는 작업자의 고유한 이름으로 저장하자.
- 윈도우 환경에서는 .pem 형식으로 저장하자
![image](https://github.com/sprae114/Study/assets/52237184/694b9de7-b0d3-423e-8280-0165006fc17f)


#### 점프 서버 생성 내용
![image](https://github.com/sprae114/Study/assets/52237184/b3aa986f-8d3b-452b-acb4-b9a70603f11a)

  
## 6.웹 서버 준비하기  
#### 6장에서 만들고자 하는것은?
웹을 제공하는 리소스 만들기
![image](https://github.com/sprae114/Study/assets/52237184/24e14ba3-4b86-4a6d-ab58-cb8cc04f8101)


#### 웹 서버란?
브라우저나 웹으로부터 **요청을 받아서 HTML이나 JSON 등의 응답을 반환하는 역할**.
![image](https://github.com/sprae114/Study/assets/52237184/803d82f5-7885-45a2-9398-c15edadd2515)


#### 웹 서버 생성 내용
![image](https://github.com/sprae114/Study/assets/52237184/aa1b67b9-eda9-4ca2-86a5-23ae721463ab)


#### 웹 서버 VS 점프 서버
▶점프서버
- **시스템 관리자**가 가끔 이용함
- **인터넷에 직접 연결됌**

▶웹서버
- 웹 **서비스 사용자**가 항상 연결을 시도함.
- **로드 밸린서를 통해 간접 연결**됌.
![image](https://github.com/sprae114/Study/assets/52237184/2ea4825c-d9a6-4fd9-8302-b8d247475c9c)


#### 기존 SSH 연결의 문제점은?
기존에는 EC2 인스턴스를 생성하고 SSH 명령을 통해서 연결을 확인했다. 하지만 연결할 것이 많아진다면 다음과 같은 문제점이 있다.
1) SSH 명령어를 N번 입력해야함.
2) 비밀 키 파일을 점프 서버에 전송해야함. (보안상 위험함)


#### 다단계로 접속 하기
점프 서버 1대와 웹 서버 2대 총 3대의 서버를 설정하는 파일을 만듦.
![image](https://github.com/sprae114/Study/assets/52237184/058a7777-0234-4188-bc4a-a830f61bab34)
- Host 항목 : 연결할 서버 이름
- Hostname 항목 : 연결할 서버의 IP주소 또는 서버 이름
- User 항목 : 연결할 때의 사용자 이름 지정함.
- IdentityFile 항목 : 비밀 키 파일의 경로를 지정함.
- ProxyCommand 항목 : 경우하는 점프 서버의 정보를 지정함. `ssh.exe {점프서버의 별명} -W %h:%p` 형식

이후, ssh 명령어 `ssh {서버별명}` 을 통해서 연결함.
![image](https://github.com/sprae114/Study/assets/52237184/fc8d7644-bdf3-49cf-a02a-bdf4d9e87452)

  
## 7.로드 밸런서 준비하기
#### 7장에서 만들고자 하는것은?
웹서버는 아직 인터넷에 공개되지 않은 상태임. **로드 밸린서를 이용해 브라우저에서 애플리케이션을 열람**할 수 있도록 해보자.
![image](https://github.com/sprae114/Study/assets/52237184/97fb5013-8028-4c0f-9e51-4fa051441130)


#### 로드 밸런서란? 
사용자가 늘어나게 되면 1대의 웹 서버로는 요청을 처리할 수 없는 시점이 온다. 그래서 **웹 서버를 여러 대 준비하고 트래픽을 분산**할 수 있는 기술이 필요함. 


#### 로드 밸런서의 역할은?
![image](https://github.com/sprae114/Study/assets/52237184/97ff0d32-4534-4e10-bf82-4ded19cede5a)

1) **요청분산**
인터넷으로부터 전송된 요청을 여러 웹 서보에 균등하게 분산하는 것.
![image](https://github.com/sprae114/Study/assets/52237184/c91152f6-5b56-49f5-a9f7-f6bba77ccec0)

2) **SSL 처리**
송수신하는 데이터를 암호화/복호화하는 SSL처리.

3) **부정 요청 대응**
웹 서버에 올바른 요청이 아닌, 예상치 못한 작동을 일으키는 부정한 요청에 대응함.


#### AWS에서 제공하는 로드 밸런서 종류는?
▶Application Load Balancer(**ALB**)
**HTTP, HTTPS 이용한 접근을 분산**하는 데 최적화된 로드 밸린서임. SSL처리를 수행하거나 URL 패턴과 같은 분산 대상지를 바꾸는 등 고도의 기능을 제공함

▶Network Load Balancer(**NLB**)
기본적인 분산처리 기능만 제공하지만, **다양한 프로토콜**(EX 양방향 통신)에 대응하는 로드 밸린서임.
![image](https://github.com/sprae114/Study/assets/52237184/35f73e57-0550-4be1-9864-90e608c7c110)


#### 로드 밸런서를 이용한 요청 라우팅이란?
로드 밸런서가 외부에서 들어오는 클라이언트 요청을 받고, 이를 내부 웹 서버로 안전하게 전달하기 위해 **프로토콜과 포트 번호를 변환하는 역할을 수행**한다는 것을 의미합니다.

로드 밸런서는 클라이언트로부터 요청을 수신하고 이를 여러 백엔드 서버로 확산시키는 역할을 합니다. 이 과정에서 로드 밸런서가 다음과 같은 기능을 수행합니다:

1. 외부 클라이언트가 사용하는 특정 프로토콜(HTTP, HTTPS 등) 및 포트 번호(예: 80, 443)로 요청을 수신합니다.
2. 로드 밸런서는 요청을 내부 웹 서버로 전달하기 전에, 필요한 경우 프로토콜과 포트 번호를 변환합니다. 예를 들면, 클라이언트로부터 HTTPS를 통한 요청을 받은 로드 밸런서는 내부 웹 서버와 통신 시 HTTP를 사용할 수 있습니다.

이렇게 함으로써 로드 밸런서는 보안성을 유지한 상태에서 웹 서버에 요청을 안전하게 전달합니다. 요청의 프로토콜 및 포트 번호 변환을 통해 클라이언트와 내부 웹 서버 사이에 데이터를 효율적으로 전송하고, 웹 서비스의 성능과 가용성을 높입니다.


#### 로드 밸런서 생성 내용
![image](https://github.com/sprae114/Study/assets/52237184/00a4c166-924e-48b0-9812-2186f6de804d)

![image](https://github.com/sprae114/Study/assets/52237184/de2b9fd8-30bc-43b1-a36e-b872b2db9ebe)


#### 가용 영역 선택하기
로드 밸린서가 이용하는 가용 영역 선택하기. 선택할 수 있는 곳은 서브넷을 생성한 가용영역 뿐임.
![image](https://github.com/sprae114/Study/assets/52237184/4f98f375-f9b5-4a97-a38b-a5037ea2a426)


#### 로드 밸런서와 대상 그룹 설정하기
ALB을 사용할때 설정해야할 두가지 목록이 있음.
1) **로드 밸런서** : 어떤 프로토콜(HTTP, HTTPS)을 이용할 것인지와 같은 로드 밸런서로 접근에 관련한 설정
2) **대상그룹** : 어떤 웹 서버에 요청을 분산할 것인가와 같은 웹 서버에 접근에 관련 설정
![image](https://github.com/sprae114/Study/assets/52237184/372ce184-b300-4296-b1fa-d947c8c0b9c8)

