ì¶œì²˜ : ëª¨ë˜ ìë°” ì¸ ì•¡ì…˜
í•´ì‹œíƒœí¬ : #ìŠ¤íŠ¸ë¦¼, #Stream
ì°¸ê³ ìë£Œ
1) [ìë°”ì˜ ì •ì„ - ìŠ¤íŠ¸ë¦¼(Stream) | Integerous DevLog (ryan-han.com)](https://ryan-han.com/post/dev/java-stream/)
2) [Java ìŠ¤íŠ¸ë¦¼ Stream (1) ì´ì •ë¦¬ | Eric Han's IT Blog (futurecreator.github.io)](https://futurecreator.github.io/2018/08/26/java-8-streams/)
3) [[Java] Stream API ì—°ìŠµë¬¸ì œ í’€ì´ (5/5) - MangKyu's Diary (tistory.com)](https://mangkyu.tistory.com/116)
----

# ìŠ¤íŠ¸ë¦¼ ê°œë… ì„¤ëª…

## ìŠ¤íŠ¸ë¦¼ì´ë€? âœ”
**ë°ì´í„° ì²˜ë¦¬ ì—°ì‚°ì„ ì§€ì›**í•˜ë„ë¡ ì†ŒìŠ¤ì—ì„œ ì¶”ì¶œëœ ì—°ì†ëœ ìš”ì†Œ
![[Pasted image 20230905170758.png]]


## ìŠ¤íŠ¸ë¦¼ì˜ ì¥ì ì€?
ìŠ¤íŠ¸ë¦¼ì„ ì´ìš©í•˜ë©´Â ì„ ì–¸í˜•(ì¦‰, ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì„ì‹œ êµ¬í˜„ ì½”ë“œ ëŒ€ì‹  **SQLì²˜ëŸ¼ ì§ˆì˜ë¡œ í‘œí˜„** í•  ìˆ˜ ìˆë‹¤.)ìœ¼ë¡œ ì»¬ë ‰ì…˜ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.
ë˜í•œ ìŠ¤íŠ¸ë¦¼ì„ ì´ìš©í•˜ë©´ **ë©€í‹°ìŠ¤ë ˆë“œ ì½”ë“œë¥¼ êµ¬í˜„í•˜ì§€ ì•Šì•„ë„ ë°ì´í„°ë¥¼Â íˆ¬ëª…í•˜ê²Œë³‘ë ¬ë¡œ ì²˜ë¦¬**í•  ìˆ˜ ìˆë‹¤.


## ëª…ë ¹í˜• í”„ë¡œê·¸ë˜ë° vs í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°âœ”
- ëª…ë ¹í˜• í”„ë¡œê·¸ë˜ë°-> ì–´ë–»ê²Œ(How) í•  ê±´ì§€ë¥¼ ì„¤ëª…í•˜ëŠ” ë°©ì‹
```java
// 1 ~ 10ê¹Œì§€ì˜ ê°’ì´ iì— í• ë‹¹ëœë‹¤ 
for(int i = 1 ; i < 10; i++) { 
	System.out.println(i); 
}
```

- í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë° -> ë¬´ì—‡(What)ì„ í•  ê±´ì§€ë¥¼ ì„¤ëª…í•˜ëŠ” ë°©ì‹
```java
process(10, print(num));
```

ì¶œì²˜ : [[í”„ë¡œê·¸ë˜ë°] í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°(Functional Programming) ì´ë€? - MangKyu's Diary (tistory.com)](https://mangkyu.tistory.com/111)


## <ì½”ë“œ> ìŠ¤íŠ¸ë¦¼ì˜ íŠ¹ì§•ì€? 
**1. ì›ë³¸ì˜ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ì§€ ì•ŠëŠ”ë‹¤.**
Stream APIëŠ” ì›ë³¸ì˜ ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ì—¬ ì›ë³¸ì˜ ë°ì´í„°ê°€ ì•„ë‹Œ ë³„ë„ì˜ ìš”ì†Œë“¤ë¡œ Streamì„ ìƒì„±í•œë‹¤. ì •ë ¬ì´ë‚˜ í•„í„°ë§ ë“±ì˜ ì‘ì—…ì€ ë³„ë„ì˜ Stream ìš”ì†Œë“¤ì—ì„œ ì²˜ë¦¬ê°€ ëœë‹¤.
``` java
List<String> sortedList = nameStream.sorted()
							.collect(Collections.toList());
```

**2. Streamì€ ì¼íšŒìš©ì´ë‹¤.**
Stream APIëŠ” ì¼íšŒìš©ì´ê¸° ë•Œë¬¸ì— í•œë²ˆ ì‚¬ìš©ì´ ëë‚˜ë©´ ì¬ì‚¬ìš©ì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤. ë§Œì•½ ë‹«íŒ Streamì„ ë‹¤ì‹œ ì‚¬ìš©í•œë‹¤ë©´ IllegalStateExceptionì´ ë°œìƒí•˜ê²Œ ëœë‹¤.
```java
userStream.sorted().forEach(System.out::print);

// ìŠ¤íŠ¸ë¦¼ì´ ì´ë¯¸ ì‚¬ìš©ë˜ì–´ ë‹«í˜”ìœ¼ë¯€ë¡œ IllegalStateException ì—ëŸ¬ ë°œìƒ
int count = userStream.count(); 
```

**3. ë‚´ë¶€ ë°˜ë³µìœ¼ë¡œ ì‘ì—…ì„ ì²˜ë¦¬í•œë‹¤.**
streamì—ì„œëŠ” ë°˜ë³µ ë¬¸ë²•ì„ ë©”ì†Œë“œ ë‚´ë¶€ì— ìˆ¨ê¸°ê³  ìˆê¸° ë•Œë¬¸ì— ê°„ê²°í•œ ì½”ë“œì˜ ì‘ì„±ì´ ê°€ëŠ¥í•˜ë‹¤.Â 
```java
nameStream.forEach(System.out::println);
```


## <ì½”ë“œ> ê¸°ì¡´ì½”ë“œì™€ ìŠ¤íŠ¸ë¦¼ ë¹„êµí•˜ê¸°
- ê¸°ì¡´ì½”ë“œ
```java
//í•„í„°ë§ì— ë§ëŠ” ê²°ê³¼ ì €ì¥
List<Dish< lowCaloricDishes = new ArrayList<>();
for(Dish dish : menu) {
  if(dish.getCalories() < 400) {
    lowCaloricishes.add(dish);
  }
}

//ì •ë ¬í•˜ê¸°
Collections.sort(lowCaloricDishes, new Comparator<Dish>() {
  public int compare(Dish dish1, Dish dish2) {
    reutnr Integer.compare(dish1.getCalories(), dish2.getCalories());
});

//í•´ë‹¹ ì¹¼ë¡œë¦¬ì˜ ìš”ë¦¬ ì €ì¥í•˜ê¸°
List<Strin lowCaloricDishesName = new ArrayList<>();
for(Dish dish : lowCaloricDishes) {
  lowCaloricDishesName.add(dish.getName());
}
```

- ìŠ¤íŠ¸ë¦¼ ì ìš© ì½”ë“œ
```java
List<String> lowCaloricDishesName = menu.stream()
  .filter(d -> d.getCalories() < 400) // 400 ì¹¼ë¡œë¦¬ ì´í•˜ì˜ ìš”ë¦¬ ì„ íƒ
  .sorted(comparing(Dish::getCalories)) // ì¹¼ë¡œë¦¬ë¡œ ìš”ë¦¬ ì •ë ¬
  .map(Dish::getName) // ìš”ë¦¬ëª… ì¶”ì¶œ
  .collect(toList()); // ëª¨ë“  ìš”ë¦¬ëª…ì„ ë¦¬ìŠ¤íŠ¸ì— ì €ì¥
```
![[Pasted image 20221117010655.png]]


## ìŠ¤íŠ¸ë¦¼ ì—°ì‚° ê³¼ì •ì— ë”°ë¥¸ í•¨ìˆ˜ ì •ë¦¬ âœ”
â–¶ì¤‘ê°„ ì—°ì‚°
ì¤‘ê°„ ì—°ì‚°ì˜ ì¤‘ìš”í•œ íŠ¹ì§•ì€ ë‹¨ë§ ì—°ì‚°ì„ ìŠ¤íŠ¸ë¦¼ **íŒŒì´í”„ë¼ì¸ì— ì‹¤í–‰í•˜ê¸° ì „ê¹Œì§€ëŠ” ì•„ë¬´ ì—°ì‚°ë„ ìˆ˜í–‰í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒ**. ì¦‰,Â `ê²Œìœ¼ë¥´ë‹¤(lazy)`ëŠ” ê²ƒì´ë‹¤.

- ì¤‘ê°„ ì—°ì‚° ì¢…ë¥˜
1.  ìŠ¤íŠ¸ë¦¼ í•„í„°ë§ : filter(), distinct()
2.  ìŠ¤íŠ¸ë¦¼ ë³€í™˜ : map(), flatMap()
3.  ìŠ¤íŠ¸ë¦¼ ì œí•œ : limit(), skip()
4.  ìŠ¤íŠ¸ë¦¼ ì •ë ¬ : sorted()
5.  ìŠ¤íŠ¸ë¦¼ ì—°ì‚° ê²°ê³¼ í™•ì¸ : peek()

â–¶ìµœì¢… ì—°ì‚°
ìµœì¢… ì—°ì‚°ì€ ìŠ¤íŠ¸ë¦¼ **íŒŒì´í”„ë¼ì¸ì—ì„œ ê²°ê³¼ë¥¼ ë„ì¶œ**í•œë‹¤.

- ì¢…ë¥˜
1.  ìš”ì†Œì˜ ì¶œë ¥ : forEach()
2.  ìš”ì†Œì˜ ì†Œëª¨ : reduce()
3.  ìš”ì†Œì˜ ê²€ìƒ‰ : findFirst(), findAny()
4.  ìš”ì†Œì˜ ê²€ì‚¬ : anyMatch(), allMatch(), noneMatch()
5.  ìš”ì†Œì˜ í†µê³„ : count(), min(), max()
6.  ìš”ì†Œì˜ ì—°ì‚° : sum(), average()
7.  ìš”ì†Œì˜ ìˆ˜ì§‘ : collect()


## ìŠ¤íŠ¸ë¦¼ê³¼ ì»¬ë ‰ì…˜ ì°¨ì´ëŠ”?
ìŠ¤íŠ¸ë¦¼ê³¼ ì»¬ë ‰ì…˜ì˜ ê°€ì¥ í° ì°¨ì´ëŠ”,Â **"ë°ì´í„°ë¥¼ ì–¸ì œ ê³„ì‚°í•˜ëŠëƒ"**Â ë¼ê³  í•©ë‹ˆë‹¤.

â–¶ì»¬ë ¥ì…˜
-  í˜„ì¬ ìë£Œêµ¬ì¡°ê°€ í¬í•¨í•˜ëŠ” ëª¨ë“  ê°’ì„ ë©”ëª¨ë¦¬ì— ì €ì¥í•˜ëŠ” ìë£Œêµ¬ì¡°(**ì ê·¹ì  ìƒì„±**)
- for-each ë“±ìœ¼ë¡œ ì‚¬ìš©ìê°€ ì§ì ‘ ìš”ì†Œë¥¼ ë°˜ë³µí•´ì•¼í•¨. (**ì™¸ë¶€ ë°˜ë³µ**)

â–¶ìŠ¤íŠ¸ë¦¼
-  ì´ë¡ ì ìœ¼ë¡œ ìš”ì²­í•  ë•Œë§Œ ìš”ì†Œë¥¼ ê³„ì‚°í•˜ëŠ” ê³ ì •ëœ ìë£Œêµ¬ì¡° (**ê²Œìœ¼ë¥¸ ìƒì„±**)
-  í•¨ìˆ˜ì— ì–´ë–¤ ì‘ì—…ì„ ìˆ˜í–‰í• ì§€ë§Œ ì§€ì •í•˜ë©´ ëª¨ë“  ê²ƒì´ ì•Œì•„ì„œ ì²˜ë¦¬(**ë‚´ë¶€ ë°˜ë³µ**)


## <ì½”ë“œ> ë‚´ë¶€ ë°˜ë³µì˜ ì¥ì ì€?
1) ì‘ì—…ì„ íˆ¬ëª…í•˜ê²Œ **ë³‘ë ¬ë¡œ ì²˜ë¦¬**í•˜ê±°ë‚˜, ë” ìµœì í™”ëœ **ë‹¤ì–‘í•œ ìˆœì„œë¡œ ì²˜ë¦¬**
2) ë°ì´í„° í‘œí˜„ê³¼ í•˜ë“œì›¨ì–´ë¥¼ í™œìš©í•œ ë³‘ë ¬ì„± êµ¬í˜„ì„ ìë™ìœ¼ë¡œ ì„ íƒ
![[Pasted image 20221117165158.png]]
- ex) 500ì¹¼ë¡œë¦¬ ì´ìƒ ìŒì‹ì„ í•„í„°ë§í•˜ê³  ì‹¶ì€ ê²½ìš°
``` java
List<String> names = menu.stream()  
    .filter(dish -> {  
      System.out.println("filtering " + dish.getName());  
      return dish.getCalories() > 500;  
    })  
    .map(dish -> {  
      System.out.println("mapping " + dish.getName());  
      return dish.getName();  
    })  
    .limit(3)  
    .collect(toList());  
System.out.println(names);
```

ì¶œë ¥
```
filtering : pork
mapping : pork
filtering : beef
mapping : beef
filtering : chicken
filtering : french fries
mapping : french fries

[pork, beef, french fries]
```
- filterì—°ì‚°ê³¼ mapì—°ì‚°ì´ ë³‘í•©ë˜ì–´ ì¶œë ¥ëŒ
- limitì—°ì‚°ì„ í†µí•´ ì‡¼íŠ¸ ì„œí‚·(ë¶ˆí•„ìš”í•œ ì—°ì‚° ì°¨ë‹¨)ì„ í•¨
- ğŸ’¥ filteringì „ì— chickenì€ ì¶œë ¥ëì§€ë§Œ, ì´í›„ í•„í„°ë§ ëœê±° í™•ì¸í•˜ê¸°
- ğŸ’¥ ëŒë‹¤ì‹ì—ì„œ ë‘ê°œì´ìƒ  ì“¸ë•Œ í‘œí˜„ë°©ì‹ ìµíˆê¸°

&& ì™€ & ì°¨ì´ëŠ”?
-   & ,Â  | : ì—°ì‚°ìì˜Â ì• ì¡°ê±´ì‹ê³¼ ë’¤ ì¡°ê±´ì‹ì„Â **ë‘˜ ë‹¤**Â ì‹¤í–‰Â ì‹œí‚¨ë‹¤.
-   && ,Â  ||Â  : ì—°ì‚°ìì˜Â ì• ì¡°ê±´ì‹ì˜ ê²°ê³¼ì— ë”°ë¼ ë’¤ ì¡°ê±´ì‹ì˜ ì‹¤í–‰ ì—¬ë¶€ë¥¼ ê²°ì •

ì¶œì²˜ : [[Java] ìë°” ì‡¼íŠ¸ ì„œí‚· (short-circuit) (tistory.com)](https://junior-datalist.tistory.com/214)

